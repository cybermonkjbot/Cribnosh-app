


import { useEffect, useRef, useState } from 'react';
import { Animated, Easing, Platform, View } from 'react-native';
import Svg, { Defs, Mask, Path, Stop, LinearGradient as SvgLinearGradient } from 'react-native-svg';


  const [shimmered, setShimmered] = useState(false);
  const shimmerAnim = useRef(new Animated.Value(-1)).current;

  useEffect(() => {
    if (!shimmered) {
      Animated.timing(shimmerAnim, {
        toValue: 1,
        duration: 1200,
        useNativeDriver: Platform.OS !== 'web',
        easing: Easing.inOut(Easing.ease),
      }).start(() => setShimmered(true));
    }
  }, [shimmered, shimmerAnim]);

  return (
    Platform.OS === 'web' ? (
      <div
        style={{
          width: 36,
          height: 32,
          position: 'relative',
          display: 'inline-block',
        }}
      >
        <svg
          width={36}
          height={32}
          viewBox="0 0 36 32"
          fill="none"
          style={{ display: 'block', position: 'absolute', top: 0, left: 0 }}
          {...props as any}
        >
          <path
            d="M29.6667 3.99993V9.33326M32.5834 6.66659H26.7501M6.33339 22.6666V25.3333M7.79172 23.9999H4.87506M14.9915 20.6666C14.8613 20.2052 14.5983 19.7841 14.2297 19.4471C13.8612 19.1101 13.4006 18.8696 12.8959 18.7506L3.94901 16.6413C3.79637 16.6016 3.66203 16.5176 3.56636 16.4019C3.4707 16.2861 3.41895 16.145 3.41895 15.9999C3.41895 15.8549 3.4707 15.7137 3.56636 15.598C3.66203 15.4823 3.79637 15.3982 3.94901 15.3586L12.8959 13.2479C13.4004 13.129 13.8609 12.8887 14.2294 12.552C14.5979 12.2153 14.8611 11.7944 14.9915 11.3333L17.2986 3.15326C17.3415 3.01315 17.4333 2.88971 17.5601 2.80178C17.6869 2.71386 17.8417 2.66626 18.0008 2.66626C18.1599 2.66626 18.3147 2.71386 18.4415 2.80178C18.5682 2.88971 18.6601 3.01315 18.703 3.15326L21.0086 11.3333C21.1388 11.7947 21.4019 12.2158 21.7704 12.5527C22.139 12.8897 22.5995 13.1302 23.1042 13.2493L32.0511 15.3573C32.205 15.3961 32.3406 15.4799 32.4373 15.596C32.534 15.7121 32.5864 15.854 32.5864 15.9999C32.5864 16.1458 32.534 16.2877 32.4373 16.4038C32.3406 16.5199 32.205 16.6038 32.0511 16.6426L23.1042 18.7506C22.5995 18.8696 22.139 19.1101 21.7704 19.4471C21.4019 19.7841 21.1388 20.2052 21.0086 20.6666L18.7015 28.8466C18.6586 28.9867 18.5668 29.1101 18.44 29.1981C18.3132 29.286 18.1585 29.3336 17.9993 29.3336C17.8402 29.3336 17.6854 29.286 17.5586 29.1981C17.4319 29.1101 17.34 28.9867 17.2971 28.8466L14.9915 20.6666Z"
            stroke={color}
            strokeWidth={2}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
        </svg>
        {!shimmered && (
          <div
            style={{
              position: 'absolute',
              top: 0,
              left: 0,
              width: 36,
              height: 32,
              pointerEvents: 'none',
              zIndex: 2,
              maskImage: 'url("data:image/svg+xml;utf8,<svg width=\'36\' height=\'32\' viewBox=\'0 0 36 32\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'><path d=\'M29.6667 3.99993V9.33326M32.5834 6.66659H26.7501M6.33339 22.6666V25.3333M7.79172 23.9999H4.87506M14.9915 20.6666C14.8613 20.2052 14.5983 19.7841 14.2297 19.4471C13.8612 19.1101 13.4006 18.8696 12.8959 18.7506L3.94901 16.6413C3.79637 16.6016 3.66203 16.5176 3.56636 16.4019C3.4707 16.2861 3.41895 16.145 3.41895 15.9999C3.41895 15.8549 3.4707 15.7137 3.56636 15.598C3.66203 15.4823 3.79637 15.3982 3.94901 15.3586L12.8959 13.2479C13.4004 13.129 13.8609 12.8887 14.2294 12.552C14.5979 12.2153 14.8611 11.7944 14.9915 11.3333L17.2986 3.15326C17.3415 3.01315 17.4333 2.88971 17.5601 2.80178C17.6869 2.71386 17.8417 2.66626 18.0008 2.66626C18.1599 2.66626 18.3147 2.71386 18.4415 2.80178C18.5682 2.88971 18.6601 3.01315 18.703 3.15326L21.0086 11.3333C21.1388 11.7947 21.4019 12.2158 21.7704 12.5527C22.139 12.8897 22.5995 13.1302 23.1042 13.2493L32.0511 15.3573C32.205 15.3961 32.3406 15.4799 32.4373 15.596C32.534 15.7121 32.5864 15.854 32.5864 15.9999C32.5864 16.1458 32.534 16.2877 32.4373 16.4038C32.3406 16.5199 32.205 16.6038 32.0511 16.6426L23.1042 18.7506C22.5995 18.8696 22.139 19.1101 21.7704 19.4471C21.4019 19.7841 21.1388 20.2052 21.0086 20.6666L18.7015 28.8466C18.6586 28.9867 18.5668 29.1101 18.44 29.1981C18.3132 29.286 18.1585 29.3336 17.9993 29.3336C17.8402 29.3336 17.6854 29.286 17.5586 29.1981C17.4319 29.1101 17.34 28.9867 17.2971 28.8466L14.9915 20.6666Z\' stroke=\'white\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/></svg>")',
              WebkitMaskImage: 'url("data:image/svg+xml;utf8,<svg width=\'36\' height=\'32\' viewBox=\'0 0 36 32\' fill=\'none\' xmlns=\'http://www.w3.org/2000/svg\'><path d=\'M29.6667 3.99993V9.33326M32.5834 6.66659H26.7501M6.33339 22.6666V25.3333M7.79172 23.9999H4.87506M14.9915 20.6666C14.8613 20.2052 14.5983 19.7841 14.2297 19.4471C13.8612 19.1101 13.4006 18.8696 12.8959 18.7506L3.94901 16.6413C3.79637 16.6016 3.66203 16.5176 3.56636 16.4019C3.4707 16.2861 3.41895 16.145 3.41895 15.9999C3.41895 15.8549 3.4707 15.7137 3.56636 15.598C3.66203 15.4823 3.79637 15.3982 3.94901 15.3586L12.8959 13.2479C13.4004 13.129 13.8609 12.8887 14.2294 12.552C14.5979 12.2153 14.8611 11.7944 14.9915 11.3333L17.2986 3.15326C17.3415 3.01315 17.4333 2.88971 17.5601 2.80178C17.6869 2.71386 17.8417 2.66626 18.0008 2.66626C18.1599 2.66626 18.3147 2.71386 18.4415 2.80178C18.5682 2.88971 18.6601 3.01315 18.703 3.15326L21.0086 11.3333C21.1388 11.7947 21.4019 12.2158 21.7704 12.5527C22.139 12.8897 22.5995 13.1302 23.1042 13.2493L32.0511 15.3573C32.205 15.3961 32.3406 15.4799 32.4373 15.596C32.534 15.7121 32.5864 15.854 32.5864 15.9999C32.5864 16.1458 32.534 16.2877 32.4373 16.4038C32.3406 16.5199 32.205 16.6038 32.0511 16.6426L23.1042 18.7506C22.5995 18.8696 22.139 19.1101 21.7704 19.4471C21.4019 19.7841 21.1388 20.2052 21.0086 20.6666L18.7015 28.8466C18.6586 28.9867 18.5668 29.1101 18.44 29.1981C18.3132 29.286 18.1585 29.3336 17.9993 29.3336C17.8402 29.3336 17.6854 29.286 17.5586 29.1981C17.4319 29.1101 17.34 28.9867 17.2971 28.8466L14.9915 20.6666Z\' stroke=\'white\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'/></svg>")',
              background: `linear-gradient(120deg, transparent 40%, rgba(255,255,255,0.7) 50%, transparent 60%)`,
              backgroundSize: '200% 200%',
              backgroundPosition: `${(shimmerAnim as any)._value * 100}% ${(shimmerAnim as any)._value * 100}%`,
              transition: 'background-position 1.2s cubic-bezier(0.4,0,0.2,1)',
            }}
          />
        )}
      </div>
    ) : (
      <View style={{ width: 36, height: 32, position: 'relative' }}>
        <Svg width={36} height={32} viewBox="0 0 36 32" fill="none" {...props}>
          <Defs>
            <Mask id="shimmer-mask" x={0} y={0} width={36} height={32} maskUnits="userSpaceOnUse">
              <Path
                d="M29.6667 3.99993V9.33326M32.5834 6.66659H26.7501M6.33339 22.6666V25.3333M7.79172 23.9999H4.87506M14.9915 20.6666C14.8613 20.2052 14.5983 19.7841 14.2297 19.4471C13.8612 19.1101 13.4006 18.8696 12.8959 18.7506L3.94901 16.6413C3.79637 16.6016 3.66203 16.5176 3.56636 16.4019C3.4707 16.2861 3.41895 16.145 3.41895 15.9999C3.41895 15.8549 3.4707 15.7137 3.56636 15.598C3.66203 15.4823 3.79637 15.3982 3.94901 15.3586L12.8959 13.2479C13.4004 13.129 13.8609 12.8887 14.2294 12.552C14.5979 12.2153 14.8611 11.7944 14.9915 11.3333L17.2986 3.15326C17.3415 3.01315 17.4333 2.88971 17.5601 2.80178C17.6869 2.71386 17.8417 2.66626 18.0008 2.66626C18.1599 2.66626 18.3147 2.71386 18.4415 2.80178C18.5682 2.88971 18.6601 3.01315 18.703 3.15326L21.0086 11.3333C21.1388 11.7947 21.4019 12.2158 21.7704 12.5527C22.139 12.8897 22.5995 13.1302 23.1042 13.2493L32.0511 15.3573C32.205 15.3961 32.3406 15.4799 32.4373 15.596C32.534 15.7121 32.5864 15.854 32.5864 15.9999C32.5864 16.1458 32.534 16.2877 32.4373 16.4038C32.3406 16.5199 32.205 16.6038 32.0511 16.6426L23.1042 18.7506C22.5995 18.8696 22.139 19.1101 21.7704 19.4471C21.4019 19.7841 21.1388 20.2052 21.0086 20.6666L18.7015 28.8466C18.6586 28.9867 18.5668 29.1101 18.44 29.1981C18.3132 29.286 18.1585 29.3336 17.9993 29.3336C17.8402 29.3336 17.6854 29.286 17.5586 29.1981C17.4319 29.1101 17.34 28.9867 17.2971 28.8466L14.9915 20.6666Z"
                fill="#fff"
                stroke="#fff"
                strokeWidth={2}
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </Mask>
          </Defs>
          <Path
            d="M29.6667 3.99993V9.33326M32.5834 6.66659H26.7501M6.33339 22.6666V25.3333M7.79172 23.9999H4.87506M14.9915 20.6666C14.8613 20.2052 14.5983 19.7841 14.2297 19.4471C13.8612 19.1101 13.4006 18.8696 12.8959 18.7506L3.94901 16.6413C3.79637 16.6016 3.66203 16.5176 3.56636 16.4019C3.4707 16.2861 3.41895 16.145 3.41895 15.9999C3.41895 15.8549 3.4707 15.7137 3.56636 15.598C3.66203 15.4823 3.79637 15.3982 3.94901 15.3586L12.8959 13.2479C13.4004 13.129 13.8609 12.8887 14.2294 12.552C14.5979 12.2153 14.8611 11.7944 14.9915 11.3333L17.2986 3.15326C17.3415 3.01315 17.4333 2.88971 17.5601 2.80178C17.6869 2.71386 17.8417 2.66626 18.0008 2.66626C18.1599 2.66626 18.3147 2.71386 18.4415 2.80178C18.5682 2.88971 18.6601 3.01315 18.703 3.15326L21.0086 11.3333C21.1388 11.7947 21.4019 12.2158 21.7704 12.5527C22.139 12.8897 22.5995 13.1302 23.1042 13.2493L32.0511 15.3573C32.205 15.3961 32.3406 15.4799 32.4373 15.596C32.534 15.7121 32.5864 15.854 32.5864 15.9999C32.5864 16.1458 32.534 16.2877 32.4373 16.4038C32.3406 16.5199 32.205 16.6038 32.0511 16.6426L23.1042 18.7506C22.5995 18.8696 22.139 19.1101 21.7704 19.4471C21.4019 19.7841 21.1388 20.2052 21.0086 20.6666L18.7015 28.8466C18.6586 28.9867 18.5668 29.1101 18.44 29.1981C18.3132 29.286 18.1585 29.3336 17.9993 29.3336C17.8402 29.3336 17.6854 29.286 17.5586 29.1981C17.4319 29.1101 17.34 28.9867 17.2971 28.8466L14.9915 20.6666Z"
            stroke={color}
            strokeWidth={2}
            strokeLinecap="round"
            strokeLinejoin="round"
          />
          {!shimmered && (
            <Animated.Rect
              x={0}
              y={0}
              width={36}
              height={32}
              mask="url(#shimmer-mask)"
              fill="url(#shimmer-gradient)"
              style={{
                opacity: 1,
                transform: [
                  {
                    translateX: shimmerAnim.interpolate({
                      inputRange: [-1, 1],
                      outputRange: [-36, 36],
                    }),
                  },
                  {
                    translateY: shimmerAnim.interpolate({
                      inputRange: [-1, 1],
                      outputRange: [-32, 32],
                    }),
                  },
                ],
              }}
            />
          )}
          <Defs>
            <SvgLinearGradient id="shimmer-gradient" x1="0" y1="0" x2="36" y2="32" gradientUnits="userSpaceOnUse">
              <Stop offset="40%" stopColor="transparent" />
              <Stop offset="50%" stopColor="#fff" stopOpacity="0.7" />
              <Stop offset="60%" stopColor="transparent" />
            </SvgLinearGradient>
          </Defs>
        </Svg>
      </View>
    )
  );
