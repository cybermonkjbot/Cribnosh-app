{"openapi":"3.0.3","info":{"title":"CribNosh API","description":"Personalized meal platform API with modern, glossy, culturally-aware design","version":"1.0.0","contact":{"name":"CribNosh API Support","email":"support@cribnosh.co.uk"}},"servers":[{"url":"https://cribnosh.co.uk","description":"Production server"},{"url":"https://cribnosh.com","description":"Alternative production server"}],"paths":{"/":{"get":{"summary":"API Welcome Endpoint","description":"Welcome endpoint that confirms the API is working and accessible","tags":["System"],"responses":{"200":{"description":"API is working successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","example":"Welcome to the CribNosh API! The API is working."}}},"message":{"type":"string","example":"Success"}}}}}}},"security":[]}},"/cooking/apply":{"post":{"summary":"Apply to Become a Chef","description":"Submit chef application with personal, kitchen, and culinary background information","tags":["Chef","Applications","Onboarding"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["personalInfo","kitchenDetails","culinaryBackground"],"properties":{"personalInfo":{"type":"object","required":["email","firstName","lastName"],"properties":{"email":{"type":"string","format":"email","description":"Applicant's email address","example":"chef@example.com"},"firstName":{"type":"string","description":"First name","example":"John"},"lastName":{"type":"string","description":"Last name","example":"Doe"},"phone":{"type":"string","nullable":true,"description":"Phone number","example":"+1234567890"},"dateOfBirth":{"type":"string","format":"date","nullable":true,"description":"Date of birth","example":"1990-01-15"},"address":{"type":"object","nullable":true,"description":"Address information","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"London"},"postcode":{"type":"string","example":"SW1A 1AA"},"country":{"type":"string","example":"UK"}}}}},"kitchenDetails":{"type":"object","required":["kitchenName","kitchenType"],"properties":{"kitchenName":{"type":"string","description":"Name of the kitchen","example":"Chef John's Kitchen"},"kitchenType":{"type":"string","enum":["home","commercial","food_truck","popup","other"],"description":"Type of kitchen","example":"home"},"kitchenAddress":{"type":"object","nullable":true,"description":"Kitchen address","properties":{"street":{"type":"string","example":"123 Kitchen St"},"city":{"type":"string","example":"London"},"postcode":{"type":"string","example":"SW1A 1AA"}}},"equipment":{"type":"array","items":{"type":"string"},"description":"Available kitchen equipment","example":["oven","stovetop","refrigerator","food_processor"]},"capacity":{"type":"number","nullable":true,"description":"Maximum serving capacity per day","example":50}}},"culinaryBackground":{"type":"object","required":["experience","cuisineTypes"],"properties":{"experience":{"type":"string","description":"Years of culinary experience","example":"5 years professional experience"},"cuisineTypes":{"type":"array","items":{"type":"string"},"description":"Types of cuisines they specialize in","example":["italian","french","mediterranean"]},"specialties":{"type":"array","items":{"type":"string"},"description":"Culinary specialties","example":["pasta","seafood","desserts"]},"certifications":{"type":"array","items":{"type":"string"},"description":"Culinary certifications","example":["ServSafe","Culinary Institute Certificate"]},"education":{"type":"string","nullable":true,"description":"Culinary education background","example":"Culinary Arts Degree from Le Cordon Bleu"},"previousRestaurants":{"type":"array","items":{"type":"string"},"description":"Previous restaurant experience","example":["Michelin Star Restaurant","Local Bistro"]}}}}}}}},"responses":{"200":{"description":"Chef application submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"applicationId":{"type":"string","description":"Application reference ID","example":"APP-12345"},"status":{"type":"string","description":"Application status","example":"submitted"},"submittedAt":{"type":"string","format":"date-time","description":"Application submission timestamp","example":"2024-01-15T10:00:00.000Z"},"nextSteps":{"type":"array","items":{"type":"string"},"description":"Next steps in the application process","example":["Review application","Schedule interview","Background check"]},"estimatedReviewTime":{"type":"string","description":"Estimated time for application review","example":"3-5 business days"}}},"message":{"type":"string","example":"Application submitted successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/monitoring/health":{"get":{"summary":"System Health Check","description":"Get system health status and monitoring information","tags":["Monitoring"],"parameters":[{"in":"query","name":"detailed","schema":{"type":"boolean","default":false},"description":"Whether to return detailed health information","example":true}],"responses":{"200":{"description":"Health check completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","degraded","unhealthy"],"description":"Overall system health status","example":"healthy"},"timestamp":{"type":"string","format":"date-time","description":"Health check timestamp","example":"2024-01-15T10:30:00.000Z"},"uptime":{"type":"number","description":"System uptime in seconds","example":86400},"version":{"type":"string","description":"Application version","example":"1.0.0"},"services":{"type":"object","description":"Individual service health (detailed mode only)","properties":{"database":{"type":"object","properties":{"status":{"type":"string","example":"healthy"},"responseTime":{"type":"number","example":45}}},"redis":{"type":"object","properties":{"status":{"type":"string","example":"healthy"},"responseTime":{"type":"number","example":12}}},"stripe":{"type":"object","properties":{"status":{"type":"string","example":"healthy"},"responseTime":{"type":"number","example":234}}}}},"metrics":{"type":"object","description":"System metrics (detailed mode only)","properties":{"memory":{"type":"object","properties":{"used":{"type":"number","example":512},"total":{"type":"number","example":1024},"percentage":{"type":"number","example":50}}},"cpu":{"type":"object","properties":{"usage":{"type":"number","example":25.5}}},"requests":{"type":"object","properties":{"perMinute":{"type":"number","example":150},"averageResponseTime":{"type":"number","example":120}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Health check failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/monitoring/metrics":{"get":{"summary":"Get System Metrics","description":"Retrieve system performance metrics and monitoring data. This endpoint provides access to various system metrics including performance, business metrics, and API statistics for monitoring and analytics purposes.","tags":["Monitoring","Metrics"],"parameters":[{"in":"query","name":"metric","schema":{"type":"string"},"description":"Specific metric name to retrieve","example":"api_response_time"},{"in":"query","name":"timeRange","schema":{"type":"string","enum":["1h","6h","24h","7d","30d"],"default":"1h"},"description":"Time range for metric data","example":"24h"},{"in":"query","name":"aggregation","schema":{"type":"string","enum":["avg","sum","min","max","count"],"default":"avg"},"description":"Aggregation method for metric data","example":"avg"}],"responses":{"200":{"description":"Metrics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"metrics":{"type":"array","description":"Array of metric data points","items":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time","description":"Metric timestamp","example":"2024-01-15T14:30:00Z"},"value":{"type":"number","description":"Metric value","example":125.5},"tags":{"type":"object","additionalProperties":true,"description":"Metric tags","example":{"endpoint":"/api/orders","method":"POST","status":"200"}}}}},"summary":{"type":"object","description":"Metric summary statistics","properties":{"average":{"type":"number","example":125.5},"min":{"type":"number","example":45.2},"max":{"type":"number","example":250.8},"count":{"type":"integer","example":1250},"trend":{"type":"string","enum":["up","down","stable"],"description":"Trend direction","example":"up"}}},"metadata":{"type":"object","properties":{"timeRange":{"type":"string","example":"24h"},"aggregation":{"type":"string","example":"avg"},"generatedAt":{"type":"string","format":"date-time","example":"2024-01-15T14:30:00Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Record System Metrics","description":"Record system metrics and performance data. This endpoint allows recording various types of metrics including API performance, business metrics, and custom application metrics for monitoring and analytics.","tags":["Monitoring","Metrics"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","properties":{"action":{"type":"string","enum":["record_metric"],"example":"record_metric"},"data":{"type":"object","properties":{"name":{"type":"string","description":"Metric name","example":"api_response_time"},"value":{"type":"number","description":"Metric value","example":125.5},"tags":{"type":"object","additionalProperties":true,"description":"Metric tags","example":{"endpoint":"/api/orders","method":"POST"}}}}}},{"type":"object","properties":{"action":{"type":"string","enum":["record_metrics"],"example":"record_metrics"},"data":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":"api_response_time"},"value":{"type":"number","example":125.5},"tags":{"type":"object","additionalProperties":true}}}}}},{"type":"object","properties":{"action":{"type":"string","enum":["record_business_metrics"],"example":"record_business_metrics"},"data":{"type":"object","properties":{"ordersCount":{"type":"integer","example":25},"revenue":{"type":"number","example":1250.5},"activeUsers":{"type":"integer","example":150}}}}},{"type":"object","properties":{"action":{"type":"string","enum":["record_api_metric"],"example":"record_api_metric"},"data":{"type":"object","properties":{"endpoint":{"type":"string","example":"/api/orders"},"method":{"type":"string","example":"POST"},"responseTime":{"type":"number","example":125.5},"statusCode":{"type":"integer","example":200},"userId":{"type":"string","nullable":true,"example":"j1234567890abcdef"}}}}}]}}}},"responses":{"200":{"description":"Metrics recorded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"status":{"type":"string","example":"success"},"message":{"type":"string","example":"Metric recorded successfully"},"recordedAt":{"type":"string","format":"date-time","description":"Timestamp when metric was recorded","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid action or data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"components":{"schemas":{"DriverApplicationRequest":{"type":"object","required":["email"],"properties":{"name":{"type":"string","description":"Full name of the applicant"},"email":{"type":"string","format":"email","description":"Email address of the applicant"},"vehicle":{"type":"string","description":"Vehicle information"},"experience":{"type":"string","description":"Previous driving experience"}}},"DriverApplicationResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}},"/custom_orders":{"get":{"summary":"Get Custom Orders","description":"Retrieve paginated list of custom orders for the authenticated user","tags":["Custom Orders","Orders"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of orders to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of orders to skip","example":0}],"responses":{"200":{"description":"Custom orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orders":{"type":"array","description":"Array of custom orders","items":{"type":"object","properties":{"_id":{"type":"string","description":"Custom order ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"User ID who created the order","example":"j1234567890abcdef"},"requirements":{"type":"string","description":"Custom order requirements","example":"Gluten-free pasta with vegan cheese"},"serving_size":{"type":"number","description":"Number of servings","example":4},"desired_delivery_time":{"type":"string","format":"date-time","description":"Preferred delivery time","example":"2024-01-15T18:00:00.000Z"},"custom_order_id":{"type":"string","description":"Public custom order ID","example":"CUST-12345"},"order_id":{"type":"string","description":"Associated regular order ID","example":"ORD-12345"},"status":{"type":"string","enum":["pending","processing","completed","cancelled"],"description":"Order status","example":"processing"},"dietary_restrictions":{"type":"string","nullable":true,"description":"Dietary restrictions","example":"gluten-free, vegan"},"createdAt":{"type":"number","description":"Creation timestamp","example":1640995200000},"updatedAt":{"type":"number","nullable":true,"description":"Last update timestamp","example":1640995200000}}}},"total":{"type":"number","description":"Total number of custom orders","example":25},"limit":{"type":"number","example":20},"offset":{"type":"number","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/custom_orders/{custom_order_id}":{"get":{"summary":"Get Custom Order Details","description":"Retrieve detailed information about a specific custom order by its ID. This endpoint allows customers, chefs, and admins to view custom order specifications, requirements, and current status.","tags":["Orders","Custom Orders"],"parameters":[{"in":"path","name":"custom_order_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the custom order","example":"custom_order_1234567890abcdef"}],"responses":{"200":{"description":"Custom order details retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"_id":{"type":"string","description":"Custom order ID","example":"custom_order_1234567890abcdef"},"userId":{"type":"string","description":"ID of the customer who placed the order","example":"j1234567890abcdef"},"chefId":{"type":"string","nullable":true,"description":"ID of the assigned chef","example":"j0987654321fedcba"},"requirements":{"type":"string","description":"JSON string containing order requirements and specifications","example":"{\"cuisine\": \"Italian\", \"dietary_restrictions\": [\"vegetarian\"], \"servings\": 4, \"budget\": 50}"},"status":{"type":"string","enum":["pending","accepted","preparing","ready","delivered","cancelled"],"description":"Current order status","example":"preparing"},"estimatedPrice":{"type":"number","nullable":true,"description":"Estimated price for the custom order","example":45.99},"deliveryDate":{"type":"string","format":"date-time","nullable":true,"description":"Scheduled delivery date","example":"2024-01-15T18:00:00Z"},"deliveryAddress":{"type":"object","nullable":true,"description":"Delivery address details","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"New York"},"state":{"type":"string","example":"NY"},"zipCode":{"type":"string","example":"10001"}}},"specialInstructions":{"type":"string","nullable":true,"description":"Special instructions from customer","example":"Please avoid nuts and make it extra spicy"},"createdAt":{"type":"string","format":"date-time","description":"Order creation timestamp","example":"2024-01-15T10:00:00Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing custom_order_id parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Custom order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}},"put":{"summary":"Update Custom Order","description":"Update the details and requirements of a custom order. This endpoint allows customers to modify their order specifications and admins to update order information.","tags":["Orders","Custom Orders"],"parameters":[{"in":"path","name":"custom_order_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the custom order","example":"custom_order_1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["details"],"properties":{"details":{"type":"object","description":"Updated order requirements and specifications","properties":{"cuisine":{"type":"string","description":"Preferred cuisine type","example":"Italian"},"dietary_restrictions":{"type":"array","items":{"type":"string"},"description":"Dietary restrictions and preferences","example":["vegetarian","gluten-free"]},"servings":{"type":"number","description":"Number of servings needed","example":4},"budget":{"type":"number","description":"Budget range for the order","example":50},"special_requests":{"type":"string","nullable":true,"description":"Special requests or instructions","example":"Please make it extra spicy and avoid nuts"},"delivery_preferences":{"type":"object","nullable":true,"description":"Delivery preferences","properties":{"preferred_time":{"type":"string","example":"evening"},"contact_method":{"type":"string","example":"phone"}}}}}}}}}},"responses":{"200":{"description":"Custom order updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"orderId":{"type":"string","description":"ID of the updated order","example":"custom_order_1234567890abcdef"},"updatedAt":{"type":"string","format":"date-time","description":"Timestamp when order was updated","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to update this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Custom order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - invalid order details","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete Custom Order","description":"Permanently delete a custom order. This action can only be performed by the order owner or administrators. This action cannot be undone.","tags":["Orders","Custom Orders"],"parameters":[{"in":"path","name":"custom_order_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the custom order","example":"custom_order_1234567890abcdef"}],"responses":{"200":{"description":"Custom order deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"orderId":{"type":"string","description":"ID of the deleted order","example":"custom_order_1234567890abcdef"},"deletedAt":{"type":"string","format":"date-time","description":"Timestamp when order was deleted","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing custom_order_id parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to delete this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Custom order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/dishes":{"get":{"summary":"Get Chef Dishes","description":"Retrieve dishes/menu items created by the authenticated chef","tags":["Chef","Dishes","Meals"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of dishes to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of dishes to skip","example":0}],"responses":{"200":{"description":"Chef dishes retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chef_profile":{"type":"object","description":"Chef profile information","properties":{"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"name":{"type":"string","example":"Chef Mario"},"specialties":{"type":"array","items":{"type":"string"},"example":["italian","pasta"]},"location":{"type":"object","properties":{"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]},"address":{"type":"string","example":"123 Baker Street, London"}}},"status":{"type":"string","example":"active"},"rating":{"type":"number","example":4.8}}},"dishes":{"type":"array","description":"Array of chef's dishes","items":{"type":"object","properties":{"_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID who created the dish","example":"j1234567890abcdef"},"name":{"type":"string","description":"Dish name","example":"Spaghetti Carbonara"},"description":{"type":"string","description":"Dish description","example":"Classic Italian pasta with eggs, cheese, and pancetta"},"price":{"type":"number","description":"Dish price","example":18.99},"cuisine":{"type":"string","description":"Cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"List of ingredients","example":["pasta","eggs","parmesan","pancetta"]},"dietaryInfo":{"type":"object","description":"Dietary information","properties":{"vegetarian":{"type":"boolean","example":false},"vegan":{"type":"boolean","example":false},"glutenFree":{"type":"boolean","example":false},"allergens":{"type":"array","items":{"type":"string"},"example":["eggs","dairy"]}}},"prepTime":{"type":"number","description":"Preparation time in minutes","example":25},"servings":{"type":"number","description":"Number of servings","example":2},"image":{"type":"string","nullable":true,"description":"Dish image URL","example":"https://example.com/dish-image.jpg"},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Dish status","example":"active"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.7},"reviewCount":{"type":"number","description":"Number of reviews","example":15},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/dishes/{dish_id}":{"patch":{"summary":"Update Dish","description":"Update a dish/meal created by the authenticated chef","tags":["Chef","Dishes","Meals"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Dish ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Updated name of the dish","example":"Updated Italian Pasta"},"description":{"type":"string","description":"Updated description","example":"Updated description with new ingredients"},"price":{"type":"number","description":"Updated price","example":18.99},"cuisine":{"type":"array","items":{"type":"string"},"description":"Updated cuisine types","example":["italian","pasta"]},"dietary":{"type":"array","items":{"type":"string"},"description":"Updated dietary information","example":["vegetarian","gluten-free"]},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Updated status","example":"active"},"images":{"type":"array","items":{"type":"string"},"description":"Updated image URLs","example":["https://example.com/new-image.jpg"]}}}}}},"responses":{"200":{"description":"Dish updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Dish updated successfully"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid request body","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can update dishes or not the owner","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Dish not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete Dish","description":"Delete a dish/meal created by the authenticated chef","tags":["Chef","Dishes","Meals"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Dish ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Dish deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Dish deleted successfully"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can delete dishes or not the owner","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Dish not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/location/location":{"get":{"summary":"Get All Chef Locations","description":"Retrieve location information for all chefs","tags":["Chef","Location"],"responses":{"200":{"description":"Chef locations retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of chef locations","items":{"type":"object","properties":{"_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"location":{"type":"object","description":"Chef location information","properties":{"coordinates":{"type":"array","items":{"type":"number"},"description":"Array of [longitude, latitude] coordinates","example":[-0.1278,51.5074]},"city":{"type":"string","description":"City name","example":"London"},"address":{"type":"string","description":"Full address","example":"123 Baker Street, London"},"postcode":{"type":"string","description":"Postal code","example":"NW1 6XE"},"country":{"type":"string","description":"Country","example":"UK"}}},"specialties":{"type":"array","items":{"type":"string"},"description":"Chef specialties","example":["italian","pasta","seafood"]},"status":{"type":"string","enum":["active","inactive","pending"],"description":"Chef status","example":"active"},"isAvailable":{"type":"boolean","description":"Whether chef is currently available","example":true}}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/chef/location/nearby":{"get":{"summary":"Find Nearby Chefs","description":"Find chefs within a specified distance from given coordinates","tags":["Chef","Location","Search"],"parameters":[{"in":"query","name":"latitude","required":true,"schema":{"type":"number","format":"float"},"description":"Latitude coordinate","example":51.5074},{"in":"query","name":"longitude","required":true,"schema":{"type":"number","format":"float"},"description":"Longitude coordinate","example":-0.1278},{"in":"query","name":"maxDistanceKm","required":false,"schema":{"type":"number","format":"float","minimum":0.1,"maximum":100},"description":"Maximum distance in kilometers to search","example":10}],"responses":{"200":{"description":"Nearby chefs found successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of nearby chefs","items":{"type":"object","properties":{"_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"location":{"type":"object","description":"Chef location information","properties":{"coordinates":{"type":"array","items":{"type":"number"},"description":"Array of [longitude, latitude] coordinates","example":[-0.1278,51.5074]},"city":{"type":"string","description":"City name","example":"London"},"address":{"type":"string","description":"Full address","example":"123 Baker Street, London"}}},"specialties":{"type":"array","items":{"type":"string"},"description":"Chef specialties","example":["italian","pasta","seafood"]},"status":{"type":"string","enum":["active","inactive","pending"],"description":"Chef status","example":"active"},"distance":{"type":"number","description":"Distance from search point in kilometers","example":2.5},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.7},"reviewCount":{"type":"number","description":"Number of reviews","example":25}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing or invalid coordinates","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/api/chef/dashboard/average-rating":{"get":{"summary":"Get chef average rating","description":"Retrieve the average rating and total number of ratings for the authenticated chef","tags":["Chef - Dashboard"],"responses":{"200":{"description":"Average rating retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"average_rating":{"type":"number","description":"Average rating score","example":4.5},"total_ratings":{"type":"number","description":"Total number of ratings","example":42}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - Missing or invalid token"},"403":{"description":"Forbidden - Chef access required"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/chef/dashboard/current-orders":{"get":{"summary":"Get Chef Current Orders","description":"Retrieve all active orders assigned to the authenticated chef. This endpoint provides chefs with their current workload including pending, confirmed, and in-progress orders for dashboard management.","tags":["Chef","Orders","Dashboard"],"responses":{"200":{"description":"Current orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"current_orders":{"type":"array","description":"Array of active orders assigned to the chef","items":{"type":"object","properties":{"_id":{"type":"string","description":"Order ID","example":"order_1234567890abcdef"},"customerId":{"type":"string","description":"ID of the customer who placed the order","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"ID of the assigned chef","example":"j0987654321fedcba"},"order_status":{"type":"string","enum":["pending","confirmed","preparing","ready","out_for_delivery"],"description":"Current order status","example":"preparing"},"total_amount":{"type":"number","description":"Total order amount","example":25.99},"order_date":{"type":"string","format":"date-time","description":"Order creation timestamp","example":"2024-01-15T12:00:00Z"},"delivery_date":{"type":"string","format":"date-time","nullable":true,"description":"Scheduled delivery timestamp","example":"2024-01-15T18:00:00Z"},"cuisine_id":{"type":"string","nullable":true,"description":"Cuisine type ID","example":"cuisine_italian"},"payment_status":{"type":"string","enum":["pending","paid","failed","refunded"],"description":"Payment status","example":"paid"},"delivery_address":{"type":"object","nullable":true,"description":"Delivery address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"New York"},"state":{"type":"string","example":"NY"},"zipCode":{"type":"string","example":"10001"}}},"special_instructions":{"type":"string","nullable":true,"description":"Special instructions from customer","example":"Please ring doorbell twice"},"estimated_prep_time":{"type":"number","nullable":true,"description":"Estimated preparation time in minutes","example":30},"items":{"type":"array","description":"Order items","items":{"type":"object","properties":{"dish_id":{"type":"string","example":"dish_123"},"dish_name":{"type":"string","example":"Spaghetti Carbonara"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":12.99},"special_requests":{"type":"string","nullable":true,"example":"Extra cheese"}}}},"customer_info":{"type":"object","nullable":true,"description":"Customer information","properties":{"name":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890"},"email":{"type":"string","example":"john.doe@example.com"}}}}}},"total_orders":{"type":"number","description":"Total number of current orders","example":5},"orders_by_status":{"type":"object","description":"Orders grouped by status","properties":{"pending":{"type":"number","example":2},"confirmed":{"type":"number","example":1},"preparing":{"type":"number","example":2},"ready":{"type":"number","example":0},"out_for_delivery":{"type":"number","example":0}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - chef access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/dashboard/revenue-summary":{"post":{"summary":"Get Chef Revenue Summary","description":"Retrieve revenue summary and order statistics for the authenticated chef's dashboard. This endpoint provides financial insights including total revenue, order count, and performance metrics for chef business analytics.","tags":["Chef","Dashboard","Revenue"],"responses":{"200":{"description":"Revenue summary retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"total_revenue":{"type":"number","description":"Total revenue earned by the chef","example":12500.5},"order_count":{"type":"integer","description":"Total number of orders completed","example":245},"average_order_value":{"type":"number","nullable":true,"description":"Average value per order","example":51.02},"revenue_breakdown":{"type":"object","nullable":true,"description":"Revenue breakdown by period","properties":{"today":{"type":"number","example":125.5},"this_week":{"type":"number","example":850.25},"this_month":{"type":"number","example":3200.75},"this_year":{"type":"number","example":12500.5}}},"order_stats":{"type":"object","nullable":true,"description":"Order statistics","properties":{"completed":{"type":"integer","example":240},"cancelled":{"type":"integer","example":5},"pending":{"type":"integer","example":0},"completion_rate":{"type":"number","example":98}}},"top_dishes":{"type":"array","nullable":true,"description":"Top performing dishes","items":{"type":"object","properties":{"dish_id":{"type":"string","example":"j1234567890abcdef"},"dish_name":{"type":"string","example":"Spaghetti Carbonara"},"order_count":{"type":"integer","example":45},"revenue":{"type":"number","example":1125}}}},"trends":{"type":"object","nullable":true,"description":"Revenue trends","properties":{"weekly_growth":{"type":"number","example":12.5},"monthly_growth":{"type":"number","example":8.3},"peak_hours":{"type":"array","items":{"type":"string"},"example":["19:00","20:00","21:00"]}}},"generated_at":{"type":"string","format":"date-time","description":"Summary generation timestamp","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - chef role required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/chef/dashboard/emotion-summary":{"get":{"summary":"Get chef emotion summary","description":"Retrieve AI-powered emotion analysis summary of all reviews for the chef's meals","tags":["Chef - Dashboard"],"responses":{"200":{"description":"Emotion summary retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Emotion analysis data from AI engine"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - Missing or invalid token"},"403":{"description":"Forbidden - Chef access required"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/chef/me":{"get":{"summary":"Get Current Chef Profile","description":"Retrieve the authenticated chef's profile information including personal details, specialties, ratings, and business information. This endpoint is used by chefs to view their own profile data.","tags":["Chef","Profile"],"responses":{"200":{"description":"Chef profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chef":{"type":"object","properties":{"_id":{"type":"string","description":"Chef profile ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"Associated user ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Chef's display name","example":"Chef Maria Rodriguez"},"bio":{"type":"string","nullable":true,"description":"Chef's biography","example":"Passionate Italian chef with 15 years of experience"},"specialties":{"type":"array","items":{"type":"string"},"description":"Chef's cooking specialties","example":["Italian","Mediterranean","Pasta"]},"location":{"type":"string","nullable":true,"description":"Chef's location","example":"New York, NY"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.5},"reviewCount":{"type":"integer","nullable":true,"description":"Number of reviews","example":128},"image":{"type":"string","nullable":true,"description":"Chef profile image URL","example":"https://example.com/chef-maria.jpg"},"experienceYears":{"type":"integer","nullable":true,"description":"Years of cooking experience","example":15},"isVerified":{"type":"boolean","description":"Whether chef is verified","example":true},"isAvailable":{"type":"boolean","description":"Whether chef is currently available","example":true},"priceRange":{"type":"string","nullable":true,"description":"Chef's typical price range","example":"$20-40"},"languages":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Languages spoken by chef","example":["English","Spanish","Italian"]},"certifications":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Chef certifications","example":["Culinary Institute of America","Food Safety Certified"]},"cuisines":{"type":"array","items":{"type":"string"},"description":"Cuisines chef specializes in","example":["Italian","Mediterranean"]},"createdAt":{"type":"string","format":"date-time","description":"Profile creation date","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last profile update date","example":"2024-01-15T14:30:00.000Z"},"businessInfo":{"type":"object","nullable":true,"description":"Business information","properties":{"businessName":{"type":"string","example":"Maria's Kitchen"},"businessType":{"type":"string","example":"home_kitchen"},"licenseNumber":{"type":"string","nullable":true,"example":"NYC-FOOD-12345"},"taxId":{"type":"string","nullable":true,"example":"12-3456789"}}},"stats":{"type":"object","nullable":true,"description":"Chef statistics","properties":{"totalOrders":{"type":"integer","example":245},"totalRevenue":{"type":"number","example":12500.5},"averageOrderValue":{"type":"number","example":51.02},"completionRate":{"type":"number","example":98.5}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - chef role required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/cuisines":{"get":{"summary":"Get All Cuisines","description":"Retrieve all available cuisine types","tags":["Chef","Cuisines"],"responses":{"200":{"description":"Cuisines retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cuisines":{"type":"array","description":"Array of available cuisine types","items":{"type":"string"},"example":["italian","chinese","indian","mexican","thai","french","japanese","mediterranean"]}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/chef/cuisines/available":{"get":{"summary":"Get Available Cuisines","description":"Retrieve all approved cuisine types that are available for chefs to use","tags":["Chef","Cuisines"],"responses":{"200":{"description":"Available cuisines retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cuisines":{"type":"array","description":"Array of approved cuisine types","items":{"type":"string"},"example":["italian","chinese","indian","mexican","thai","french","japanese","mediterranean"]}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/chef/orders":{"get":{"summary":"Get Chef Orders","description":"Retrieve orders assigned to the authenticated chef","tags":["Chef","Orders"],"responses":{"200":{"description":"Chef orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orders":{"type":"array","description":"Array of orders assigned to the chef","items":{"type":"object","properties":{"_id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"order_id":{"type":"string","description":"Public order ID","example":"ORD-12345"},"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"order_status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","completed","cancelled"],"description":"Current order status","example":"preparing"},"payment_status":{"type":"string","enum":["pending","processing","completed","failed","refunded"],"description":"Payment status","example":"completed"},"total_amount":{"type":"number","description":"Total order amount","example":25.99},"delivery_address":{"type":"object","description":"Delivery address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"London"},"postcode":{"type":"string","example":"SW1A 1AA"},"country":{"type":"string","example":"UK"}}},"special_instructions":{"type":"string","nullable":true,"description":"Special delivery instructions","example":"Leave at front door"},"delivery_time":{"type":"string","nullable":true,"description":"Preferred delivery time","example":"2024-01-15T18:00:00.000Z"},"estimated_prep_time_minutes":{"type":"number","nullable":true,"description":"Estimated preparation time in minutes","example":30},"chef_notes":{"type":"string","nullable":true,"description":"Chef's notes about the order","example":"Extra spicy as requested"},"order_items":{"type":"array","description":"Items in the order","items":{"type":"object","properties":{"dishId":{"type":"string","example":"j1234567890abcdef"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":12.99}}}},"createdAt":{"type":"string","format":"date-time","description":"Order creation timestamp","example":"2024-01-15T17:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last update timestamp","example":"2024-01-15T17:30:00.000Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/orders/{order_id}/status":{"patch":{"summary":"Update Order Status","description":"Update the status of an order assigned to the authenticated chef","tags":["Chef","Orders","Order Management"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","completed","cancelled"],"description":"New order status","example":"preparing"}}}}}},"responses":{"200":{"description":"Order status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"order":{"type":"object","description":"Updated order information","properties":{"_id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"order_id":{"type":"string","description":"Public order ID","example":"ORD-12345"},"status":{"type":"string","description":"Updated order status","example":"preparing"},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"total_amount":{"type":"number","description":"Total order amount","example":25.99},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can update order status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found or not owned by chef","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/profile":{"get":{"summary":"Get Chef Profile","description":"Retrieve the current authenticated chef's profile information","tags":["Chef","Profile"],"responses":{"200":{"description":"Chef profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chef":{"type":"object","properties":{"_id":{"type":"string","description":"Chef profile ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"Associated user ID","example":"j1234567890abcdef"},"name":{"type":"string","example":"Chef Mario"},"bio":{"type":"string","example":"Passionate Italian chef with 15 years of experience"},"specialties":{"type":"array","items":{"type":"string"},"example":["italian","pasta","pizza"]},"location":{"type":"object","properties":{"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]},"address":{"type":"string","example":"123 Baker Street, London"}}},"image":{"type":"string","nullable":true,"example":"https://example.com/chef-image.jpg"},"rating":{"type":"number","example":4.8},"status":{"type":"string","example":"active"}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/chef/{profile_id}":{"get":{"summary":"Get chef profile","description":"Retrieve the profile details of a specific chef","tags":["Chef"],"parameters":[{"in":"path","name":"profile_id","required":true,"schema":{"type":"string"},"description":"ID of the chef profile"}],"responses":{"200":{"description":"Chef profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Chef profile data"},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing or invalid profile_id"},"404":{"description":"Chef not found"},"500":{"description":"Internal server error"}},"security":[]}},"/chef/documents":{"get":{"summary":"Get Chef Documents","description":"Retrieve all documents uploaded by the authenticated chef. This endpoint allows chefs to view their uploaded documents including certifications, licenses, and other required paperwork for verification and compliance purposes.","tags":["Chef","Documents"],"responses":{"200":{"description":"Chef documents retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"documents":{"type":"array","description":"Array of chef documents","items":{"type":"object","properties":{"_id":{"type":"string","description":"Document ID","example":"j1234567890abcdef"},"chef_id":{"type":"string","description":"Chef ID who uploaded the document","example":"j1234567890abcdef"},"fileName":{"type":"string","description":"Original file name","example":"food_safety_certificate.pdf"},"fileType":{"type":"string","description":"File type/category","example":"certification"},"fileSize":{"type":"integer","description":"File size in bytes","example":1024000},"contentType":{"type":"string","description":"MIME type","example":"application/pdf"},"status":{"type":"string","enum":["pending","approved","rejected","expired"],"description":"Document review status","example":"approved"},"uploadedAt":{"type":"string","format":"date-time","description":"Upload timestamp","example":"2024-01-15T10:00:00.000Z"},"reviewedAt":{"type":"string","format":"date-time","nullable":true,"description":"Review timestamp","example":"2024-01-15T14:30:00.000Z"},"reviewedBy":{"type":"string","nullable":true,"description":"ID of reviewer","example":"admin1234567890abcdef"},"reviewNotes":{"type":"string","nullable":true,"description":"Review notes from admin","example":"Document approved, valid until 2025-01-15"},"expiresAt":{"type":"string","format":"date-time","nullable":true,"description":"Document expiration date","example":"2025-01-15T00:00:00.000Z"},"downloadUrl":{"type":"string","nullable":true,"description":"Secure download URL","example":"https://storage.example.com/download/..."},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional document metadata","example":{"category":"food_safety","issuer":"NYC Health Department","certificateNumber":"FS-2024-001"}}}}},"summary":{"type":"object","description":"Document summary statistics","properties":{"totalDocuments":{"type":"integer","example":5},"approvedCount":{"type":"integer","example":4},"pendingCount":{"type":"integer","example":1},"rejectedCount":{"type":"integer","example":0},"expiredCount":{"type":"integer","example":0}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - chef role required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/documents/submit":{"post":{"summary":"Submit Documents for Review","description":"Submit uploaded documents for admin review and approval","tags":["Chef","Documents"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["document_ids"],"properties":{"document_ids":{"type":"array","items":{"type":"string"},"description":"Array of document IDs to submit for review","example":["j1234567890abcdef","j0987654321fedcba"]}}}}}},"responses":{"200":{"description":"Documents submitted for review successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Documents submitted for review"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - no document IDs provided","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can submit documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/documents/{document_id}":{"get":{"summary":"Get Chef Document","description":"Retrieve a specific document uploaded by the authenticated chef","tags":["Chef","Documents"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Document ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Document retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"document":{"type":"object","description":"Document information","properties":{"_id":{"type":"string","description":"Document ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Document name","example":"Food Safety Certificate"},"type":{"type":"string","description":"Document type","example":"food_safety_certificate"},"description":{"type":"string","description":"Document description","example":"Document uploaded by chef: Food Safety Certificate"},"userEmail":{"type":"string","description":"Chef's email","example":"chef@example.com"},"storageId":{"type":"string","description":"Storage ID for file access","example":"storage123456789"},"size":{"type":"string","description":"File size","example":"1024"},"status":{"type":"string","description":"Document status","example":"uploaded"},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:00:00.000Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing document_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Document not found or not owned by chef","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete Chef Document","description":"Delete a specific document uploaded by the authenticated chef","tags":["Chef","Documents"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Document ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Document deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing document_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can delete documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Document not found or not owned by chef","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/documents/{document_id}/download":{"get":{"summary":"Download Chef Document","description":"Get a presigned download URL for a specific document uploaded by the authenticated chef","tags":["Chef","Documents"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Document ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Presigned download URL generated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"url":{"type":"string","description":"Presigned download URL","example":"https://storage.example.com/download?signature=..."}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing document_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can download documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Document not found, not owned by chef, or presigned URL not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/documents/upload":{"post":{"summary":"Upload Chef Document","description":"Upload a document for chef verification or compliance","tags":["Chef","Documents"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","document_type","storageId"],"properties":{"name":{"type":"string","description":"Name of the document","example":"Food Safety Certificate"},"document_type":{"type":"string","description":"Type of document being uploaded","example":"food_safety_certificate"},"storageId":{"type":"string","description":"Storage ID from file upload","example":"storage123456789"}}}}}},"responses":{"200":{"description":"Document uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"document_id":{"type":"string","description":"ID of the uploaded document","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can upload documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/meals":{"get":{"summary":"Get Chef Meals","description":"Retrieve meals created by the authenticated chef","tags":["Chef","Meals"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":10},"description":"Number of meals to return","example":10},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of meals to skip","example":0}],"responses":{"200":{"description":"Chef meals retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"meals":{"type":"array","description":"Array of chef's meals","items":{"type":"object","properties":{"_id":{"type":"string","description":"Meal ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID who created the meal","example":"j1234567890abcdef"},"name":{"type":"string","description":"Meal name","example":"Authentic Italian Pasta"},"description":{"type":"string","description":"Meal description","example":"Handmade pasta with fresh ingredients"},"price":{"type":"number","description":"Meal price","example":15.99},"cuisine":{"type":"string","description":"Cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"List of ingredients","example":["pasta","tomatoes","basil","parmesan"]},"dietaryInfo":{"type":"object","description":"Dietary information","properties":{"vegetarian":{"type":"boolean","example":true},"vegan":{"type":"boolean","example":false},"glutenFree":{"type":"boolean","example":false},"allergens":{"type":"array","items":{"type":"string"},"example":["dairy"]}}},"prepTime":{"type":"number","description":"Preparation time in minutes","example":30},"servings":{"type":"number","description":"Number of servings","example":2},"image":{"type":"string","nullable":true,"description":"Meal image URL","example":"https://example.com/meal-image.jpg"},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Meal status","example":"active"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.5},"reviewCount":{"type":"number","description":"Number of reviews","example":25},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Create New Meal","description":"Create a new meal/dish for the authenticated chef","tags":["Chef","Meals"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","description","price","category"],"properties":{"name":{"type":"string","description":"Name of the meal","example":"Authentic Italian Pasta"},"description":{"type":"string","description":"Detailed description of the meal","example":"Handmade pasta with fresh ingredients and traditional Italian sauce"},"price":{"type":"number","description":"Price of the meal","example":15.99},"category":{"type":"string","description":"Meal category/cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"List of ingredients","example":["pasta","tomatoes","basil","parmesan"]},"allergens":{"type":"array","items":{"type":"string"},"description":"List of allergens","example":["gluten","dairy"]},"image":{"type":"string","description":"Image URL for the meal","example":"https://example.com/meal-image.jpg"},"preparationTime":{"type":"number","description":"Preparation time in minutes","example":30},"servings":{"type":"number","description":"Number of servings","example":2}}}}}},"responses":{"200":{"description":"Meal created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"mealId":{"type":"string","description":"ID of the created meal","example":"j1234567890abcdef"},"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can create meals","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/meals/{meal_id}":{"put":{"summary":"Update Meal","description":"Update a specific meal created by the authenticated chef","tags":["Chef","Meals"],"parameters":[{"in":"path","name":"meal_id","required":true,"schema":{"type":"string"},"description":"Meal ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Updated name of the meal","example":"Updated Italian Pasta"},"description":{"type":"string","description":"Updated description","example":"Updated description with new ingredients"},"price":{"type":"number","description":"Updated price","example":18.99},"category":{"type":"string","description":"Updated category/cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"Updated list of ingredients","example":["pasta","tomatoes","basil","parmesan"]},"allergens":{"type":"array","items":{"type":"string"},"description":"Updated list of allergens","example":["gluten","dairy"]},"image":{"type":"string","description":"Updated image URL","example":"https://example.com/updated-meal-image.jpg"},"preparationTime":{"type":"number","description":"Updated preparation time in minutes","example":35},"servings":{"type":"number","description":"Updated number of servings","example":3},"status":{"type":"string","enum":["active","inactive"],"description":"Updated status","example":"active"}}}}}},"responses":{"200":{"description":"Meal updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing or invalid meal_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can update meals or not the owner","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Meal not found or chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete Meal","description":"Delete a specific meal created by the authenticated chef","tags":["Chef","Meals"],"parameters":[{"in":"path","name":"meal_id","required":true,"schema":{"type":"string"},"description":"Meal ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Meal deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing or invalid meal_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can delete meals or not the owner","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Meal not found or chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/status":{"get":{"summary":"Get Chef Status","description":"Check the status of the authenticated chef's profile","tags":["Chef","Status"],"responses":{"200":{"description":"Chef status retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Empty object indicating chef profile exists","example":{}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chef/availability":{"get":{"summary":"Get Chef Availability","description":"Retrieve the current availability status and schedule for the authenticated chef","tags":["Chef","Availability"],"responses":{"200":{"description":"Chef availability retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"availability":{"type":"object","properties":{"_id":{"type":"string","description":"Availability record ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"isAvailable":{"type":"boolean","description":"Whether the chef is currently available for orders","example":true},"availableDays":{"type":"array","items":{"type":"string"},"description":"Days of the week when chef is available","example":["monday","tuesday","wednesday","thursday","friday"]},"availableHours":{"type":"object","description":"Available hours for each day","example":{"monday":{"start":"09:00","end":"21:00"},"tuesday":{"start":"09:00","end":"21:00"},"wednesday":{"start":"09:00","end":"21:00"}}},"maxOrdersPerDay":{"type":"number","description":"Maximum number of orders chef can accept per day","example":15},"advanceBookingDays":{"type":"number","description":"Number of days in advance orders can be booked","example":7},"specialInstructions":{"type":"string","nullable":true,"description":"Special instructions for availability","example":"Not available on weekends"},"currentOrdersToday":{"type":"number","description":"Number of orders already accepted today","example":5},"nextAvailableSlot":{"type":"string","format":"date-time","nullable":true,"description":"Next available time slot","example":"2024-01-15T14:00:00.000Z"},"createdAt":{"type":"string","format":"date-time","description":"Availability record creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/test-auth":{"get":{"summary":"Test Authentication Token","description":"Validates a JWT token and returns decoded payload information for testing purposes. This endpoint helps verify token structure, roles, and authentication status.","tags":["Authentication"],"parameters":[{"in":"header","name":"authorization","required":true,"schema":{"type":"string"},"description":"Bearer token for authentication","example":"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}],"responses":{"200":{"description":"Token validation successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"payload":{"type":"object","description":"Decoded JWT payload","properties":{"user_id":{"type":"string","example":"j1234567890abcdef"},"email":{"type":"string","example":"user@example.com"},"roles":{"type":"array","items":{"type":"string"},"example":["user","chef"]},"iat":{"type":"number","example":1640995200},"exp":{"type":"number","example":1641081600}}},"hasRoles":{"type":"boolean","description":"Whether the token contains roles","example":true},"rolesType":{"type":"string","description":"Type of roles field","example":"object"},"rolesLength":{"type":"string","description":"Length of roles array or type description","example":"2"},"hasChefRole":{"type":"boolean","description":"Whether user has chef role","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - missing, invalid, or expired token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/test/reset-rate-limits":{"post":{"summary":"Reset All Rate Limits","description":"Resets all rate limiting counters across all rate limiting systems.\nIn production, requires a secure 36-bit key for authorization.\n\n**Rate Limiters Reset:**\n- OTP Rate Limiter (15 min window)\n- Verification Rate Limiter (5 min window) \n- General Auth Rate Limiter (1 min window)\n- Sensitive Auth Rate Limiter (5 min window)\n- Sensitive Rate Limiter (1 min window)\n- Moderation Rate Limiter (1 min window)\n- API Rate Limiter (15 min window)\n- Middleware Auth Rate Limiter (15 min window)\n- Webhook Rate Limiter (1 min window)\n- Search Rate Limiter (1 min window)\n\n**Use Cases:**\n- API testing and development\n- Clearing rate limits during automated testing\n- Debugging rate limiting issues\n- Performance testing without rate limit interference\n- Production emergency rate limit reset (with key)\n","tags":["Testing","Rate Limiting"],"security":[],"requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"key":{"type":"string","description":"36-bit security key required in production","example":"a1b2c3d4-e5f6-7890-abcd-ef1234567890"}}}}}},"responses":{"200":{"description":"All rate limits successfully reset","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"All rate limits have been reset"},"timestamp":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"},"environment":{"type":"string","example":"production"},"resetLimiters":{"type":"array","items":{"type":"string"},"example":["otpRateLimiter","verificationRateLimiter","generalAuthRateLimiter","authRateLimiter (sensitive)","sensitiveRateLimiter","moderationRateLimiter","apiRateLimiter","authRateLimiter (middleware)","webhookRateLimiter","searchRateLimiter"]}}}}}},"400":{"description":"Invalid or missing security key","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid or missing security key"},"message":{"type":"string","example":"In production, a valid 36-bit security key is required"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to reset rate limits"},"details":{"type":"string","example":"Rate limiter reset failed"}}}}}}}}},"/customer/dishes/{dish_id}":{"get":{"summary":"Get Dish Details","description":"Get detailed information about a specific dish by ID","tags":["Customer"],"parameters":[{"in":"query","name":"dish_id","required":true,"schema":{"type":"string"},"description":"ID of the dish to retrieve","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Dish details retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"dish":{"type":"object","description":"Dish details","properties":{"_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Dish name","example":"Chicken Tikka Masala"},"description":{"type":"string","description":"Dish description","example":"Tender chicken in a rich, creamy tomato sauce with aromatic spices"},"price":{"type":"number","description":"Price of the dish","example":15.99},"cuisine":{"type":"array","description":"Cuisine types","items":{"type":"string"},"example":["Indian","Asian"]},"ingredients":{"type":"array","description":"List of ingredients","items":{"type":"string"},"example":["Chicken","Tomatoes","Cream","Spices"]},"allergens":{"type":"array","description":"Allergen information","items":{"type":"string"},"example":["Dairy","Nuts"]},"chef_id":{"type":"string","description":"Chef who created this dish","example":"j1234567890abcdef"},"image_url":{"type":"string","nullable":true,"description":"Dish image URL","example":"https://example.com/dish-image.jpg"},"preparation_time":{"type":"number","nullable":true,"description":"Preparation time in minutes","example":30},"is_available":{"type":"boolean","description":"Whether the dish is currently available","example":true},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.5},"total_orders":{"type":"number","description":"Total number of orders","example":150},"created_at":{"type":"number","description":"Creation timestamp","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing dish_id parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Dish not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/cart":{"get":{"summary":"Get Customer Cart","description":"Get the current customer's shopping cart items","tags":["Customer"],"responses":{"200":{"description":"Cart retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cart":{"type":"array","description":"Array of cart items","items":{"type":"object","properties":{"_id":{"type":"string","description":"Cart item ID","example":"j1234567890abcdef"},"dish_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"quantity":{"type":"number","description":"Quantity of the item","example":2},"price":{"type":"number","description":"Price per item","example":15.99},"total_price":{"type":"number","description":"Total price for this item","example":31.98},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"dish_name":{"type":"string","description":"Name of the dish","example":"Chicken Tikka Masala"},"chef_name":{"type":"string","description":"Name of the chef","example":"Chef John"},"added_at":{"type":"number","description":"Timestamp when item was added","example":1640995200000}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can access their cart","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/customer/cart/items":{"post":{"summary":"Add Item to Cart","description":"Add a dish item to the customer's shopping cart","tags":["Customer"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["dish_id","quantity"],"properties":{"dish_id":{"type":"string","description":"ID of the dish to add","example":"j1234567890abcdef"},"quantity":{"type":"number","minimum":1,"description":"Quantity of the dish","example":2}}}}}},"responses":{"200":{"description":"Item added to cart successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"item":{"type":"object","description":"Added cart item with details","properties":{"_id":{"type":"string","description":"Cart item ID","example":"j1234567890abcdef"},"dish_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"quantity":{"type":"number","example":2},"price":{"type":"number","description":"Price per item","example":15.99},"name":{"type":"string","description":"Dish name","example":"Chicken Tikka Masala"},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"added_at":{"type":"number","description":"Timestamp when item was added","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can add cart items","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/customer/cart/items/{cart_item_id}":{"put":{"summary":"Update Cart Item Quantity","description":"Update the quantity of a specific item in the customer's cart","tags":["Customer"],"parameters":[{"in":"path","name":"cart_item_id","required":true,"schema":{"type":"string"},"description":"ID of the cart item to update","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["quantity"],"properties":{"quantity":{"type":"number","minimum":1,"description":"New quantity for the cart item","example":3}}}}}},"responses":{"200":{"description":"Cart item updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"item":{"type":"object","description":"Updated cart item","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"dish_id":{"type":"string","example":"j1234567890abcdef"},"quantity":{"type":"number","example":3},"price":{"type":"number","example":15.99},"name":{"type":"string","example":"Chicken Tikka Masala"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing quantity","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can update cart items","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/customer/chefs/popular":{"get":{"summary":"Get Popular Chefs","description":"Get a list of popular chefs sorted by rating and review count","tags":["Customer"],"responses":{"200":{"description":"Popular chefs retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chefs":{"type":"array","description":"Array of popular chefs","items":{"type":"object","properties":{"first_name":{"type":"string","description":"Chef's first name","example":"John"},"last_name":{"type":"string","description":"Chef's last name","example":"Smith"},"profile_image":{"type":"string","nullable":true,"description":"Chef's profile image URL","example":"https://example.com/chef-avatar.jpg"},"latitude":{"type":"number","nullable":true,"description":"Chef's latitude coordinate","example":40.7128},"longitude":{"type":"number","nullable":true,"description":"Chef's longitude coordinate","example":-74.006},"address":{"type":"string","nullable":true,"description":"Chef's city","example":"New York"},"experience":{"type":"string","nullable":true,"description":"Chef's specialties","example":"Italian, Mediterranean, Seafood"},"profile_id":{"type":"string","description":"Chef profile ID","example":"j1234567890abcdef"},"user_id":{"type":"string","description":"Chef user ID","example":"j1234567890abcdef"},"is_approved":{"type":"boolean","description":"Whether chef is approved","example":true},"status":{"type":"string","description":"Chef status","example":"active"},"avg_rating":{"type":"number","description":"Average rating","example":4.5},"total_reviews":{"type":"number","description":"Total number of reviews","example":25},"total_orders":{"type":"number","description":"Total orders (currently 0)","example":0},"is_available":{"type":"boolean","description":"Whether chef is available","example":true},"created_at":{"type":"string","format":"date-time","description":"Profile creation date","example":"2024-01-15T10:30:00.000Z"},"updated_at":{"type":"string","format":"date-time","description":"Profile last update date","example":"2024-01-15T10:30:00.000Z"},"distance":{"type":"number","nullable":true,"description":"Distance from customer (if location provided)"},"relevance_score":{"type":"number","nullable":true,"description":"Relevance score for search"},"matched_cuisines":{"type":"array","nullable":true,"description":"Matched cuisines for search","items":{"type":"string"}},"profile_image_url":{"type":"string","nullable":true,"description":"Profile image URL","example":"https://example.com/chef-avatar.jpg"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/checkout":{"post":{"summary":"Create Payment Intent","description":"Create a Stripe payment intent for checkout with items from the customer's cart","tags":["Customer"],"responses":{"200":{"description":"Payment intent created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"paymentIntent":{"type":"object","properties":{"client_secret":{"type":"string","description":"Stripe client secret for payment confirmation","example":"pi_1234567890abcdef_secret_abcdef1234567890"},"amount":{"type":"number","description":"Total amount in GBP","example":31.98},"currency":{"type":"string","description":"Currency code","example":"gbp"},"id":{"type":"string","description":"Stripe payment intent ID","example":"pi_1234567890abcdef"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - cart is empty or invalid total","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can checkout","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or payment processing failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/customer/menus/chef/{chef_id}/menus":{"get":{"summary":"Get Chef Menu Items","description":"Retrieve all menu items/dishes from a specific chef","tags":["Customer","Menus","Chefs"],"parameters":[{"in":"path","name":"chef_id","required":true,"schema":{"type":"string"},"description":"Chef ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Chef menu items retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of menu items from the chef","items":{"type":"object","properties":{"_id":{"type":"string","description":"Menu item ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Menu item name","example":"Chicken Tikka Masala"},"description":{"type":"string","description":"Menu item description","example":"Tender chicken in creamy tomato sauce"},"price":{"type":"number","description":"Menu item price","example":15.99},"cuisine":{"type":"string","description":"Cuisine type","example":"indian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"List of ingredients","example":["chicken","tomato","cream","spices"]},"dietaryInfo":{"type":"object","description":"Dietary information","properties":{"vegetarian":{"type":"boolean","example":false},"vegan":{"type":"boolean","example":false},"glutenFree":{"type":"boolean","example":true},"allergens":{"type":"array","items":{"type":"string"},"example":["dairy"]}}},"prepTime":{"type":"number","description":"Preparation time in minutes","example":30},"servings":{"type":"number","description":"Number of servings","example":2},"image":{"type":"string","nullable":true,"description":"Menu item image URL","example":"https://example.com/dish-image.jpg"},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Menu item status","example":"active"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.5},"reviewCount":{"type":"number","description":"Number of reviews","example":12},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:00:00.000Z"}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing or invalid chef_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/cuisines":{"get":{"summary":"Get Available Cuisines","description":"Get a list of all available cuisines from the meals database","tags":["Customer"],"responses":{"200":{"description":"Cuisines retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cuisines":{"type":"array","description":"Array of available cuisines","items":{"type":"string"},"example":["Italian","Indian","Chinese","Mexican","Mediterranean"]}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/cuisines/top":{"get":{"summary":"Get Top Cuisines","description":"Retrieve the most popular cuisines based on meal orders and user preferences. This endpoint provides insights into trending cuisines and helps customers discover popular food categories.","tags":["Customer","Cuisines","Analytics"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":10},"description":"Maximum number of top cuisines to return","example":10},{"in":"query","name":"time_range","schema":{"type":"string","enum":["day","week","month","year","all"],"default":"month"},"description":"Time range for popularity calculation","example":"month"},{"in":"query","name":"location","schema":{"type":"string"},"description":"Location filter for regional cuisine popularity","example":"New York, NY"}],"responses":{"200":{"description":"Top cuisines retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"top_cuisines":{"type":"array","description":"Array of top cuisines with popularity data","items":{"type":"object","properties":{"cuisine":{"type":"string","description":"Cuisine name","example":"Italian"},"count":{"type":"integer","description":"Number of meals/orders for this cuisine","example":245},"popularity_score":{"type":"number","minimum":0,"maximum":100,"description":"Calculated popularity score","example":85.5},"trend_direction":{"type":"string","enum":["up","down","stable"],"description":"Trend direction compared to previous period","example":"up"},"growth_percentage":{"type":"number","nullable":true,"description":"Growth percentage from previous period","example":12.5},"average_rating":{"type":"number","nullable":true,"description":"Average rating for this cuisine","example":4.3},"total_reviews":{"type":"integer","nullable":true,"description":"Total number of reviews for this cuisine","example":1250},"top_dishes":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Most popular dishes in this cuisine","example":["Pasta Carbonara","Margherita Pizza","Tiramisu"]},"chef_count":{"type":"integer","nullable":true,"description":"Number of chefs specializing in this cuisine","example":25},"price_range":{"type":"object","nullable":true,"description":"Typical price range for this cuisine","properties":{"min":{"type":"number","example":12.99},"max":{"type":"number","example":35.99},"average":{"type":"number","example":22.5}}}}}},"metadata":{"type":"object","properties":{"time_range":{"type":"string","description":"Time range used for calculation","example":"month"},"location":{"type":"string","nullable":true,"description":"Location filter applied","example":"New York, NY"},"total_cuisines":{"type":"integer","description":"Total number of cuisines analyzed","example":45},"generated_at":{"type":"string","format":"date-time","description":"Timestamp when data was generated","example":"2024-01-15T14:30:00Z"},"data_source":{"type":"string","description":"Source of the popularity data","example":"meal_orders"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/orders":{"get":{"summary":"Get Customer Orders","description":"Get paginated list of orders for the current customer","tags":["Customer"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of orders to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of orders to skip","example":0}],"responses":{"200":{"description":"Orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orders":{"type":"array","description":"Array of customer orders","items":{"type":"object","properties":{"_id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"order_items":{"type":"array","description":"Items in the order","items":{"type":"object","properties":{"dish_id":{"type":"string","example":"j1234567890abcdef"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":15.99},"name":{"type":"string","example":"Chicken Tikka Masala"}}}},"total_amount":{"type":"number","description":"Total order amount","example":31.98},"status":{"type":"string","description":"Order status","example":"pending"},"payment_method":{"type":"string","description":"Payment method used","example":"card"},"special_instructions":{"type":"string","nullable":true,"description":"Special instructions for the order","example":"Extra spicy"},"delivery_time":{"type":"string","nullable":true,"description":"Requested delivery time","example":"2024-01-15T18:00:00.000Z"},"createdAt":{"type":"number","description":"Order creation timestamp","example":1640995200000}}}},"total":{"type":"number","description":"Total number of orders","example":25},"limit":{"type":"number","description":"Number of orders returned","example":20},"offset":{"type":"number","description":"Number of orders skipped","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can access their orders","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/customer/orders/{order_id}":{"get":{"summary":"Get Order Details","description":"Get detailed information about a specific order","tags":["Customer"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"ID of the order to retrieve","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Order details retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Order details in standardized format","properties":{"id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"customerId":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"orderDate":{"type":"string","format":"date-time","description":"Order creation date","example":"2024-01-15T10:30:00.000Z"},"totalAmount":{"type":"number","description":"Total order amount","example":31.98},"orderStatus":{"type":"string","description":"Current order status","enum":["pending","confirmed","preparing","ready","delivered","cancelled"],"example":"preparing"},"specialInstructions":{"type":"string","nullable":true,"description":"Special instructions for the order","example":"Extra spicy, no onions"},"estimatedPrepTimeMinutes":{"type":"number","nullable":true,"description":"Estimated preparation time in minutes","example":30},"chefNotes":{"type":"string","nullable":true,"description":"Notes from the chef","example":"Order will be ready in 25 minutes"},"paymentStatus":{"type":"string","description":"Payment status","enum":["pending","paid","failed","refunded"],"example":"paid"},"orderItems":{"type":"array","description":"Items in the order","items":{"type":"object","properties":{"dish_id":{"type":"string","example":"j1234567890abcdef"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":15.99},"name":{"type":"string","example":"Chicken Tikka Masala"}}}}}},"message":{"type":"string","example":"Order retrieved successfully"}}}}}},"400":{"description":"Validation error - missing order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can access their orders","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found or not owned by customer","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/customer/orders/{order_id}/status":{"get":{"summary":"Get Order Status","description":"Get the current status of a specific order","tags":["Customer"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"ID of the order to check status","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Order status retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"order":{"type":"object","description":"Order details with status","properties":{"_id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"order_status":{"type":"string","description":"Current order status","enum":["pending","confirmed","preparing","ready","delivered","cancelled"],"example":"preparing"},"payment_status":{"type":"string","description":"Payment status","enum":["pending","paid","failed","refunded"],"example":"paid"},"total_amount":{"type":"number","description":"Total order amount","example":31.98},"order_items":{"type":"array","description":"Items in the order","items":{"type":"object"}},"special_instructions":{"type":"string","nullable":true,"description":"Special instructions","example":"Extra spicy"},"estimated_prep_time_minutes":{"type":"number","nullable":true,"description":"Estimated preparation time","example":30},"chef_notes":{"type":"string","nullable":true,"description":"Notes from the chef","example":"Order will be ready in 25 minutes"},"createdAt":{"type":"number","description":"Order creation timestamp","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/search":{"post":{"summary":"Search with Emotions Engine","description":"Search for chefs, dishes, or cuisines using the emotions engine for personalized results","tags":["Customer"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"query":{"type":"string","description":"Search query","example":"Italian pasta"},"location":{"type":"object","properties":{"latitude":{"type":"number","example":40.7128},"longitude":{"type":"number","example":-74.006}}},"preferences":{"type":"object","description":"User preferences for personalized search"},"filters":{"type":"object","description":"Search filters"}}}}}},"responses":{"200":{"description":"Search completed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Success"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/search/chefs":{"get":{"summary":"Search Chefs","description":"Search for chefs by name or specialties. This endpoint allows customers to find chefs based on their cooking specialties, cuisine expertise, and name matching for personalized chef discovery.","tags":["Customer","Search","Chefs"],"parameters":[{"in":"query","name":"q","required":true,"schema":{"type":"string","minLength":1,"maxLength":100},"description":"Search query for chef name or specialties","example":"Italian pasta"},{"in":"query","name":"location","schema":{"type":"string"},"description":"Location filter for chef search","example":"New York, NY"},{"in":"query","name":"cuisine","schema":{"type":"string"},"description":"Filter chefs by specific cuisine","example":"Italian"},{"in":"query","name":"rating_min","schema":{"type":"number","minimum":0,"maximum":5},"description":"Minimum rating filter","example":4},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":20},"description":"Maximum number of chefs to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of chefs to skip for pagination","example":0}],"responses":{"200":{"description":"Chef search results retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chefs":{"type":"array","description":"Array of matching chefs","items":{"type":"object","properties":{"_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Chef name","example":"Chef Maria Rodriguez"},"bio":{"type":"string","nullable":true,"description":"Chef biography","example":"Passionate Italian chef with 15 years of experience"},"specialties":{"type":"array","items":{"type":"string"},"description":"Chef cooking specialties","example":["Italian","Mediterranean","Pasta"]},"location":{"type":"string","nullable":true,"description":"Chef location","example":"New York, NY"},"rating":{"type":"number","nullable":true,"description":"Average chef rating","example":4.5},"review_count":{"type":"integer","nullable":true,"description":"Number of reviews","example":128},"image":{"type":"string","nullable":true,"description":"Chef profile image URL","example":"https://example.com/chef-maria.jpg"},"experience_years":{"type":"integer","nullable":true,"description":"Years of cooking experience","example":15},"is_verified":{"type":"boolean","description":"Whether chef is verified","example":true},"is_available":{"type":"boolean","description":"Whether chef is currently available","example":true},"price_range":{"type":"string","nullable":true,"description":"Chef's typical price range","example":"$20-40"},"languages":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Languages spoken by chef","example":["English","Spanish","Italian"]},"certifications":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Chef certifications","example":["Culinary Institute of America","Food Safety Certified"]},"cuisines":{"type":"array","items":{"type":"string"},"description":"Cuisines chef specializes in","example":["Italian","Mediterranean"]},"created_at":{"type":"string","format":"date-time","description":"Chef profile creation date","example":"2024-01-15T10:00:00.000Z"}}}},"metadata":{"type":"object","properties":{"query":{"type":"string","description":"Original search query","example":"Italian pasta"},"total_results":{"type":"integer","description":"Total number of matching chefs","example":25},"limit":{"type":"integer","description":"Maximum results per page","example":20},"offset":{"type":"integer","description":"Number of results skipped","example":0},"has_more":{"type":"boolean","description":"Whether there are more results available","example":true},"search_time_ms":{"type":"integer","description":"Search execution time in milliseconds","example":45}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing or invalid query parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/search/suggestions":{"get":{"summary":"Get Search Suggestions","description":"Retrieve intelligent search suggestions based on user input, popular queries, and personalized recommendations. This endpoint provides autocomplete suggestions and related search terms using the emotions engine for enhanced user experience.","tags":["Customer","Search","Suggestions"],"parameters":[{"in":"query","name":"q","required":true,"schema":{"type":"string","minLength":1,"maxLength":100},"description":"Partial search query to get suggestions for","example":"chicken"},{"in":"query","name":"location","schema":{"type":"string"},"description":"User location for location-based suggestions","example":"New York, NY"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":20,"default":10},"description":"Maximum number of suggestions to return","example":10},{"in":"query","name":"category","schema":{"type":"string","enum":["all","dishes","chefs","cuisines","restaurants"]},"description":"Category filter for suggestions","example":"dishes"},{"in":"query","name":"user_id","schema":{"type":"string"},"description":"User ID for personalized suggestions","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Search suggestions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"suggestions":{"type":"array","description":"Array of search suggestions","items":{"type":"object","properties":{"text":{"type":"string","description":"Suggestion text","example":"chicken tikka masala"},"type":{"type":"string","enum":["dish","chef","cuisine","restaurant","ingredient"],"description":"Type of suggestion","example":"dish"},"confidence":{"type":"number","minimum":0,"maximum":1,"description":"Confidence score for the suggestion","example":0.95},"popularity_score":{"type":"number","minimum":0,"maximum":100,"description":"Popularity score based on search frequency","example":78.5},"category":{"type":"string","nullable":true,"description":"Category of the suggestion","example":"Indian"},"image_url":{"type":"string","nullable":true,"description":"Image URL for the suggestion","example":"https://example.com/chicken-tikka.jpg"},"chef_name":{"type":"string","nullable":true,"description":"Chef name (for dish suggestions)","example":"Chef Maria"},"price_range":{"type":"string","nullable":true,"description":"Price range (for dish suggestions)","example":"$15-25"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.5},"is_trending":{"type":"boolean","description":"Whether this suggestion is currently trending","example":true},"search_count":{"type":"integer","nullable":true,"description":"Number of times this has been searched","example":1250}}}},"metadata":{"type":"object","properties":{"query":{"type":"string","description":"Original query that generated suggestions","example":"chicken"},"total_suggestions":{"type":"integer","description":"Total number of suggestions found","example":15},"personalized":{"type":"boolean","description":"Whether suggestions are personalized","example":true},"generated_at":{"type":"string","format":"date-time","description":"Timestamp when suggestions were generated","example":"2024-01-15T14:30:00Z"},"cache_duration":{"type":"integer","description":"Cache duration in seconds","example":300}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing or invalid query parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - emotions engine failure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/search/trending":{"get":{"summary":"Get Trending Search Results","description":"Retrieve trending search results based on popular queries, user behavior, and current food trends. This endpoint provides personalized trending content using the emotions engine to surface popular dishes, chefs, and cuisines.","tags":["Customer","Search","Trending"],"parameters":[{"in":"query","name":"location","schema":{"type":"string"},"description":"User location for location-based trending results","example":"New York, NY"},{"in":"query","name":"cuisine","schema":{"type":"string"},"description":"Filter trending results by specific cuisine","example":"Italian"},{"in":"query","name":"time_range","schema":{"type":"string","enum":["hour","day","week","month"]},"description":"Time range for trending analysis","example":"day"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":50,"default":10},"description":"Maximum number of trending results to return","example":10},{"in":"query","name":"category","schema":{"type":"string","enum":["dishes","chefs","cuisines","restaurants"]},"description":"Category of trending content","example":"dishes"}],"responses":{"200":{"description":"Trending search results retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"trending":{"type":"array","description":"Array of trending items","items":{"type":"object","properties":{"id":{"type":"string","description":"Item ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Item name","example":"Chicken Tikka Masala"},"type":{"type":"string","enum":["dish","chef","cuisine","restaurant"],"description":"Type of trending item","example":"dish"},"popularity_score":{"type":"number","description":"Popularity score (0-100)","example":85.5},"trend_direction":{"type":"string","enum":["up","down","stable"],"description":"Trend direction","example":"up"},"search_count":{"type":"integer","description":"Number of searches in time period","example":245},"image_url":{"type":"string","nullable":true,"description":"Item image URL","example":"https://example.com/dish-image.jpg"},"chef_name":{"type":"string","nullable":true,"description":"Chef name (for dishes)","example":"Chef Maria"},"cuisine":{"type":"string","nullable":true,"description":"Cuisine type","example":"Indian"},"price_range":{"type":"string","nullable":true,"description":"Price range","example":"$15-25"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.5},"review_count":{"type":"integer","nullable":true,"description":"Number of reviews","example":128}}}},"metadata":{"type":"object","properties":{"time_range":{"type":"string","description":"Time range used for trending analysis","example":"day"},"location":{"type":"string","nullable":true,"description":"Location used for filtering","example":"New York, NY"},"total_items":{"type":"integer","description":"Total number of trending items found","example":25},"generated_at":{"type":"string","format":"date-time","description":"Timestamp when trending data was generated","example":"2024-01-15T14:30:00Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - emotions engine failure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/customer/profile/me":{"get":{"summary":"Get Customer Profile","description":"Get the current customer's profile information","tags":["Customer"],"responses":{"200":{"description":"Customer profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"user":{"type":"object","description":"Customer profile (excluding sensitive fields)","properties":{"_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"customer@example.com"},"name":{"type":"string","example":"John Doe"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]},"_creationTime":{"type":"number","description":"Account creation timestamp","example":1640995200000},"avatar":{"type":"string","nullable":true,"description":"Profile picture URL","example":"https://example.com/avatar.jpg"},"phone":{"type":"string","nullable":true,"description":"Phone number","example":"+1234567890"},"preferences":{"type":"object","nullable":true,"description":"Customer preferences"}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/auth/token":{"get":{"summary":"Get Session Token","description":"Retrieve the current session token from cookies","tags":["Authentication"],"responses":{"200":{"description":"Session token retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"sessionToken":{"type":"string","nullable":true,"description":"Current session token or null if not authenticated","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/token/refresh":{"post":{"summary":"Refresh Access Token","description":"Generate a new access token using a valid refresh token","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["refresh_token"],"properties":{"refresh_token":{"type":"string","description":"Valid refresh token","example":"a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6"}}}}}},"responses":{"200":{"description":"Token refreshed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"access_token":{"type":"string","description":"New access token","example":"b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7"},"expires_at":{"type":"string","format":"date-time","description":"Token expiration timestamp","example":"2024-01-22T10:30:00.000Z"},"token_type":{"type":"string","description":"Token type","example":"bearer"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or expired refresh token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/login":{"post":{"summary":"User Login","description":"Authenticate user with email and password, returns JWT token","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","description":"User's email address","example":"user@example.com"},"password":{"type":"string","description":"User's password","example":"securePassword123"}}}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"token":{"type":"string","description":"JWT authentication token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"type":"object","properties":{"user_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"user@example.com"},"name":{"type":"string","example":"John Doe"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/check-integration":{"get":{"summary":"Check Integration Status","description":"Verify which third-party authentication integrations are properly configured and available. Returns the status of various OAuth providers and authentication services.","tags":["Authentication"],"responses":{"200":{"description":"Integration status retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"integrations":{"type":"object","description":"Status of available authentication integrations","properties":{"logto":{"type":"boolean","description":"Logto authentication service status","example":true},"google":{"type":"boolean","description":"Google OAuth integration status","example":true},"facebook":{"type":"boolean","description":"Facebook OAuth integration status","example":false},"github":{"type":"boolean","description":"GitHub OAuth integration status","example":true}}}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/email-otp":{"post":{"summary":"Email OTP Authentication","description":"Send or verify OTP code via email for authentication","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","action"],"properties":{"email":{"type":"string","format":"email","description":"User's email address","example":"user@example.com"},"action":{"type":"string","enum":["send","verify"],"description":"Action to perform","example":"send"},"otp":{"type":"string","description":"OTP code (required for verify action)","example":"123456"}}}}}},"responses":{"200":{"description":"OTP operation successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Verification code sent to your email"},"testOtp":{"type":"string","description":"Test OTP (development only)","example":"123456"},"token":{"type":"string","description":"JWT token (for verify action)","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"type":"object","description":"User information (for verify action)","properties":{"user_id":{"type":"string","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"user@example.com"},"name":{"type":"string","example":"user"},"roles":{"type":"array","items":{"type":"string"},"example":["user"]},"isNewUser":{"type":"boolean","example":true}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/me":{"get":{"summary":"Get Current User","description":"Get the current authenticated user's profile information","tags":["Authentication"],"responses":{"200":{"description":"User profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"user":{"type":"object","description":"User profile (excluding sensitive fields)","properties":{"_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"user@example.com"},"name":{"type":"string","example":"John Doe"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]},"_creationTime":{"type":"number","description":"Account creation timestamp","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]},{"cookieAuth":[]}]}},"/auth/apple-signin":{"post":{"summary":"Apple OAuth Sign-in","description":"Authenticate user using Apple Sign-In (identity token or authorization code)","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"identityToken":{"type":"string","description":"Apple identity token (preferred method)","example":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."},"authorizationCode":{"type":"string","description":"Apple authorization code (alternative method)","example":"c1234567890abcdef..."},"user":{"type":"object","description":"User data from Apple (optional, for authorization code flow)","properties":{"email":{"type":"string","format":"email","example":"user@privaterelay.appleid.com"},"sub":{"type":"string","example":"001234.abcdef1234567890abcdef1234567890.1234"},"name":{"type":"string","example":"John Doe"}}}}}}}},"responses":{"200":{"description":"Apple authentication successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Authentication successful"},"token":{"type":"string","description":"JWT authentication token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"type":"object","properties":{"user_id":{"type":"string","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"user@privaterelay.appleid.com"},"name":{"type":"string","example":"Apple User 1234"},"roles":{"type":"array","items":{"type":"string"},"example":["user"]},"picture":{"type":"string","nullable":true,"description":"Apple doesn't provide profile pictures"},"isNewUser":{"type":"boolean","example":false},"provider":{"type":"string","example":"apple"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Invalid Apple token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/logout":{"post":{"summary":"User Logout","description":"Logout user by invalidating session token and clearing cookies","tags":["Authentication"],"responses":{"200":{"description":"Logout successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","example":"Logged out successfully."}}},"message":{"type":"string","example":"Success"}}}}},"headers":{"Set-Cookie":{"description":"Cleared authentication cookie","schema":{"type":"string","example":"convex-auth-token=; Path=/; Max-Age=0"}}}},"401":{"description":"Unauthorized - no session token or invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/auth/phone-signin":{"post":{"summary":"Phone Number Authentication","description":"Send or verify OTP code via SMS for phone number authentication","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phone","action"],"properties":{"phone":{"type":"string","description":"User's phone number","example":"+1234567890"},"action":{"type":"string","enum":["send","verify"],"description":"Action to perform","example":"send"},"otp":{"type":"string","description":"OTP code (required for verify action)","example":"123456"}}}}}},"responses":{"200":{"description":"Phone authentication successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"OTP sent successfully"},"testOtp":{"type":"string","description":"Test OTP (development only)","example":"123456"},"token":{"type":"string","description":"JWT token (for verify action)","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"type":"object","description":"User information (for verify action)","properties":{"user_id":{"type":"string","example":"j1234567890abcdef"},"phone":{"type":"string","example":"+1234567890"},"name":{"type":"string","example":"User_7890"},"roles":{"type":"array","items":{"type":"string"},"example":["user"]},"isNewUser":{"type":"boolean","example":true}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/register":{"post":{"summary":"User Registration","description":"Register a new user with email and password","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","password"],"properties":{"name":{"type":"string","description":"User's full name","example":"John Doe"},"email":{"type":"string","format":"email","description":"User's email address","example":"john@example.com"},"password":{"type":"string","minLength":8,"description":"User's password (minimum 8 characters)","example":"securePassword123"},"role":{"type":"string","description":"User role (defaults to 'customer')","enum":["customer","chef","admin"],"example":"customer"}}}}}},"responses":{"200":{"description":"Registration successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"userId":{"type":"string","description":"Created user ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"john@example.com"},"name":{"type":"string","example":"John Doe"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"User already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/register/chef":{"post":{"summary":"Register Chef Account","description":"Create a new chef account with profile information and credentials","tags":["Authentication","Chef"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","password","bio","specialties","location"],"properties":{"name":{"type":"string","description":"Chef's full name","example":"Maria Rodriguez"},"email":{"type":"string","format":"email","description":"Chef's email address","example":"maria.rodriguez@example.com"},"password":{"type":"string","minLength":6,"description":"Chef's password (minimum 6 characters)","example":"securePassword123"},"bio":{"type":"string","description":"Chef's biography and background","example":"Passionate chef with 10 years of experience in Italian cuisine"},"specialties":{"type":"string","description":"Chef's culinary specialties","example":"Italian, Mediterranean, Vegetarian"},"location":{"type":"string","description":"Chef's location/city","example":"London, UK"},"rating":{"type":"number","minimum":0,"maximum":5,"description":"Initial chef rating","example":4.5},"image":{"type":"string","description":"Chef's profile image URL","example":"https://example.com/chef-image.jpg"}}}}}},"responses":{"200":{"description":"Chef registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"userId":{"type":"string","description":"Created user ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Created chef profile ID","example":"j0987654321fedcba"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid JSON or missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - user with email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/register/customer":{"post":{"summary":"Register Customer Account","description":"Create a new customer account with user credentials","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","password"],"properties":{"name":{"type":"string","description":"Customer's full name","example":"John Doe"},"email":{"type":"string","format":"email","description":"Customer's email address","example":"john.doe@example.com"},"phone_number":{"type":"string","description":"Customer's phone number","example":"+1234567890"},"password":{"type":"string","minLength":6,"description":"Customer's password (minimum 6 characters)","example":"securePassword123"},"role":{"type":"string","enum":["customer"],"description":"User role (must be 'customer')","example":"customer"}}}}}},"responses":{"200":{"description":"Customer registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"user":{"type":"object","properties":{"_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"name":{"type":"string","example":"John Doe"},"email":{"type":"string","example":"john.doe@example.com"},"roles":{"type":"array","items":{"type":"string"},"example":["user"]},"status":{"type":"string","example":"active"},"_creationTime":{"type":"number","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid JSON or missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - user with email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/register/admin":{"post":{"summary":"Register Admin Account","description":"Create a new administrator account with elevated privileges. This endpoint creates a user with admin role and full system access permissions.","tags":["Authentication","Admin"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","password"],"properties":{"name":{"type":"string","description":"Administrator's full name","example":"Admin User"},"email":{"type":"string","format":"email","description":"Administrator's email address","example":"admin@cribnosh.com"},"password":{"type":"string","minLength":6,"description":"Administrator's password (minimum 6 characters)","example":"adminPassword123"}}}}}},"responses":{"200":{"description":"Admin registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"user":{"type":"object","properties":{"_id":{"type":"string","description":"Admin user ID","example":"j1234567890abcdef"},"name":{"type":"string","example":"Admin User"},"email":{"type":"string","example":"admin@cribnosh.com"},"roles":{"type":"array","items":{"type":"string"},"example":["admin"]},"status":{"type":"string","example":"active"},"_creationTime":{"type":"number","description":"Account creation timestamp","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid JSON or missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - user with email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/auth/google-signin":{"post":{"summary":"Google OAuth Sign-in","description":"Authenticate user using Google OAuth (ID token or access token)","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"idToken":{"type":"string","description":"Google ID token (preferred method)","example":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9..."},"accessToken":{"type":"string","description":"Google access token (alternative method)","example":"ya29.a0AfH6SMC..."}}}}}},"responses":{"200":{"description":"Google authentication successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Authentication successful"},"token":{"type":"string","description":"JWT authentication token","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"type":"object","properties":{"user_id":{"type":"string","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"user@gmail.com"},"name":{"type":"string","example":"John Doe"},"roles":{"type":"array","items":{"type":"string"},"example":["user"]},"picture":{"type":"string","description":"Google profile picture URL","example":"https://lh3.googleusercontent.com/..."},"isNewUser":{"type":"boolean","example":false},"provider":{"type":"string","example":"google"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Invalid Google token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/health":{"get":{"summary":"Health check endpoint","description":"Check the health status of all services and systems","tags":["System"],"responses":{"200":{"description":"Health check completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time","description":"Timestamp of the health check","example":"2024-01-15T10:30:00.000Z"},"status":{"type":"string","enum":["healthy","degraded","unhealthy"],"description":"Overall system health status","example":"healthy"},"version":{"type":"string","description":"Application version","example":"1.0.0"},"environment":{"type":"string","description":"Environment name","example":"production"},"services":{"type":"object","description":"Health status of individual services","properties":{"email":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","unhealthy","unknown"]},"details":{"type":"string"}}},"notion":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","unhealthy","unknown"]},"details":{"type":"string"}}},"monitoring":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","unhealthy","unknown"]},"details":{"type":"string"}}},"convex":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","unhealthy","unknown"]},"details":{"type":"string"}}}}},"api":{"type":"object","properties":{"status":{"type":"string","enum":["healthy","unhealthy","unknown"]},"metrics":{"type":"object","nullable":true},"uptime":{"type":"number"},"errorRate":{"type":"number"}}},"system":{"type":"object","properties":{"memory":{"type":"object","description":"Node.js memory usage"},"uptime":{"type":"number","description":"Process uptime in seconds"},"nodeVersion":{"type":"string","description":"Node.js version"}}}}}}}},"503":{"description":"Service unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/api/health/fast":{},"/stripe/webhook":{"post":{"summary":"Stripe Webhook Handler","description":"Handle Stripe webhook events for payment processing, refunds, and subscriptions","tags":["Payments","Webhooks"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","description":"Stripe webhook event payload","properties":{"id":{"type":"string","description":"Event ID","example":"evt_1234567890abcdef"},"object":{"type":"string","description":"Event object type","example":"event"},"type":{"type":"string","description":"Event type","enum":["payment_intent.succeeded","payment_intent.payment_failed","charge.refunded","customer.subscription.created","customer.subscription.deleted","charge.dispute.created"],"example":"payment_intent.succeeded"},"data":{"type":"object","description":"Event data object"},"created":{"type":"number","description":"Event creation timestamp","example":1640995200}}}}}},"responses":{"200":{"description":"Webhook processed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"received":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Webhook signature verification failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Stripe configuration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[],"x-webhook":{"description":"This endpoint handles Stripe webhook events:\n\n**Supported Events:**\n- `payment_intent.succeeded`: Marks orders as paid\n- `payment_intent.payment_failed`: Notifies admins of failed payments\n- `charge.refunded`: Marks orders as refunded\n- `customer.subscription.created`: Updates user subscription status\n- `customer.subscription.deleted`: Cancels user subscription\n- `charge.dispute.created`: Notifies admins of payment disputes\n\n**Webhook Security:**\n- Requires valid Stripe signature header\n- Verifies webhook secret for authenticity\n- Processes events asynchronously\n"}}},"/email":{"post":{"summary":"Send Email Optimistically","description":"Send email using optimistic delivery with fallback handling","tags":["Email"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["to","subject","html"],"properties":{"to":{"type":"string","description":"Recipient email address","example":"user@example.com"},"subject":{"type":"string","description":"Email subject line","example":"Welcome to CribNosh!"},"html":{"type":"string","description":"HTML content of the email","example":"<h1>Welcome!</h1><p>Thank you for joining CribNosh.</p>"},"text":{"type":"string","nullable":true,"description":"Plain text version of the email","example":"Welcome! Thank you for joining CribNosh."},"from":{"type":"string","nullable":true,"description":"Sender email address","example":"noreply@cribnosh.com"},"replyTo":{"type":"string","nullable":true,"description":"Reply-to email address","example":"support@cribnosh.com"},"tags":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string","example":"template_id"},"value":{"type":"string","example":"welcome_email"}}},"nullable":true,"description":"Email tags for tracking and categorization"},"attachments":{"type":"array","items":{"type":"object","properties":{"filename":{"type":"string","example":"menu.pdf"},"content":{"type":"string","format":"base64","example":"JVBERi0xLjQKJcOkw7zDtsO..."}}},"nullable":true,"description":"Email attachments"},"metadata":{"type":"object","nullable":true,"description":"Additional email metadata","example":{"userId":"j1234567890abcdef","orderId":"j1234567890abcdef"}}}}}}},"responses":{"202":{"description":"Email queued for sending successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"operationId":{"type":"string","description":"Unique operation ID for tracking","example":"op_1234567890abcdef"},"status":{"type":"string","enum":["queued","sending","sent","failed"],"description":"Current email status","example":"queued"},"estimatedDelivery":{"type":"string","format":"date-time","description":"Estimated delivery time","example":"2024-01-15T10:30:00.000Z"}}},"message":{"type":"string","example":"Email queued successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or email service unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/live-streaming/chef":{"get":{"summary":"Get Chef Live Streaming Status","description":"Retrieve the current live streaming status and data for the authenticated chef","tags":["Live Streaming","Chef"],"responses":{"200":{"description":"Chef live streaming data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Chef live streaming retrieved successfully"},"data":{"type":"object","properties":{"isLive":{"type":"boolean","description":"Whether the chef is currently streaming live","example":false},"viewers":{"type":"number","description":"Current number of viewers","example":0},"orders":{"type":"array","description":"Array of orders placed during live session","items":{"type":"object","properties":{"orderId":{"type":"string","example":"order_123"},"customerName":{"type":"string","example":"John Doe"},"totalAmount":{"type":"number","example":25.5},"items":{"type":"array","items":{"type":"string"},"example":["Spicy Tacos","Guacamole"]}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/sessions":{"get":{"summary":"Get Live Streaming Sessions","description":"Retrieve all live streaming sessions with filtering and pagination options","tags":["Live Streaming","Sessions"],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["active","ended","scheduled"],"default":"active"},"description":"Filter sessions by status","example":"active"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of sessions to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of sessions to skip","example":0}],"responses":{"200":{"description":"Live sessions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of live streaming sessions","items":{"type":"object","properties":{"id":{"type":"string","description":"Unique session identifier","example":"session_1"},"chefName":{"type":"string","description":"Name of the chef hosting the session","example":"Chef Maria"},"title":{"type":"string","description":"Session title","example":"Spicy Tacos Live Cooking"},"status":{"type":"string","enum":["active","ended","scheduled"],"description":"Current session status","example":"active"},"viewers":{"type":"number","description":"Current number of viewers","example":125},"startTime":{"type":"string","format":"date-time","description":"Session start time","example":"2024-01-15T10:30:00Z"}}}},"pagination":{"type":"object","description":"Pagination information","properties":{"total":{"type":"number","description":"Total number of sessions","example":15},"limit":{"type":"number","description":"Number of sessions per page","example":20},"offset":{"type":"number","description":"Number of sessions skipped","example":0},"hasMore":{"type":"boolean","description":"Whether there are more sessions available","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/live-streaming/customer":{"get":{"summary":"Get Customer Live Streaming Status","description":"Retrieve the current live streaming status and data for the authenticated customer","tags":["Live Streaming","Customer"],"responses":{"200":{"description":"Customer live streaming data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Customer live streaming retrieved successfully"},"data":{"type":"object","properties":{"watching":{"type":"boolean","description":"Whether the customer is currently watching a live session","example":false},"currentSession":{"type":"object","nullable":true,"description":"Current live session being watched","properties":{"sessionId":{"type":"string","example":"session_123"},"chefName":{"type":"string","example":"Chef Maria"},"title":{"type":"string","example":"Spicy Tacos Live Cooking"},"viewers":{"type":"number","example":125},"startTime":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"}}},"recentOrders":{"type":"array","description":"Recent orders placed during live sessions","items":{"type":"object","properties":{"orderId":{"type":"string","example":"order_123"},"sessionId":{"type":"string","example":"session_456"},"chefName":{"type":"string","example":"Chef John"},"totalAmount":{"type":"number","example":25.5},"orderDate":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"},"status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered"],"example":"confirmed"}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/viewers":{"get":{"summary":"Get Live Stream Viewers","description":"Retrieve current viewers for live streaming sessions with detailed viewer information","tags":["Live Streaming","Viewers"],"parameters":[{"in":"query","name":"sessionId","schema":{"type":"string"},"description":"Filter viewers by live session ID","example":"session_123"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Number of viewers to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of viewers to skip","example":0},{"in":"query","name":"includeAnonymous","schema":{"type":"boolean","default":true},"description":"Include anonymous viewers in results","example":true}],"responses":{"200":{"description":"Live viewers retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Live viewers retrieved successfully"},"data":{"type":"array","description":"Array of live stream viewers","items":{"type":"object","properties":{"viewerId":{"type":"string","description":"Unique viewer identifier","example":"viewer_123"},"userId":{"type":"string","nullable":true,"description":"User ID (null for anonymous viewers)","example":"user_456"},"displayName":{"type":"string","description":"Viewer display name","example":"John Doe"},"isAnonymous":{"type":"boolean","description":"Whether the viewer is anonymous","example":false},"joinedAt":{"type":"string","format":"date-time","description":"When the viewer joined the stream","example":"2024-01-15T10:30:00Z"},"lastActivity":{"type":"string","format":"date-time","description":"Last activity timestamp","example":"2024-01-15T10:35:00Z"},"watchTime":{"type":"number","description":"Total watch time in minutes","example":25},"location":{"type":"object","nullable":true,"description":"Viewer location (if available)","properties":{"country":{"type":"string","example":"United States"},"city":{"type":"string","example":"New York"},"timezone":{"type":"string","example":"America/New_York"}}},"deviceInfo":{"type":"object","nullable":true,"description":"Device information","properties":{"platform":{"type":"string","example":"web"},"browser":{"type":"string","example":"Chrome"},"os":{"type":"string","example":"Windows"}}},"interactions":{"type":"object","description":"Viewer interaction statistics","properties":{"commentsSent":{"type":"number","example":3},"reactionsSent":{"type":"number","example":5},"ordersPlaced":{"type":"number","example":1},"tipsGiven":{"type":"number","example":2}}}}}},"summary":{"type":"object","description":"Viewer summary statistics","properties":{"totalViewers":{"type":"number","description":"Total number of viewers","example":125},"authenticatedViewers":{"type":"number","description":"Number of authenticated viewers","example":98},"anonymousViewers":{"type":"number","description":"Number of anonymous viewers","example":27},"averageWatchTime":{"type":"number","description":"Average watch time in minutes","example":18.5},"peakViewers":{"type":"number","description":"Peak number of viewers","example":150},"peakTime":{"type":"string","format":"date-time","description":"Time when peak viewers occurred","example":"2024-01-15T10:45:00Z"}}}}},"pagination":{"type":"object","properties":{"total":{"type":"number","description":"Total number of viewers","example":125},"limit":{"type":"number","description":"Number of viewers per page","example":50},"offset":{"type":"number","description":"Number of viewers skipped","example":0},"hasMore":{"type":"boolean","description":"Whether there are more viewers available","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/chat":{"get":{"summary":"Get Live Chat Messages","description":"Retrieve live chat messages for the current streaming session","tags":["Live Streaming","Chat"],"parameters":[{"in":"query","name":"sessionId","schema":{"type":"string"},"description":"Live streaming session ID","example":"session_123"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Number of messages to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of messages to skip","example":0}],"responses":{"200":{"description":"Live chat messages retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Live chat retrieved successfully"},"data":{"type":"array","description":"Array of live chat messages","items":{"type":"object","properties":{"messageId":{"type":"string","description":"Unique message identifier","example":"msg_123"},"userId":{"type":"string","description":"User ID who sent the message","example":"user_456"},"userName":{"type":"string","description":"Display name of the user","example":"John Doe"},"content":{"type":"string","description":"Message content","example":"This looks amazing!"},"timestamp":{"type":"string","format":"date-time","description":"Message timestamp","example":"2024-01-15T10:30:00Z"},"isModerator":{"type":"boolean","description":"Whether the user is a moderator","example":false},"reactions":{"type":"array","description":"Array of emoji reactions","items":{"type":"object","properties":{"emoji":{"type":"string","example":"👍"},"count":{"type":"number","example":5}}}}}}}}},"pagination":{"type":"object","properties":{"total":{"type":"number","description":"Total number of messages","example":150},"limit":{"type":"number","description":"Number of messages per page","example":50},"offset":{"type":"number","description":"Number of messages skipped","example":0},"hasMore":{"type":"boolean","description":"Whether there are more messages available","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing sessionId parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/orders":{"get":{"summary":"Get Live Streaming Orders","description":"Retrieve orders placed during live streaming sessions with filtering and pagination","tags":["Live Streaming","Orders"],"parameters":[{"in":"query","name":"sessionId","schema":{"type":"string"},"description":"Filter orders by live session ID","example":"session_123"},{"in":"query","name":"chefId","schema":{"type":"string"},"description":"Filter orders by chef ID","example":"chef_456"},{"in":"query","name":"status","schema":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","cancelled"]},"description":"Filter orders by status","example":"confirmed"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of orders to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of orders to skip","example":0}],"responses":{"200":{"description":"Live orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Live orders retrieved successfully"},"data":{"type":"array","description":"Array of live streaming orders","items":{"type":"object","properties":{"orderId":{"type":"string","description":"Unique order identifier","example":"order_123"},"sessionId":{"type":"string","description":"Live session ID","example":"session_456"},"chefId":{"type":"string","description":"Chef ID","example":"chef_789"},"chefName":{"type":"string","description":"Chef name","example":"Chef Maria"},"customerId":{"type":"string","description":"Customer ID","example":"customer_101"},"customerName":{"type":"string","description":"Customer name","example":"John Doe"},"items":{"type":"array","description":"Order items","items":{"type":"object","properties":{"name":{"type":"string","example":"Spicy Tacos"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":12.5}}}},"totalAmount":{"type":"number","description":"Total order amount","example":25},"status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","cancelled"],"description":"Order status","example":"confirmed"},"placedAt":{"type":"string","format":"date-time","description":"Order placement time","example":"2024-01-15T10:30:00Z"},"estimatedPrepTime":{"type":"number","description":"Estimated preparation time in minutes","example":30},"deliveryAddress":{"type":"object","description":"Delivery address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"New York"},"state":{"type":"string","example":"NY"},"zipCode":{"type":"string","example":"10001"}}},"paymentStatus":{"type":"string","enum":["pending","paid","failed","refunded"],"description":"Payment status","example":"paid"},"notes":{"type":"string","nullable":true,"description":"Special order notes","example":"Extra spicy please"}}}}}},"pagination":{"type":"object","properties":{"total":{"type":"number","description":"Total number of orders","example":50},"limit":{"type":"number","description":"Number of orders per page","example":20},"offset":{"type":"number","description":"Number of orders skipped","example":0},"hasMore":{"type":"boolean","description":"Whether there are more orders available","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/moderator":{"get":{"summary":"Get Moderator Live Streaming Dashboard","description":"Retrieve live streaming moderation dashboard data for authenticated moderators","tags":["Live Streaming","Moderation"],"responses":{"200":{"description":"Moderator live streaming data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","description":"Success message","example":"Moderator live streaming retrieved successfully"},"data":{"type":"object","properties":{"assignedSessions":{"type":"array","description":"Live sessions assigned to this moderator","items":{"type":"object","properties":{"sessionId":{"type":"string","description":"Live session ID","example":"session_123"},"chefId":{"type":"string","description":"Chef ID hosting the session","example":"chef_456"},"chefName":{"type":"string","description":"Chef name","example":"Chef Maria"},"title":{"type":"string","description":"Session title","example":"Spicy Tacos Live Cooking"},"status":{"type":"string","enum":["active","ended","paused"],"description":"Session status","example":"active"},"viewerCount":{"type":"number","description":"Current viewer count","example":125},"startTime":{"type":"string","format":"date-time","description":"Session start time","example":"2024-01-15T10:30:00Z"},"assignedAt":{"type":"string","format":"date-time","description":"When moderator was assigned","example":"2024-01-15T10:25:00Z"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"description":"Moderation priority","example":"medium"}}}},"moderationActions":{"type":"array","description":"Recent moderation actions taken","items":{"type":"object","properties":{"actionId":{"type":"string","description":"Action ID","example":"action_123"},"sessionId":{"type":"string","description":"Session ID where action was taken","example":"session_456"},"actionType":{"type":"string","enum":["mute_user","unmute_user","remove_comment","warn_user","ban_user","timeout_user"],"description":"Type of moderation action","example":"mute_user"},"targetUserId":{"type":"string","description":"User ID who was moderated","example":"user_789"},"targetUserName":{"type":"string","description":"Username of moderated user","example":"John Doe"},"reason":{"type":"string","description":"Reason for moderation action","example":"Inappropriate language"},"moderatorId":{"type":"string","description":"Moderator ID who took action","example":"moderator_101"},"moderatorName":{"type":"string","description":"Moderator name","example":"Moderator Smith"},"timestamp":{"type":"string","format":"date-time","description":"When action was taken","example":"2024-01-15T10:35:00Z"},"duration":{"type":"number","nullable":true,"description":"Duration of action in minutes (for timeouts)","example":30}}}},"reports":{"type":"array","description":"Recent reports requiring attention","items":{"type":"object","properties":{"reportId":{"type":"string","description":"Report ID","example":"report_123"},"sessionId":{"type":"string","description":"Session ID where report occurred","example":"session_456"},"reporterId":{"type":"string","description":"User ID who made the report","example":"user_789"},"reporterName":{"type":"string","description":"Reporter's name","example":"Jane Doe"},"reportedUserId":{"type":"string","description":"User ID being reported","example":"user_101"},"reportedUserName":{"type":"string","description":"Reported user's name","example":"John Smith"},"reportType":{"type":"string","enum":["spam","harassment","inappropriate_content","violence","other"],"description":"Type of report","example":"harassment"},"description":{"type":"string","description":"Report description","example":"User is sending inappropriate messages"},"status":{"type":"string","enum":["pending","investigating","resolved","dismissed"],"description":"Report status","example":"pending"},"reportedAt":{"type":"string","format":"date-time","description":"When report was made","example":"2024-01-15T10:40:00Z"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"description":"Report priority","example":"high"},"evidence":{"type":"array","description":"Evidence related to the report","items":{"type":"object","properties":{"type":{"type":"string","enum":["comment","message","image","video"],"example":"comment"},"content":{"type":"string","example":"Inappropriate comment content"},"timestamp":{"type":"string","format":"date-time","example":"2024-01-15T10:35:00Z"}}}}}}}}},"summary":{"type":"object","description":"Moderation summary statistics","properties":{"totalSessions":{"type":"number","description":"Total sessions assigned","example":5},"activeSessions":{"type":"number","description":"Currently active sessions","example":3},"pendingReports":{"type":"number","description":"Reports pending review","example":12},"actionsToday":{"type":"number","description":"Moderation actions taken today","example":8},"averageResponseTime":{"type":"number","description":"Average response time in minutes","example":5.5}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only moderators can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/admin":{"get":{"summary":"Get Admin Live Streaming Overview (Admin)","description":"Retrieve comprehensive overview of live streaming activity for administrative monitoring. This endpoint provides high-level statistics about live sessions, viewer counts, and reports for platform management.","tags":["Admin","Live Streaming"],"responses":{"200":{"description":"Admin live streaming overview retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","example":"Admin live streaming retrieved successfully"},"data":{"type":"object","properties":{"totalSessions":{"type":"number","description":"Total number of live sessions ever created","example":150},"activeSessions":{"type":"number","description":"Number of currently active live sessions","example":5},"totalViewers":{"type":"number","description":"Total number of viewers across all active sessions","example":250},"reports":{"type":"array","description":"Array of recent live streaming reports","items":{"type":"object","properties":{"sessionId":{"type":"string","description":"Live session ID","example":"session_123"},"chefId":{"type":"string","description":"Chef ID who hosted the session","example":"j1234567890abcdef"},"status":{"type":"string","enum":["active","ended","paused"],"description":"Current session status","example":"active"},"viewerCount":{"type":"number","description":"Number of current viewers","example":25},"startTime":{"type":"string","format":"date-time","description":"Session start time","example":"2024-01-15T10:30:00Z"},"duration":{"type":"number","description":"Session duration in minutes","example":45}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/live-streaming/comments":{"get":{"summary":"Get Live Comments","description":"Retrieve live comments for a specific streaming session with filtering and pagination","tags":["Live Streaming","Comments"],"parameters":[{"in":"query","name":"sessionId","required":true,"schema":{"type":"string"},"description":"ID of the live session","example":"j1234567890abcdef"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Number of comments to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of comments to skip","example":0},{"in":"query","name":"commentType","schema":{"type":"string","enum":["general","question","reaction","tip","moderation"]},"description":"Filter comments by type","example":"question"}],"responses":{"200":{"description":"Live comments retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"sessionId":{"type":"string","example":"j1234567890abcdef"},"comments":{"type":"array","description":"Array of live comments","items":{"type":"object","properties":{"id":{"type":"string","description":"Comment ID","example":"j1234567890abcdef"},"content":{"type":"string","description":"Comment content","example":"This looks amazing! Can you share the recipe?"},"commentType":{"type":"string","enum":["general","question","reaction","tip","moderation"],"description":"Type of comment","example":"question"},"sentBy":{"type":"string","description":"User ID who sent the comment","example":"j1234567890abcdef"},"sentByRole":{"type":"string","description":"Role of the user who sent the comment","example":"customer"},"userDisplayName":{"type":"string","description":"Display name of the user","example":"John Doe"},"sentAt":{"type":"string","format":"date-time","description":"Comment timestamp","example":"2024-01-15T10:30:00Z"},"metadata":{"type":"object","description":"Additional comment metadata","example":{"reaction":"heart","tipAmount":5}}}}},"totalComments":{"type":"number","description":"Total number of comments returned","example":25},"limit":{"type":"number","description":"Number of comments per page","example":50},"offset":{"type":"number","description":"Number of comments skipped","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing sessionId parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Send Live Comment","description":"Send a comment to a live streaming session","tags":["Live Streaming"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["sessionId","content","commentType"],"properties":{"sessionId":{"type":"string","description":"ID of the live session","example":"j1234567890abcdef"},"content":{"type":"string","description":"Comment content","example":"This looks amazing! Can you share the recipe?"},"commentType":{"type":"string","enum":["general","question","reaction","tip","moderation"],"description":"Type of comment","example":"question"},"metadata":{"type":"object","nullable":true,"description":"Additional comment metadata","example":{"reaction":"heart","tipAmount":5}}}}}}},"responses":{"200":{"description":"Comment sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"sessionId":{"type":"string","example":"j1234567890abcdef"},"comment":{"type":"object","nullable":true,"description":"Created comment details","properties":{"id":{"type":"string","example":"j1234567890abcdef"},"content":{"type":"string","example":"This looks amazing! Can you share the recipe?"},"commentType":{"type":"string","example":"question"},"sentBy":{"type":"string","example":"j1234567890abcdef"},"sentByRole":{"type":"string","example":"customer"},"sentAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"},"metadata":{"type":"object","example":{"reaction":"heart","tipAmount":5}}}},"message":{"type":"string","example":"Live comment sent successfully."}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields or session not active","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user is muted in this session","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/live-streaming/reactions":{"post":{"summary":"Send Live Stream Reaction","description":"Send a reaction to an active live streaming session. This endpoint allows viewers to express their emotions and engagement during live cooking sessions through various reaction types with different intensity levels.","tags":["Live Streaming","Reactions"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["sessionId","reactionType"],"properties":{"sessionId":{"type":"string","description":"Live session ID","example":"j1234567890abcdef"},"reactionType":{"type":"string","enum":["like","love","laugh","wow","sad","angry","fire","clap","heart","star"],"description":"Type of reaction to send","example":"fire"},"intensity":{"type":"string","enum":["light","medium","strong"],"default":"medium","description":"Intensity level of the reaction","example":"strong"},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional reaction metadata","example":{"timestamp":"2024-01-15T14:30:00Z","deviceType":"mobile"}}}}}}},"responses":{"200":{"description":"Live reaction sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"sessionId":{"type":"string","description":"Live session ID","example":"j1234567890abcdef"},"reaction":{"type":"object","nullable":true,"properties":{"id":{"type":"string","description":"Reaction ID","example":"reaction_1234567890abcdef"},"reactionType":{"type":"string","example":"fire"},"intensity":{"type":"string","example":"strong"},"sentBy":{"type":"string","description":"User ID who sent the reaction","example":"j1234567890abcdef"},"sentByRole":{"type":"string","description":"Role of the user who sent the reaction","example":"customer"},"sentAt":{"type":"string","format":"date-time","description":"Timestamp when reaction was sent","example":"2024-01-15T14:30:00Z"},"metadata":{"type":"object","additionalProperties":true,"example":{}}}},"message":{"type":"string","example":"Live reaction sent successfully."}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid reaction type","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user is muted in this session","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - session is not active","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"get":{"summary":"Get Live Stream Reactions","description":"Retrieve reactions from a live streaming session. This endpoint allows fetching reaction history with optional filtering by reaction type, pagination, and real-time updates for live session engagement tracking.","tags":["Live Streaming","Reactions"],"parameters":[{"in":"query","name":"sessionId","required":true,"schema":{"type":"string"},"description":"Live session ID","example":"j1234567890abcdef"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":1000,"default":100},"description":"Maximum number of reactions to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of reactions to skip for pagination","example":0},{"in":"query","name":"reactionType","schema":{"type":"string","enum":["like","love","laugh","wow","sad","angry","fire","clap","heart","star"]},"description":"Filter reactions by type","example":"fire"},{"in":"query","name":"since","schema":{"type":"string","format":"date-time"},"description":"Get reactions since this timestamp","example":"2024-01-15T14:00:00Z"}],"responses":{"200":{"description":"Live reactions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"sessionId":{"type":"string","description":"Live session ID","example":"j1234567890abcdef"},"reactions":{"type":"array","description":"Array of reactions","items":{"type":"object","properties":{"id":{"type":"string","description":"Reaction ID","example":"reaction_1234567890abcdef"},"reactionType":{"type":"string","enum":["like","love","laugh","wow","sad","angry","fire","clap","heart","star"],"example":"fire"},"intensity":{"type":"string","enum":["light","medium","strong"],"example":"strong"},"sentBy":{"type":"string","description":"User ID who sent the reaction","example":"j1234567890abcdef"},"sentByRole":{"type":"string","description":"Role of the user who sent the reaction","example":"customer"},"userDisplayName":{"type":"string","nullable":true,"description":"Display name of the user","example":"John Doe"},"sentAt":{"type":"string","format":"date-time","description":"Timestamp when reaction was sent","example":"2024-01-15T14:30:00Z"},"metadata":{"type":"object","additionalProperties":true,"example":{}}}}},"totalReactions":{"type":"integer","description":"Total number of reactions returned","example":50},"limit":{"type":"integer","description":"Maximum reactions per page","example":100},"offset":{"type":"integer","description":"Number of reactions skipped","example":0},"hasMore":{"type":"boolean","description":"Whether there are more reactions available","example":true},"reactionSummary":{"type":"object","nullable":true,"description":"Summary of reaction counts by type","properties":{"like":{"type":"integer","example":25},"love":{"type":"integer","example":15},"fire":{"type":"integer","example":10},"clap":{"type":"integer","example":8},"heart":{"type":"integer","example":12},"star":{"type":"integer","example":5}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing sessionId parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/staff-list":{"get":{"summary":"Get Staff List","description":"Retrieve a list of all staff members in the system","tags":["Staff","User Management"],"responses":{"200":{"description":"Staff list retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"staff":{"type":"array","description":"Array of staff members","items":{"type":"object","properties":{"_id":{"type":"string","description":"Staff member ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"staff@cribnosh.com"},"name":{"type":"string","example":"John Smith"},"role":{"type":"string","example":"staff"},"roles":{"type":"array","items":{"type":"string"},"example":["staff"]},"status":{"type":"string","enum":["active","inactive","suspended"],"example":"active"},"department":{"type":"string","nullable":true,"description":"Staff department","example":"Customer Support"},"position":{"type":"string","nullable":true,"description":"Staff position","example":"Support Agent"},"permissions":{"type":"array","nullable":true,"description":"Staff permissions","items":{"type":"string"},"example":["view_orders","manage_customers"]},"createdAt":{"type":"string","format":"date-time","description":"Account creation date","example":"2024-01-15T10:30:00Z"},"lastActive":{"type":"string","format":"date-time","nullable":true,"description":"Last active timestamp","example":"2024-01-15T10:30:00Z"},"avatar":{"type":"string","nullable":true,"description":"Profile avatar URL","example":"https://example.com/avatar.jpg"}}}},"totalCount":{"type":"number","description":"Total number of staff members","example":25},"activeCount":{"type":"number","description":"Number of active staff members","example":22},"inactiveCount":{"type":"number","description":"Number of inactive staff members","example":3}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/api/session/handoff":{"get":{"summary":"Session handoff","description":"Handle session transfer between domains using a secure transfer token","tags":["Session"],"parameters":[{"in":"query","name":"xfer","required":true,"schema":{"type":"string"},"description":"Session transfer token"},{"in":"query","name":"next","schema":{"type":"string","default":"/"},"description":"Redirect path after successful handoff"}],"responses":{"302":{"description":"Session transferred successfully, redirecting to next path"},"400":{"description":"Validation error - Missing or invalid transfer token"}},"security":[]}},"/images/chef/dish/{dish_id}":{"post":{"summary":"Upload Dish Image","description":"Get presigned URL for uploading dish image or confirm image upload","tags":["Images","Chef","Dishes"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Dish ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","oneOf":[{"title":"Get Upload URL","required":["filename","contentType"],"properties":{"filename":{"type":"string","description":"Name of the image file","example":"dish-photo.jpg"},"contentType":{"type":"string","description":"MIME type of the image","example":"image/jpeg"}}},{"title":"Confirm Upload","required":["confirm","imageUrl"],"properties":{"confirm":{"type":"boolean","description":"Confirm that image was uploaded","example":true},"imageUrl":{"type":"string","description":"URL of the uploaded image","example":"https://storage.example.com/chef123/dishes/dish456/image.jpg"}}}]}}}},"responses":{"200":{"description":"Upload URL generated or image confirmed successfully","content":{"application/json":{"schema":{"type":"object","oneOf":[{"title":"Upload URL Response","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"url":{"type":"string","description":"Convex upload URL","example":"https://convex.cloud/upload?signature=..."},"objectKey":{"type":"string","description":"Object key for the uploaded file","example":"chef123/dishes/dish456/1640995200000_dish-photo.jpg"}}},"message":{"type":"string","example":"Success"}}},{"title":"Confirmation Response","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"message":{"type":"string","example":"Image added to meal"}}},"message":{"type":"string","example":"Success"}}}]}}}},"400":{"description":"Validation error - missing or invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/images/chef/profile":{"post":{"summary":"Upload Chef Profile Image","description":"Upload a profile image for the authenticated chef","tags":["Images","Chef","Profile"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"type":"string","format":"binary","description":"Image file to upload (max 5MB, image formats only)"}}}}}},"responses":{"200":{"description":"Profile image uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"fileUrl":{"type":"string","description":"URL of the uploaded profile image","example":"/api/files/storage123456"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid file or missing parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only chefs or admins can upload images","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef profile not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Validation error - file too large, wrong format, or no file uploaded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or file upload failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/images/customer/profile":{"post":{"summary":"Upload Customer Profile Image","description":"Upload a profile image for the authenticated customer. This endpoint allows customers to upload and update their profile pictures with automatic resizing and optimization for display across the platform.","tags":["Images","Customer","Profile"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"type":"string","format":"binary","description":"Image file to upload (JPEG, PNG, WebP)","example":"profile-image.jpg"},"cropData":{"type":"object","nullable":true,"description":"Optional crop data for image editing","properties":{"x":{"type":"number","example":100},"y":{"type":"number","example":50},"width":{"type":"number","example":200},"height":{"type":"number","example":200}}}}}}}},"responses":{"200":{"description":"Profile image uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"first_name":{"type":"string","description":"Customer's first name","example":"John"},"last_name":{"type":"string","description":"Customer's last name","example":"Doe"},"bio":{"type":"string","nullable":true,"description":"Customer's bio","example":null},"profile_image":{"type":"string","description":"URL of the uploaded profile image","example":"/api/files/storage_id_1234567890abcdef"},"location_coordinates":{"type":"object","nullable":true,"description":"Customer's location coordinates","example":null},"address":{"type":"string","nullable":true,"description":"Customer's address","example":"123 Main St, New York, NY"},"profile_id":{"type":"string","description":"Customer profile ID","example":"j1234567890abcdef"},"user_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"created_at":{"type":"string","format":"date-time","description":"Profile creation date","example":"2024-01-15T10:00:00.000Z"},"updated_at":{"type":"string","format":"date-time","description":"Last update date","example":"2024-01-15T14:30:00.000Z"},"profile_image_url":{"type":"string","description":"Full URL of the profile image","example":"/api/files/storage_id_1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only customers and admins can upload images","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - invalid file or file too large","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - upload failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/images/admin/cuisine/{cuisine_id}":{"post":{"summary":"Upload cuisine image","description":"Generate an upload URL for a cuisine image or confirm the uploaded image","tags":["Admin - Images"],"parameters":[{"in":"path","name":"cuisine_id","required":true,"schema":{"type":"string"},"description":"ID of the cuisine"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"filename":{"type":"string","description":"Name of the file to upload"},"contentType":{"type":"string","description":"MIME type of the file"},"confirm":{"type":"boolean","description":"Whether to confirm and attach the uploaded image"},"imageUrl":{"type":"string","description":"URL of the uploaded image (required if confirm is true)"}}}}}},"responses":{"200":{"description":"Upload URL generated or image confirmed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"url":{"type":"string","description":"Upload URL (if not confirming)"},"objectKey":{"type":"string","description":"Object key for the uploaded file"},"status":{"type":"string","example":"ok"},"message":{"type":"string","example":"Image added to cuisine"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing required fields"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/api/images/dish/{dish_id}":{"get":{"summary":"Get dish images","description":"Retrieve all images associated with a specific dish","tags":["Images"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"ID of the dish"}],"responses":{"200":{"description":"Dish images retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"images":{"type":"array","items":{"type":"object","properties":{"image_id":{"type":"string"},"image_url":{"type":"string"},"image_type":{"type":"string"},"display_order":{"type":"number"},"is_primary":{"type":"boolean"},"alt_text":{"type":"string","nullable":true},"created_at":{"type":"string","format":"date-time"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing dish_id"},"404":{"description":"Dish not found"},"500":{"description":"Internal server error"}},"security":[]}},"/webhooks/stripe":{"post":{"summary":"Stripe Webhook Handler","description":"Handle Stripe webhook events for payment processing and order updates","tags":["Webhooks","Payments"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","description":"Stripe webhook event payload","properties":{"id":{"type":"string","description":"Stripe event ID","example":"evt_1234567890abcdef"},"type":{"type":"string","description":"Stripe event type","enum":["payment_intent.succeeded","payment_intent.payment_failed","payment_intent.canceled","charge.succeeded","charge.failed"],"example":"payment_intent.succeeded"},"data":{"type":"object","description":"Event data object"},"created":{"type":"number","description":"Unix timestamp of event creation","example":1640995200}}}}}},"parameters":[{"in":"header","name":"stripe-signature","required":true,"schema":{"type":"string"},"description":"Stripe webhook signature for verification","example":"t=1640995200,v1=abcdef1234567890"}],"responses":{"200":{"description":"Webhook processed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"received":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing signature or invalid payload","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error during webhook processing","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/webhooks/resend":{"post":{"summary":"Resend Email Webhook Handler","description":"Handle Resend email service webhook events for email analytics and tracking","tags":["Webhooks","Email"],"requestBody":{"required":true,"content":{"text/plain":{"schema":{"type":"string","description":"Raw webhook payload from Resend","example":"{\"type\":\"email.delivered\",\"data\":{\"id\":\"email_123\",\"to\":[\"user@example.com\"],\"subject\":\"Welcome\"}}"}}}},"responses":{"200":{"description":"Webhook processed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Empty object on success","example":{}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Webhook signature verification failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or webhook secret not configured","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[],"x-webhook":{"description":"This endpoint handles Resend webhook events for email analytics:\n\n**Supported Email Events:**\n- `email.sent`: Email was sent successfully\n- `email.delivered`: Email was delivered to recipient\n- `email.delivery_delayed`: Email delivery was delayed\n- `email.complained`: Recipient marked email as spam\n- `email.bounced`: Email bounced (hard/soft bounce)\n- `email.clicked`: Recipient clicked a link in the email\n- `email.opened`: Recipient opened the email\n- `email.unsubscribed`: Recipient unsubscribed\n- `email.failed`: Email failed to send\n\n**Supported Contact Events:**\n- `contact.created`: New contact created\n- `contact.updated`: Contact information updated\n- `contact.deleted`: Contact deleted\n\n**Supported Domain Events:**\n- `domain.created`: New domain added\n- `domain.updated`: Domain settings updated\n- `domain.deleted`: Domain removed\n\n**Webhook Security:**\n- Requires valid Resend webhook signature\n- Verifies webhook secret for authenticity\n- Processes events asynchronously\n- Records analytics data in Convex database\n"}}},"/notify-staff":{"post":{"summary":"Send Staff Notification","description":"Send email notifications to staff members for important updates, alerts, or announcements. This endpoint allows administrators to communicate with staff through email notifications with proper formatting and unsubscribe capabilities.","tags":["Staff","Notifications","Email"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["to","subject","message"],"properties":{"to":{"type":"string","format":"email","description":"Email address of the staff member to notify","example":"staff@cribnosh.com"},"subject":{"type":"string","description":"Email subject line","example":"Important System Update"},"message":{"type":"string","description":"Email message content (plain text)","example":"Please be aware that we will be performing system maintenance tonight from 11 PM to 1 AM EST."},"priority":{"type":"string","enum":["low","normal","high","urgent"],"default":"normal","description":"Priority level of the notification","example":"high"},"category":{"type":"string","nullable":true,"description":"Category of the notification","example":"system_maintenance"},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata for the notification","example":{"department":"operations","shift":"night","location":"main_kitchen"}}}}}}},"responses":{"200":{"description":"Staff notification sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"messageId":{"type":"string","nullable":true,"description":"Email service message ID","example":"msg_1234567890abcdef"},"sentAt":{"type":"string","format":"date-time","description":"Timestamp when notification was sent","example":"2024-01-15T14:30:00Z"},"recipient":{"type":"string","description":"Email address of the recipient","example":"staff@cribnosh.com"},"subject":{"type":"string","description":"Email subject that was sent","example":"Important System Update"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - invalid email format or content","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - email service failure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/metrics-export":{"get":{"summary":"Export System Metrics (Admin)","description":"Export comprehensive system metrics in JSON or CSV format for administrative analysis","tags":["Admin","Metrics","Export"],"parameters":[{"in":"query","name":"format","schema":{"type":"string","enum":["json","csv"],"default":"json"},"description":"Export format","example":"json"}],"responses":{"200":{"description":"Metrics exported successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"totalUsers":{"type":"number","description":"Total number of users","example":1250},"totalReviews":{"type":"number","description":"Total number of reviews","example":3400},"totalCustomOrders":{"type":"number","description":"Total number of custom orders","example":890},"totalWaitlist":{"type":"number","description":"Total number of waitlist entries","example":150},"totalDrivers":{"type":"number","description":"Total number of drivers","example":45},"uptime":{"type":"number","description":"System uptime in seconds","example":86400},"timestamp":{"type":"string","format":"date-time","description":"Export timestamp","example":"2024-01-15T10:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}},"headers":{"Content-Disposition":{"description":"File download header","schema":{"type":"string","example":"attachment; filename=metrics-export.json"}},"Content-Type":{"description":"Content type based on format","schema":{"type":"string","example":"application/json"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can export metrics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/reviews":{"get":{"summary":"Get All Reviews","description":"Get paginated list of all reviews with filtering options","tags":["Reviews"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of reviews to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of reviews to skip","example":0}],"responses":{"200":{"description":"Reviews retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"reviews":{"type":"array","description":"Array of reviews","items":{"type":"object","properties":{"_id":{"type":"string","description":"Review ID","example":"j1234567890abcdef"},"user_id":{"type":"string","description":"User ID who wrote the review","example":"j1234567890abcdef"},"meal_id":{"type":"string","description":"Meal ID being reviewed","example":"j1234567890abcdef"},"rating":{"type":"number","minimum":1,"maximum":5,"description":"Rating from 1 to 5","example":4},"comment":{"type":"string","nullable":true,"description":"Review comment","example":"Great meal, highly recommended!"},"status":{"type":"string","enum":["pending","approved","rejected"],"description":"Review status","example":"approved"},"createdAt":{"type":"number","description":"Review creation timestamp","example":1640995200000}}}},"total":{"type":"number","description":"Total number of reviews","example":150},"limit":{"type":"number","description":"Number of reviews returned","example":20},"offset":{"type":"number","description":"Number of reviews skipped","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/reviews/chef/{chef_id}":{"get":{"summary":"Get Chef Reviews","description":"Get all reviews for a specific chef with average rating and customer details","tags":["Reviews"],"parameters":[{"in":"path","name":"chef_id","required":true,"schema":{"type":"string"},"description":"ID of the chef","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Chef reviews retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"avg_rating":{"type":"number","description":"Average rating for the chef","example":4.2},"total_reviews":{"type":"number","description":"Total number of reviews","example":25},"reviews":{"type":"array","description":"Array of reviews for this chef","items":{"type":"object","properties":{"rating":{"type":"number","minimum":1,"maximum":5,"description":"Rating from 1 to 5","example":4},"comment":{"type":"string","nullable":true,"description":"Review comment","example":"Excellent chef, amazing flavors!"},"review_id":{"type":"string","description":"Review ID","example":"j1234567890abcdef"},"created_at":{"type":"string","format":"date-time","nullable":true,"description":"Review creation date","example":"2024-01-15T10:30:00.000Z"},"customer":{"type":"object","description":"Customer information","properties":{"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"first_name":{"type":"string","nullable":true,"description":"Customer's first name","example":"John"},"last_name":{"type":"string","nullable":true,"description":"Customer's last name","example":"Doe"}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing chef_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/reviews/dish/{dish_id}":{"get":{"summary":"Get Dish Reviews","description":"Get all reviews for a specific dish with average rating and customer details","tags":["Reviews"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"ID of the dish","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Dish reviews retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"dish_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"avg_rating":{"type":"number","description":"Average rating for the dish","example":4.5},"total_reviews":{"type":"number","description":"Total number of reviews","example":18},"reviews":{"type":"array","description":"Array of reviews for this dish","items":{"type":"object","properties":{"rating":{"type":"number","minimum":1,"maximum":5,"description":"Rating from 1 to 5","example":5},"comment":{"type":"string","nullable":true,"description":"Review comment","example":"Absolutely delicious! Perfectly cooked and seasoned."},"review_id":{"type":"string","description":"Review ID","example":"j1234567890abcdef"},"created_at":{"type":"string","format":"date-time","description":"Review creation date","example":"2024-01-15T10:30:00.000Z"},"customer":{"type":"object","description":"Customer information","properties":{"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"first_name":{"type":"string","nullable":true,"description":"Customer's first name","example":"Sarah"},"last_name":{"type":"string","nullable":true,"description":"Customer's last name","example":"Johnson"}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing dish_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/api/reviews/index":{"get":{"summary":"Get reviews index","description":"Get the reviews index page with statistics and recent reviews","tags":["Reviews"],"responses":{"200":{"description":"Reviews index retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"totalReviews":{"type":"number"},"averageRating":{"type":"number"},"recentReviews":{"type":"array","items":{"type":"object"}},"topRatedChefs":{"type":"array","items":{"type":"object"}},"topRatedDishes":{"type":"array","items":{"type":"object"}}}}}}}}},"500":{"description":"Internal server error"}}}},"/api/reviews/{review_id}/approval":{"post":{"summary":"Approve or disapprove review","description":"Update the approval status of a review (admin only)","tags":["Reviews"],"parameters":[{"in":"path","name":"review_id","required":true,"schema":{"type":"string"},"description":"ID of the review"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["is_approved"],"properties":{"is_approved":{"type":"boolean","description":"Whether to approve or disapprove the review"}}}}}},"responses":{"200":{"description":"Review approval status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"review":{"type":"object","description":"Updated review data"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing review_id or invalid body"},"404":{"description":"Review not found"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/reviews/sentiment-score":{"post":{"summary":"Analyze Review Sentiment Score","description":"Analyze the sentiment and emotional tone of review text using AI-powered sentiment analysis. This endpoint provides sentiment scores, mood detection, and emotional insights for review content moderation and analytics.","tags":["Reviews","Sentiment Analysis","AI"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["text"],"properties":{"text":{"type":"string","minLength":1,"maxLength":5000,"description":"Review text to analyze","example":"The food was absolutely amazing! The chef really knows how to cook. Best meal I've had in months!"},"language":{"type":"string","nullable":true,"description":"Language of the text (auto-detected if not provided)","example":"en"},"context":{"type":"object","nullable":true,"description":"Additional context for analysis","properties":{"reviewType":{"type":"string","enum":["food","service","delivery","overall"],"example":"food"},"rating":{"type":"number","minimum":1,"maximum":5,"example":5},"orderId":{"type":"string","nullable":true,"example":"j1234567890abcdef"}}}}}}}},"responses":{"200":{"description":"Sentiment analysis completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"sentiment":{"type":"string","enum":["positive","negative","neutral","mixed"],"description":"Overall sentiment classification","example":"positive"},"score":{"type":"number","minimum":-1,"maximum":1,"description":"Sentiment score (-1 to 1, where 1 is most positive)","example":0.85},"mood":{"type":"string","nullable":true,"description":"Detected mood/emotion","example":"excited"},"summary":{"type":"string","nullable":true,"description":"AI-generated summary of the sentiment","example":"Highly positive review expressing satisfaction and excitement"},"confidence":{"type":"number","minimum":0,"maximum":1,"nullable":true,"description":"Confidence score for the analysis","example":0.92},"emotions":{"type":"array","nullable":true,"description":"Detected emotions in the text","items":{"type":"object","properties":{"emotion":{"type":"string","example":"joy"},"intensity":{"type":"number","minimum":0,"maximum":1,"example":0.8}}}},"keywords":{"type":"array","nullable":true,"description":"Key emotional keywords found","items":{"type":"string","example":"amazing"}},"language":{"type":"string","nullable":true,"description":"Detected language","example":"en"},"processingTime":{"type":"number","nullable":true,"description":"Analysis processing time in milliseconds","example":150}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing or invalid text","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - sentiment analysis failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/staff/auth/login":{"post":{"summary":"Staff Login","description":"Authenticate staff members and create session tokens","tags":["Staff","Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","description":"Staff email address","example":"staff@cribnosh.com"},"password":{"type":"string","description":"Staff password","example":"securePassword123"}}}}}},"responses":{"200":{"description":"Staff login successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"sessionToken":{"type":"string","description":"Convex session token","example":"session_token_here"}}},"message":{"type":"string","example":"Success"}}}}},"headers":{"Set-Cookie":{"description":"Convex session token cookie","schema":{"type":"string","example":"convex-auth-token=session_token_here; HttpOnly; Secure; SameSite=Strict"}}}},"401":{"description":"Unauthorized - invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/staff/auth/logout":{"post":{"summary":"Staff Logout","description":"Logout staff user and clear session token","tags":["Staff","Authentication"],"responses":{"200":{"description":"Staff logged out successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Logged out successfully"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/staff/upload-document":{"post":{"summary":"Upload Staff Document","description":"Upload documents for staff onboarding (ID, tax forms, etc.)","tags":["Staff","Documents"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file","userEmail"],"properties":{"file":{"type":"string","format":"binary","description":"Document file to upload"},"userEmail":{"type":"string","format":"email","description":"Email of the staff member","example":"john.doe@cribnosh.com"},"type":{"type":"string","description":"Type of document being uploaded","example":"id_document"}}}}}},"responses":{"200":{"description":"Document uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"fileUrl":{"type":"string","description":"URL to access the uploaded file","example":"/api/files/storage123456"},"fileName":{"type":"string","description":"Generated file name","example":"john.doe@cribnosh.com/uuid-document.pdf"}}},"message":{"type":"string","example":"Document uploaded successfully"}}}}}},"400":{"description":"Validation error - missing file or userEmail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or file storage not configured","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/staff/clockin-status":{"get":{"summary":"Get Staff Clock-In Status","description":"Retrieve the current clock-in status for the authenticated staff member. This endpoint checks if the staff member has clocked in today and provides their current work status for time tracking and payroll purposes.","tags":["Staff","Time Tracking","Clock-In"],"responses":{"200":{"description":"Clock-in status retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"clockedIn":{"type":"boolean","description":"Whether the staff member is currently clocked in","example":true},"staffId":{"type":"string","description":"ID of the staff member","example":"j1234567890abcdef"},"currentDate":{"type":"string","format":"date","description":"Current date for the status check","example":"2024-01-15"},"timeLogs":{"type":"array","description":"Today's time logs for the staff member","items":{"type":"object","properties":{"_id":{"type":"string","description":"Time log ID","example":"timelog_1234567890abcdef"},"staffId":{"type":"string","description":"Staff member ID","example":"j1234567890abcdef"},"clockInTime":{"type":"string","format":"date-time","description":"Clock-in timestamp","example":"2024-01-15T09:00:00Z"},"clockOutTime":{"type":"string","format":"date-time","nullable":true,"description":"Clock-out timestamp (if clocked out)","example":null},"totalHours":{"type":"number","nullable":true,"description":"Total hours worked (if clocked out)","example":null},"status":{"type":"string","enum":["clocked_in","clocked_out","break"],"description":"Current work status","example":"clocked_in"},"location":{"type":"string","nullable":true,"description":"Work location","example":"main_kitchen"},"notes":{"type":"string","nullable":true,"description":"Additional notes about the shift","example":"Regular shift"}}}},"workDayInfo":{"type":"object","description":"Information about the current work day","properties":{"startOfDay":{"type":"string","format":"date-time","description":"Start of current work day","example":"2024-01-15T00:00:00Z"},"endOfDay":{"type":"string","format":"date-time","description":"End of current work day","example":"2024-01-15T23:59:59Z"},"hasActiveShift":{"type":"boolean","description":"Whether there's an active shift today","example":true},"lastClockIn":{"type":"string","format":"date-time","nullable":true,"description":"Last clock-in time today","example":"2024-01-15T09:00:00Z"},"lastClockOut":{"type":"string","format":"date-time","nullable":true,"description":"Last clock-out time today","example":null}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - staff authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - staff access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/staff/data":{"get":{"summary":"Get Staff Data","description":"Retrieve staff member's personal and employment data","tags":["Staff","Profile"],"responses":{"200":{"description":"Staff data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"id":{"type":"string","description":"Staff user ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Staff member's full name","example":"John Smith"},"email":{"type":"string","format":"email","description":"Staff email address","example":"john.smith@cribnosh.com"},"roles":{"type":"array","items":{"type":"string"},"description":"Staff roles and permissions","example":["staff","customer_support"]},"position":{"type":"string","nullable":true,"description":"Job position/title","example":"Customer Support Manager"},"department":{"type":"string","nullable":true,"description":"Department assignment","example":"Customer Support"},"avatar":{"type":"string","nullable":true,"description":"Profile avatar URL","example":"https://example.com/avatar.jpg"},"status":{"type":"string","enum":["active","inactive","suspended","terminated"],"description":"Employment status","example":"active"},"onboarding":{"type":"object","nullable":true,"description":"Onboarding completion status","properties":{"completed":{"type":"boolean","example":true},"stepsCompleted":{"type":"array","items":{"type":"string"},"example":["profile_setup","training_completed"]}}},"mattermostActive":{"type":"boolean","description":"Whether staff is active on Mattermost","example":true},"mattermostProfile":{"type":"object","nullable":true,"description":"Mattermost profile information","properties":{"username":{"type":"string","example":"john.smith"},"displayName":{"type":"string","example":"John Smith"}}},"mattermostUserId":{"type":"string","nullable":true,"description":"Mattermost user ID","example":"mattermost_user_123"},"startDate":{"type":"string","format":"date","nullable":true,"description":"Employment start date","example":"2024-01-15"},"employmentType":{"type":"string","enum":["full_time","part_time","contract","intern"],"nullable":true,"description":"Type of employment","example":"full_time"},"salary":{"type":"object","nullable":true,"description":"Salary information","properties":{"amount":{"type":"number","example":50000},"currency":{"type":"string","example":"USD"},"frequency":{"type":"string","example":"annual"}}},"address":{"type":"object","nullable":true,"description":"Staff address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"London"},"postcode":{"type":"string","example":"SW1A 1AA"},"country":{"type":"string","example":"UK"}}}}},"message":{"type":"string","example":"Staff data retrieved successfully"}}}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Staff user not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/staff/notices":{"get":{"summary":"Get Staff Notices","description":"Retrieve active notices and announcements for the authenticated staff member","tags":["Staff","Notices","Announcements"],"responses":{"200":{"description":"Staff notices retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"notices":{"type":"array","description":"Array of active staff notices","items":{"type":"object","properties":{"_id":{"type":"string","description":"Notice ID","example":"j1234567890abcdef"},"title":{"type":"string","description":"Notice title","example":"System Maintenance Scheduled"},"content":{"type":"string","description":"Notice content","example":"Scheduled maintenance will occur on Sunday from 2-4 AM"},"type":{"type":"string","enum":["info","warning","urgent","maintenance","policy","training"],"description":"Notice type","example":"maintenance"},"priority":{"type":"string","enum":["low","medium","high","critical"],"description":"Notice priority","example":"high"},"department":{"type":"string","nullable":true,"description":"Target department (null for all departments)","example":"customer_support"},"position":{"type":"string","nullable":true,"description":"Target position (null for all positions)","example":"manager"},"isActive":{"type":"boolean","description":"Whether the notice is currently active","example":true},"startDate":{"type":"string","format":"date-time","description":"Notice start date","example":"2024-01-15T00:00:00.000Z"},"endDate":{"type":"string","format":"date-time","nullable":true,"description":"Notice end date (null for indefinite)","example":"2024-01-20T23:59:59.999Z"},"createdBy":{"type":"string","description":"User ID who created the notice","example":"j1234567890abcdef"},"createdAt":{"type":"string","format":"date-time","description":"Notice creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"},"metadata":{"type":"object","nullable":true,"description":"Additional notice metadata","example":{"requiresAcknowledgment":true,"externalLink":"https://example.com/more-info"}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Staff user not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/staff/mattermost/complete":{"post":{"summary":"Complete Mattermost Setup","description":"Complete Mattermost user setup and configuration for staff members","tags":["Staff","Mattermost","Integration"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","username","firstName","lastName"],"properties":{"email":{"type":"string","format":"email","description":"Staff member email address","example":"john.doe@cribnosh.com"},"username":{"type":"string","description":"Mattermost username","example":"johndoe"},"firstName":{"type":"string","description":"Staff member first name","example":"John"},"lastName":{"type":"string","description":"Staff member last name","example":"Doe"},"preferences":{"type":"object","description":"Mattermost user preferences","example":{"theme":"dark","notifications":"all"}}}}}}},"responses":{"200":{"description":"Mattermost setup completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"mattermostUserId":{"type":"string","description":"Mattermost user ID","example":"mm1234567890abcdef"},"username":{"type":"string","example":"johndoe"},"email":{"type":"string","example":"john.doe@cribnosh.com"},"teamId":{"type":"string","description":"Mattermost team ID","example":"team1234567890abcdef"},"channelId":{"type":"string","description":"Mattermost channel ID","example":"channel1234567890abcdef"},"setupComplete":{"type":"boolean","description":"Whether setup is complete","example":true},"loginUrl":{"type":"string","description":"Mattermost login URL","example":"https://mattermost.cribnosh.com"},"credentials":{"type":"object","properties":{"username":{"type":"string","example":"johndoe"},"password":{"type":"string","description":"Generated password (temporary)","example":"temp123Aa!"}}}}},"message":{"type":"string","example":"Mattermost setup completed successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Mattermost integration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/staff/mattermost/setup":{"post":{"summary":"Setup Mattermost Profile","description":"Initial setup of Mattermost user profile for staff members","tags":["Staff","Mattermost","Integration"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","username","firstName","lastName"],"properties":{"email":{"type":"string","format":"email","description":"Staff member email address","example":"john.doe@cribnosh.com"},"username":{"type":"string","description":"Desired Mattermost username","example":"johndoe"},"firstName":{"type":"string","description":"Staff member first name","example":"John"},"lastName":{"type":"string","description":"Staff member last name","example":"Doe"},"department":{"type":"string","description":"Staff member department","example":"Customer Support"},"role":{"type":"string","description":"Staff member role","example":"Support Specialist"}}}}}},"responses":{"200":{"description":"Mattermost profile setup completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"mattermostUserId":{"type":"string","description":"Mattermost user ID","example":"mm1234567890abcdef"},"username":{"type":"string","example":"johndoe"},"email":{"type":"string","example":"john.doe@cribnosh.com"},"profileComplete":{"type":"boolean","description":"Whether profile setup is complete","example":true},"teamMembership":{"type":"object","properties":{"teamId":{"type":"string","example":"team1234567890abcdef"},"teamName":{"type":"string","example":"CribNosh Staff"},"role":{"type":"string","example":"member"}}},"channelMembership":{"type":"object","properties":{"channelId":{"type":"string","example":"channel1234567890abcdef"},"channelName":{"type":"string","example":"general"},"role":{"type":"string","example":"member"}}},"nextSteps":{"type":"array","items":{"type":"string"},"description":"Next steps in setup process","example":["Complete profile","Set preferences","Join channels"]}}},"message":{"type":"string","example":"Mattermost profile setup completed successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - username or email already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Mattermost integration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/staff/waitlist":{"post":{"summary":"Add Lead to Waitlist (Staff)","description":"Allow staff to directly add leads to the waitlist without email verification","tags":["Staff","Waitlist"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"email":{"type":"string","format":"email","description":"Lead email address","example":"lead@example.com"}}}}}},"responses":{"200":{"description":"Lead successfully added to waitlist","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"waitlistId":{"type":"string","description":"ID of the created waitlist entry","example":"j1234567890abcdef"},"email":{"type":"string","example":"lead@example.com"},"isExisting":{"type":"boolean","description":"Whether the email was already in the waitlist","example":false}}},"message":{"type":"string","example":"Lead successfully added to waitlist"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only staff can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/staff/onboarding":{"post":{"summary":"Submit Staff Onboarding Form","description":"Submit employee onboarding form with personal information and documents","tags":["Staff","Onboarding"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["firstName","lastName","email","position","department"],"properties":{"firstName":{"type":"string","description":"Employee first name","example":"John"},"lastName":{"type":"string","description":"Employee last name","example":"Doe"},"email":{"type":"string","format":"email","description":"Employee email address","example":"john.doe@cribnosh.com"},"position":{"type":"string","description":"Employee position/title","example":"Customer Support Specialist"},"department":{"type":"string","description":"Employee department","example":"Customer Support"},"phone":{"type":"string","description":"Employee phone number","example":"+1234567890"},"address":{"type":"string","description":"Employee address","example":"123 Main St, London, UK"},"emergencyContact":{"type":"string","description":"Emergency contact information","example":"Jane Doe - +0987654321"},"idDocument":{"type":"string","format":"binary","description":"ID document file"},"taxForm":{"type":"string","format":"binary","description":"Tax form file"},"directDepositForm":{"type":"string","format":"binary","description":"Direct deposit form file"}}}}}},"responses":{"200":{"description":"Onboarding form submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"onboardingId":{"type":"string","description":"Onboarding form ID","example":"ONB-12345"},"status":{"type":"string","description":"Onboarding status","example":"submitted"},"submittedAt":{"type":"string","format":"date-time","description":"Submission timestamp","example":"2024-01-15T10:00:00.000Z"},"nextSteps":{"type":"array","items":{"type":"string"},"description":"Next steps in onboarding process","example":["HR Review","Background Check","System Access Setup"]}}},"message":{"type":"string","example":"Onboarding form submitted successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/order/message":{"post":{"summary":"Send Order Message","description":"Send a message related to a specific order in the chat system. This endpoint allows users to communicate about order details, modifications, delivery instructions, or any order-related inquiries.","tags":["Chat","Messaging","Orders"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["chatId","content"],"properties":{"chatId":{"type":"string","description":"Unique identifier of the chat conversation","example":"j1234567890abcdef"},"content":{"type":"string","description":"Message content/text","example":"Can you please add extra cheese to my order?"},"fileUrl":{"type":"string","nullable":true,"description":"URL of attached file (if any)","example":"https://example.com/uploads/image.jpg"},"fileType":{"type":"string","nullable":true,"description":"Type of attached file","example":"image/jpeg"},"fileName":{"type":"string","nullable":true,"description":"Name of attached file","example":"order_modification.jpg"},"fileSize":{"type":"number","nullable":true,"description":"Size of attached file in bytes","example":1024000},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata for the message","example":{"orderId":"order_123","messageType":"modification_request","priority":"normal"}}}}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messageId":{"type":"string","description":"Unique identifier of the sent message","example":"msg_1234567890abcdef"},"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"senderId":{"type":"string","description":"ID of the user who sent the message","example":"j1234567890abcdef"},"content":{"type":"string","description":"Message content","example":"Can you please add extra cheese to my order?"},"timestamp":{"type":"string","format":"date-time","description":"Message creation timestamp","example":"2024-01-15T14:30:00Z"},"fileUrl":{"type":"string","nullable":true,"description":"URL of attached file","example":"https://example.com/uploads/image.jpg"},"fileType":{"type":"string","nullable":true,"description":"Type of attached file","example":"image/jpeg"},"fileName":{"type":"string","nullable":true,"description":"Name of attached file","example":"order_modification.jpg"},"fileSize":{"type":"number","nullable":true,"description":"Size of attached file in bytes","example":1024000},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata","example":{"orderId":"order_123","messageType":"modification_request","priority":"normal"}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to send messages in this chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/order/{order_id}":{"get":{"summary":"Get Order Chat","description":"Retrieve chat conversation associated with a specific order","tags":["Chat","Orders"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID to get chat for","example":"ORD-12345"}],"responses":{"200":{"description":"Order chat retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chat":{"type":"object","nullable":true,"description":"Chat conversation for the order","properties":{"_id":{"type":"string","description":"Chat ID","example":"j1234567890abcdef"},"participants":{"type":"array","items":{"type":"string"},"description":"User IDs participating in the chat","example":["j1234567890abcdef","j0987654321fedcba"]},"metadata":{"type":"object","properties":{"order_id":{"type":"string","example":"ORD-12345"}}},"createdAt":{"type":"number","description":"Chat creation timestamp","example":1640995200000},"lastMessageAt":{"type":"number","nullable":true,"description":"Last message timestamp","example":1640995200000}}},"order_id":{"type":"string","example":"ORD-12345"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order chat not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chat/order/{order_id}/messages":{"get":{"summary":"Get Order Chat Messages","description":"Retrieve all messages from the chat conversation associated with a specific order. This endpoint allows customers, chefs, and admins to view the complete message history for order-related communications.","tags":["Chat","Orders","Messages"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID to get chat messages for","example":"j1234567890abcdef"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":1000,"default":100},"description":"Maximum number of messages to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of messages to skip for pagination","example":0}],"responses":{"200":{"description":"Order chat messages retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chat_id":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"messages":{"type":"array","description":"Array of chat messages","items":{"type":"object","properties":{"message_id":{"type":"string","description":"Message ID","example":"msg_1234567890abcdef"},"sender_id":{"type":"string","description":"ID of the message sender","example":"j1234567890abcdef"},"content":{"type":"string","description":"Message content","example":"Thank you for the delicious meal!"},"created_at":{"type":"string","format":"date-time","description":"Message creation timestamp","example":"2024-01-15T14:30:00Z"},"is_read":{"type":"boolean","description":"Whether the message has been read","example":true},"file_url":{"type":"string","nullable":true,"description":"URL of attached file","example":"https://storage.example.com/file.pdf"},"file_type":{"type":"string","nullable":true,"description":"Type of attached file","example":"application/pdf"},"file_name":{"type":"string","nullable":true,"description":"Name of attached file","example":"receipt.pdf"},"file_size":{"type":"integer","nullable":true,"description":"Size of attached file in bytes","example":1024000},"metadata":{"type":"object","additionalProperties":true,"description":"Additional message metadata","example":{}}}}},"total_count":{"type":"integer","description":"Total number of messages in the chat","example":25}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized for this order chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat not found for order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chat/order/{order_id}/read":{"post":{"summary":"Mark Order Chat Messages as Read","description":"Mark all unread messages in an order-related chat conversation as read. This endpoint allows users to update their read status for order communications, clearing unread indicators and updating message status.","tags":["Chat","Orders","Read"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID to mark chat messages as read","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Order chat messages marked as read successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chat":{"type":"object","description":"Chat conversation details","properties":{"_id":{"type":"string","description":"Chat ID","example":"j1234567890abcdef"},"participants":{"type":"array","items":{"type":"string"},"description":"Chat participants","example":["user1","user2"]},"metadata":{"type":"object","additionalProperties":true,"description":"Chat metadata","example":{"order_id":"j1234567890abcdef","type":"order_chat"}}}},"messages":{"type":"array","description":"All messages in the chat","items":{"type":"object","properties":{"_id":{"type":"string","example":"msg_1234567890abcdef"},"senderId":{"type":"string","example":"j1234567890abcdef"},"content":{"type":"string","example":"Thank you for the delicious meal!"},"createdAt":{"type":"number","example":1705324800000},"isRead":{"type":"boolean","example":true},"metadata":{"type":"object","additionalProperties":true,"example":{}}}}},"total_count":{"type":"integer","description":"Total number of messages","example":25},"limit":{"type":"integer","description":"Message limit applied","example":100},"offset":{"type":"integer","description":"Message offset applied","example":0},"markedAsRead":{"type":"integer","description":"Number of messages marked as read","example":5}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized for this order chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat not found for order_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chat/messages":{"get":{"summary":"Get User Messages","description":"Retrieve all messages from all conversations for the authenticated user","tags":["Chat","Messaging"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of messages to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of messages to skip","example":0}],"responses":{"200":{"description":"Messages retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messages":{"type":"array","description":"Array of user messages from all conversations","items":{"type":"object","properties":{"_id":{"type":"string","description":"Message ID","example":"j1234567890abcdef"},"chatId":{"type":"string","description":"Conversation ID this message belongs to","example":"j1234567890abcdef"},"content":{"type":"string","description":"Message content","example":"Hello, how can I help you today?"},"senderId":{"type":"string","description":"User ID who sent the message","example":"j1234567890abcdef"},"messageType":{"type":"string","enum":["text","image","file","system","notification"],"description":"Type of message","example":"text"},"metadata":{"type":"object","nullable":true,"description":"Additional message metadata","example":{"fileUrl":"https://example.com/file.pdf","fileSize":1024}},"isRead":{"type":"boolean","description":"Whether the message has been read","example":true},"createdAt":{"type":"number","description":"Message creation timestamp","example":1640995200000},"updatedAt":{"type":"number","nullable":true,"description":"Last update timestamp","example":1640995200000}}}},"total_count":{"type":"number","description":"Total number of messages across all conversations","example":150},"limit":{"type":"number","example":20},"offset":{"type":"number","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/webhook":{"post":{"summary":"Chat Webhook Handler","description":"Handle webhook events from the chat system for message tracking and notifications","tags":["Webhooks","Chat"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type"],"properties":{"type":{"type":"string","description":"Event type","enum":["message.created","channel.created","user.created"],"example":"message.created"},"channelId":{"type":"string","description":"Channel ID (for message/channel events)","example":"j1234567890abcdef"},"messageId":{"type":"string","description":"Message ID (for message events)","example":"j1234567890abcdef"},"messageType":{"type":"string","description":"Type of message","enum":["user","ai","system"],"example":"ai"},"userId":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Channel or user name","example":"General Chat"},"email":{"type":"string","format":"email","description":"User email (for user events)","example":"user@example.com"},"createdBy":{"type":"string","description":"ID of user who created the channel","example":"j1234567890abcdef"}}}}}},"parameters":[{"in":"header","name":"x-webhook-signature","required":false,"schema":{"type":"string"},"description":"Webhook signature for verification","example":"sha256=abcdef1234567890"}],"responses":{"200":{"description":"Webhook processed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true}}}}}},"401":{"description":"Unauthorized - invalid webhook signature","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Invalid signature"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Internal server error"}}}}}}},"security":[]}},"/chat/conversations":{"get":{"summary":"Get User Conversations","description":"Retrieve paginated list of conversations for the authenticated user","tags":["Chat","Messaging"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of conversations to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of conversations to skip","example":0}],"responses":{"200":{"description":"Conversations retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"conversations":{"type":"array","description":"Array of user conversations","items":{"type":"object","properties":{"_id":{"type":"string","description":"Conversation ID","example":"j1234567890abcdef"},"participants":{"type":"array","items":{"type":"string"},"description":"User IDs participating in the conversation","example":["j1234567890abcdef","j0987654321fedcba"]},"lastMessage":{"type":"object","nullable":true,"description":"Last message in the conversation","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"content":{"type":"string","example":"Hello, how can I help you?"},"senderId":{"type":"string","example":"j1234567890abcdef"},"timestamp":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00.000Z"}}},"unreadCount":{"type":"number","description":"Number of unread messages for current user","example":3},"createdAt":{"type":"string","format":"date-time","description":"Conversation creation timestamp","example":"2024-01-15T09:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T10:30:00.000Z"}}}},"total":{"type":"number","description":"Total number of conversations","example":45},"limit":{"type":"number","example":20},"offset":{"type":"number","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}":{"delete":{"summary":"Delete Chat Conversation","description":"Delete a chat conversation and all its messages","tags":["Chat","Conversations"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Conversation deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"deleted":{"type":"boolean","example":true},"chatId":{"type":"string","example":"j1234567890abcdef"},"messagesDeleted":{"type":"number","description":"Number of messages deleted","example":15}}},"message":{"type":"string","example":"Conversation deleted successfully"}}}}}},"400":{"description":"Validation error - missing chat_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Conversation not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"summary":"Update Chat Conversation","description":"Update chat conversation settings (mute, archive, etc.)","tags":["Chat","Conversations"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"muted":{"type":"boolean","description":"Whether conversation is muted","example":true},"archived":{"type":"boolean","description":"Whether conversation is archived","example":false},"pinned":{"type":"boolean","description":"Whether conversation is pinned","example":true},"metadata":{"type":"object","nullable":true,"description":"Additional conversation metadata","example":{"theme":"dark","notifications":"all"}}}}}}},"responses":{"200":{"description":"Conversation updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","example":"j1234567890abcdef"},"updated":{"type":"object","properties":{"muted":{"type":"boolean","example":true},"archived":{"type":"boolean","example":false},"pinned":{"type":"boolean","example":true},"metadata":{"type":"object","example":{"theme":"dark","notifications":"all"}}}},"updatedAt":{"type":"string","format":"date-time","example":"2024-01-15T15:30:00.000Z"}}},"message":{"type":"string","example":"Conversation updated successfully"}}}}}},"400":{"description":"Validation error - missing chat_id or invalid JSON","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Conversation not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/chat/conversations/{chat_id}/leave":{"post":{"summary":"Leave Chat Conversation","description":"Leave a chat conversation. This endpoint allows users to voluntarily exit a chat conversation, removing themselves from the participant list. If the user is the last participant, the conversation may be deleted.","tags":["Chat","Conversations","Participation"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID to leave","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Successfully left the chat conversation","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"leftUserId":{"type":"string","description":"ID of the user who left","example":"j1234567890abcdef"},"leftAt":{"type":"string","format":"date-time","description":"Timestamp when user left","example":"2024-01-15T14:30:00Z"},"remainingParticipants":{"type":"array","items":{"type":"string"},"description":"List of remaining participant IDs","example":["user1","user2"]},"participantCount":{"type":"integer","description":"Number of remaining participants","example":2},"conversationDeleted":{"type":"boolean","description":"Whether the conversation was deleted (if last participant)","example":false},"newAdmin":{"type":"string","nullable":true,"description":"New admin if admin left and transferred rights","example":"user1"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing chat_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation not found or user not a participant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/upload":{"post":{"summary":"Generate File Upload URL for Chat","description":"Generate a secure upload URL for file attachments in chat conversations. This endpoint creates a presigned URL that allows users to upload files directly to Convex storage for sharing in chat conversations.","tags":["Chat","File Upload"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["fileName","contentType"],"properties":{"fileName":{"type":"string","description":"Name of the file to upload","example":"document.pdf"},"contentType":{"type":"string","description":"MIME type of the file","example":"application/pdf"},"fileSize":{"type":"integer","nullable":true,"description":"Size of the file in bytes","example":1024000},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional file metadata","example":{"description":"Important document","category":"document"}}}}}}},"responses":{"200":{"description":"Upload URL generated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"url":{"type":"string","description":"Presigned upload URL","example":"https://convex-storage.example.com/upload/..."},"objectKey":{"type":"string","description":"Unique object key for the file","example":"chat/j1234567890abcdef/u1234567890abcdef/uuid-document.pdf"},"storageType":{"type":"string","description":"Storage provider type","example":"convex"},"expiresAt":{"type":"string","format":"date-time","description":"URL expiration time","example":"2024-01-15T15:30:00Z"},"maxFileSize":{"type":"integer","description":"Maximum allowed file size in bytes","example":10485760}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing fileName or contentType","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized for this chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - failed to generate upload URL","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/remove":{"post":{"summary":"Remove Participant from Chat","description":"Remove a participant from a chat conversation. This endpoint allows chat administrators or authorized users to kick/remove other participants from the conversation, maintaining chat moderation and user management.","tags":["Chat","Conversations","Moderation"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["removeUserId"],"properties":{"removeUserId":{"type":"string","description":"ID of the user to remove from the chat","example":"j1234567890abcdef"},"reason":{"type":"string","nullable":true,"description":"Reason for removing the user","example":"Violation of chat rules"},"notifyUser":{"type":"boolean","default":true,"description":"Whether to notify the removed user","example":true}}}}}},"responses":{"200":{"description":"Participant removed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"removedUserId":{"type":"string","description":"ID of the removed user","example":"j1234567890abcdef"},"removedBy":{"type":"string","description":"ID of the user who performed the removal","example":"admin1234567890abcdef"},"removedAt":{"type":"string","format":"date-time","description":"Timestamp when user was removed","example":"2024-01-15T14:30:00Z"},"remainingParticipants":{"type":"array","items":{"type":"string"},"description":"List of remaining participant IDs","example":["user1","user2","admin"]},"participantCount":{"type":"integer","description":"Number of remaining participants","example":3},"notificationSent":{"type":"boolean","description":"Whether removal notification was sent","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing removeUserId or invalid chat_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to remove participants","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/messages":{"get":{"summary":"Get Chat Messages","description":"Retrieve paginated list of messages from a specific chat conversation. This endpoint allows users to fetch message history with support for pagination and real-time updates.","tags":["Chat","Messaging"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chat conversation","example":"j1234567890abcdef"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of messages to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of messages to skip","example":0}],"responses":{"200":{"description":"Messages retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messages":{"type":"array","description":"Array of chat messages","items":{"type":"object","properties":{"_id":{"type":"string","description":"Message ID","example":"msg_1234567890abcdef"},"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"senderId":{"type":"string","description":"ID of the user who sent the message","example":"j1234567890abcdef"},"content":{"type":"string","description":"Message content","example":"Hello, how can I help you?"},"fileUrl":{"type":"string","nullable":true,"description":"URL of attached file","example":"https://example.com/uploads/image.jpg"},"fileType":{"type":"string","nullable":true,"description":"Type of attached file","example":"image/jpeg"},"fileName":{"type":"string","nullable":true,"description":"Name of attached file","example":"attachment.jpg"},"fileSize":{"type":"number","nullable":true,"description":"Size of attached file in bytes","example":1024000},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional message metadata","example":{"orderId":"order_123","messageType":"text"}},"timestamp":{"type":"string","format":"date-time","description":"Message creation timestamp","example":"2024-01-15T14:30:00Z"},"editedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last edit timestamp","example":"2024-01-15T14:35:00Z"},"isDeleted":{"type":"boolean","description":"Whether the message is deleted","example":false}}}},"total":{"type":"number","description":"Total number of messages in the chat","example":150},"limit":{"type":"number","example":20},"offset":{"type":"number","example":0},"hasMore":{"type":"boolean","description":"Whether there are more messages to load","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing or invalid chat_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to view this chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]},"post":{"summary":"Send Message to Chat","description":"Send a new message to a specific chat conversation. This endpoint allows users to send text messages, file attachments, or both to an existing chat.","tags":["Chat","Messaging"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chat conversation","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"content":{"type":"string","description":"Message content/text","example":"Thank you for the quick response!"},"fileUrl":{"type":"string","nullable":true,"description":"URL of attached file","example":"https://example.com/uploads/document.pdf"},"fileType":{"type":"string","nullable":true,"description":"Type of attached file","example":"application/pdf"},"fileName":{"type":"string","nullable":true,"description":"Name of attached file","example":"receipt.pdf"},"fileSize":{"type":"number","nullable":true,"description":"Size of attached file in bytes","example":2048000},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata for the message","example":{"messageType":"confirmation","priority":"normal"}}}}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messageId":{"type":"string","description":"Unique identifier of the sent message","example":"msg_1234567890abcdef"},"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"senderId":{"type":"string","description":"ID of the user who sent the message","example":"j1234567890abcdef"},"content":{"type":"string","description":"Message content","example":"Thank you for the quick response!"},"timestamp":{"type":"string","format":"date-time","description":"Message creation timestamp","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to send messages in this chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]},"patch":{"summary":"Edit Message","description":"Edit an existing message in a chat conversation. This endpoint allows users to modify the content or metadata of their own messages.","tags":["Chat","Messaging"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chat conversation","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["messageId"],"properties":{"messageId":{"type":"string","description":"ID of the message to edit","example":"msg_1234567890abcdef"},"content":{"type":"string","nullable":true,"description":"Updated message content","example":"Thank you for the quick response! (edited)"},"fileUrl":{"type":"string","nullable":true,"description":"Updated file URL","example":"https://example.com/uploads/updated_document.pdf"},"fileType":{"type":"string","nullable":true,"description":"Updated file type","example":"application/pdf"},"fileName":{"type":"string","nullable":true,"description":"Updated file name","example":"updated_receipt.pdf"},"fileSize":{"type":"number","nullable":true,"description":"Updated file size in bytes","example":2048000},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Updated metadata","example":{"messageType":"confirmation","priority":"normal","edited":true}}}}}}},"responses":{"200":{"description":"Message edited successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messageId":{"type":"string","description":"ID of the edited message","example":"msg_1234567890abcdef"},"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"editedAt":{"type":"string","format":"date-time","description":"Timestamp when message was edited","example":"2024-01-15T14:35:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing messageId or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to edit this message","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Message not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]},"delete":{"summary":"Delete Message","description":"Delete a message from a chat conversation. This endpoint allows users to remove their own messages from the chat.","tags":["Chat","Messaging"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chat conversation","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["messageId"],"properties":{"messageId":{"type":"string","description":"ID of the message to delete","example":"msg_1234567890abcdef"}}}}}},"responses":{"200":{"description":"Message deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messageId":{"type":"string","description":"ID of the deleted message","example":"msg_1234567890abcdef"},"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"deletedAt":{"type":"string","format":"date-time","description":"Timestamp when message was deleted","example":"2024-01-15T14:40:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing messageId","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - user not authenticated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user not authorized to delete this message","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Message not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/messages/reaction":{"post":{"summary":"Add or Remove Message Reaction","description":"Add or remove an emoji reaction to a specific message in a chat conversation. This endpoint allows users to express their emotions and responses to messages through emoji reactions, enhancing communication and engagement.","tags":["Chat","Conversations","Messages","Reactions"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["messageId","emoji","action"],"properties":{"messageId":{"type":"string","description":"ID of the message to react to","example":"msg_1234567890abcdef"},"emoji":{"type":"string","description":"Emoji to add or remove","example":"👍"},"action":{"type":"string","enum":["add","remove"],"description":"Whether to add or remove the reaction","example":"add"},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional reaction metadata","example":{"deviceType":"mobile","timestamp":"2024-01-15T14:30:00Z"}}}}}}},"responses":{"200":{"description":"Message reaction updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"messageId":{"type":"string","description":"ID of the message that was reacted to","example":"msg_1234567890abcdef"},"emoji":{"type":"string","description":"Emoji that was added or removed","example":"👍"},"action":{"type":"string","enum":["add","remove"],"description":"Action that was performed","example":"add"},"userId":{"type":"string","description":"ID of the user who performed the reaction","example":"j1234567890abcdef"},"reactedAt":{"type":"string","format":"date-time","description":"Timestamp when the reaction was added/removed","example":"2024-01-15T14:30:00Z"},"reactionCount":{"type":"integer","description":"Total number of reactions on this message","example":5},"emojiCount":{"type":"integer","description":"Number of reactions with this specific emoji","example":3},"allReactions":{"type":"object","nullable":true,"description":"All reactions on the message grouped by emoji","properties":{"👍":{"type":"integer","example":3},"❤️":{"type":"integer","example":2},"😂":{"type":"integer","example":1}}},"userReactions":{"type":"array","nullable":true,"description":"Reactions added by the current user","items":{"type":"string"},"example":["👍","❤️"]}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid action","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation or message not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/messages/pin":{"post":{"summary":"Pin or Unpin Chat Message","description":"Pin or unpin a specific message in a chat conversation. This endpoint allows users to mark important messages as pinned for easy reference, or unpin previously pinned messages. Pinned messages are typically displayed at the top of the conversation.","tags":["Chat","Conversations","Messages","Pin"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["messageId","pin"],"properties":{"messageId":{"type":"string","description":"ID of the message to pin or unpin","example":"msg_1234567890abcdef"},"pin":{"type":"boolean","description":"Whether to pin (true) or unpin (false) the message","example":true},"reason":{"type":"string","nullable":true,"description":"Reason for pinning/unpinning the message","example":"Important announcement"}}}}}},"responses":{"200":{"description":"Message pin status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"messageId":{"type":"string","description":"ID of the message that was pinned/unpinned","example":"msg_1234567890abcdef"},"pinned":{"type":"boolean","description":"Current pin status of the message","example":true},"pinnedBy":{"type":"string","description":"ID of the user who performed the pin action","example":"j1234567890abcdef"},"pinnedAt":{"type":"string","format":"date-time","description":"Timestamp when the message was pinned/unpinned","example":"2024-01-15T14:30:00Z"},"reason":{"type":"string","nullable":true,"description":"Reason for pinning/unpinning","example":"Important announcement"},"pinnedMessagesCount":{"type":"integer","description":"Total number of pinned messages in the conversation","example":3},"messageContent":{"type":"string","nullable":true,"description":"Content of the pinned message","example":"Welcome to our cooking session!"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing messageId or invalid pin value","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to pin messages","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation or message not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/messages/read":{"post":{"summary":"Mark Chat Messages as Read","description":"Mark all unread messages in a chat conversation as read for the authenticated user. This endpoint allows users to update their read status for messages in a specific conversation, clearing unread indicators and updating message status.","tags":["Chat","Conversations","Messages","Read"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Messages marked as read successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"ID of the user who marked messages as read","example":"j1234567890abcdef"},"markedAt":{"type":"string","format":"date-time","description":"Timestamp when messages were marked as read","example":"2024-01-15T14:30:00Z"},"messagesMarked":{"type":"integer","description":"Number of messages marked as read","example":5},"totalMessages":{"type":"integer","description":"Total number of messages in the conversation","example":25},"unreadCount":{"type":"integer","description":"Remaining unread messages count","example":0},"lastReadMessageId":{"type":"string","nullable":true,"description":"ID of the last read message","example":"msg_1234567890abcdef"},"readStatus":{"type":"object","nullable":true,"description":"Detailed read status information","properties":{"allRead":{"type":"boolean","example":true},"readPercentage":{"type":"number","example":100},"oldestUnread":{"type":"string","format":"date-time","nullable":true,"example":null}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing chat_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation not found or user not a participant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/chat/conversations/{chat_id}/admin":{"post":{"summary":"Transfer Chat Admin Rights","description":"Transfer administrative rights for a chat conversation to another participant. This endpoint allows current chat administrators to transfer their admin privileges to another user in the conversation.","tags":["Chat","Conversations","Admin"],"parameters":[{"in":"path","name":"chat_id","required":true,"schema":{"type":"string"},"description":"Chat conversation ID","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["newAdminId"],"properties":{"newAdminId":{"type":"string","description":"ID of the user to transfer admin rights to","example":"j1234567890abcdef"},"reason":{"type":"string","nullable":true,"description":"Reason for transferring admin rights","example":"Stepping down as admin"},"notifyParticipants":{"type":"boolean","default":true,"description":"Whether to notify all participants about the admin change","example":true}}}}}},"responses":{"200":{"description":"Admin rights transferred successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chatId":{"type":"string","description":"Chat conversation ID","example":"j1234567890abcdef"},"previousAdminId":{"type":"string","description":"ID of the previous admin","example":"admin1234567890abcdef"},"newAdminId":{"type":"string","description":"ID of the new admin","example":"j1234567890abcdef"},"transferredAt":{"type":"string","format":"date-time","description":"Timestamp when admin rights were transferred","example":"2024-01-15T14:30:00Z"},"reason":{"type":"string","nullable":true,"description":"Reason for the transfer","example":"Stepping down as admin"},"participantsNotified":{"type":"integer","description":"Number of participants notified","example":5},"adminPermissions":{"type":"array","items":{"type":"string"},"description":"List of admin permissions transferred","example":["remove_participants","manage_settings","moderate_messages"]}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing newAdminId or invalid chat_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to transfer admin rights","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chat conversation not found or new admin not a participant","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/csrf":{"get":{"summary":"Get CSRF Token","description":"Generate and return a CSRF token for form protection","tags":["System"],"responses":{"200":{"description":"CSRF token generated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"csrfToken":{"type":"string","format":"uuid","description":"Generated CSRF token","example":"123e4567-e89b-12d3-a456-426614174000"}}},"message":{"type":"string","example":"Success"}}}}},"headers":{"Set-Cookie":{"description":"CSRF token cookie","schema":{"type":"string","example":"csrf_token=123e4567-e89b-12d3-a456-426614174000; Path=/; Max-Age=3600; SameSite=Lax"}}}}},"security":[]}},"/functions/updateLiveSessionLocation":{"put":{"summary":"Update Live Session Location","description":"Update the location of an existing live session","tags":["Live Streaming"],"parameters":[{"in":"path","name":"sessionId","required":true,"schema":{"type":"string"},"description":"The ID of the live session to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["latitude","longitude"],"properties":{"latitude":{"type":"number","minimum":-90,"maximum":90,"description":"Latitude coordinate","example":51.5074},"longitude":{"type":"number","minimum":-180,"maximum":180,"description":"Longitude coordinate","example":-0.1276},"city":{"type":"string","description":"City name","example":"London"},"address":{"type":"string","description":"Human-readable address","example":"123 Baker Street, London"},"radius":{"type":"number","minimum":1,"maximum":100,"description":"Delivery radius in kilometers","example":10}}}}}},"responses":{"200":{"description":"Location updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"sessionId":{"type":"string","example":"j1234567890abcdef"},"location":{"type":"object","properties":{"city":{"type":"string","example":"London"},"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]},"address":{"type":"string","example":"123 Baker Street, London"},"radius":{"type":"number","example":10}}}}},"message":{"type":"string","example":"Session location updated successfully"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/getViewerToken":{"post":{"summary":"Get Viewer Token for Live Stream","description":"Generate a secure viewer token for accessing a live streaming session. This endpoint provides authentication tokens that allow viewers to join live cooking sessions with proper access control and session management.","tags":["Live Streaming","Functions","Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["sessionId"],"properties":{"sessionId":{"type":"string","description":"Live session ID to get viewer token for","example":"j1234567890abcdef"},"userId":{"type":"string","nullable":true,"description":"User ID requesting the token (optional for anonymous viewing)","example":"j1234567890abcdef"},"deviceInfo":{"type":"object","nullable":true,"description":"Device information for token generation","properties":{"deviceType":{"type":"string","enum":["desktop","mobile","tablet"],"example":"mobile"},"browser":{"type":"string","example":"Chrome"},"os":{"type":"string","example":"iOS"}}},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata for token generation","example":{"location":"New York, NY","timezone":"America/New_York"}}}}}}},"responses":{"200":{"description":"Viewer token generated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"token":{"type":"string","description":"Secure viewer token for live session access","example":"viewer_token_j1234567890abcdef_1705324800000"},"sessionId":{"type":"string","description":"Live session ID","example":"j1234567890abcdef"},"expiresAt":{"type":"string","format":"date-time","description":"Token expiration timestamp","example":"2024-01-16T14:30:00Z"},"tokenType":{"type":"string","description":"Type of token generated","example":"viewer_access"},"permissions":{"type":"array","description":"Permissions granted by this token","items":{"type":"string"},"example":["view_stream","send_reactions","chat"]},"sessionInfo":{"type":"object","nullable":true,"description":"Live session information","properties":{"sessionTitle":{"type":"string","example":"Italian Cooking Masterclass"},"chefName":{"type":"string","example":"Chef Maria Rodriguez"},"status":{"type":"string","enum":["starting","live","ended"],"example":"live"},"viewerCount":{"type":"integer","example":25},"maxViewers":{"type":"integer","nullable":true,"example":100}}},"generatedAt":{"type":"string","format":"date-time","description":"Token generation timestamp","example":"2024-01-15T14:30:00Z"},"refreshToken":{"type":"string","nullable":true,"description":"Refresh token for extending session","example":"refresh_token_1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing sessionId","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - authentication required for private sessions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - session access denied","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"429":{"description":"Too many requests - rate limit exceeded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - token generation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/getViewerPresence":{"post":{"summary":"Track Viewer Presence in Live Stream","description":"Track viewer presence in live streaming channels. This endpoint manages real-time viewer count and presence tracking for live cooking sessions, allowing viewers to join/leave channels and providing accurate viewer statistics.","tags":["Live Streaming","Functions","Presence"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["channelName","action","userId"],"properties":{"channelName":{"type":"string","description":"Live streaming channel name","example":"chef-maria-cooking"},"action":{"type":"string","enum":["join","leave"],"description":"Action to perform (join or leave channel)","example":"join"},"userId":{"type":"string","description":"ID of the user performing the action","example":"j1234567890abcdef"},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional presence metadata","example":{"deviceType":"mobile","location":"New York, NY","connectionType":"wifi"}}}}}}},"responses":{"200":{"description":"Viewer presence updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"channelName":{"type":"string","description":"Channel name","example":"chef-maria-cooking"},"viewerCount":{"type":"integer","description":"Current number of viewers in the channel","example":25},"action":{"type":"string","enum":["join","leave"],"description":"Action that was performed","example":"join"},"userId":{"type":"string","description":"User ID who performed the action","example":"j1234567890abcdef"},"timestamp":{"type":"string","format":"date-time","description":"Timestamp of the presence update","example":"2024-01-15T14:30:00Z"},"presenceData":{"type":"object","nullable":true,"description":"Additional presence data","properties":{"activeViewers":{"type":"array","items":{"type":"string"},"description":"List of active viewer IDs","example":["user1","user2","user3"]},"joinTime":{"type":"string","format":"date-time","nullable":true,"description":"When the user joined (for join actions)","example":"2024-01-15T14:30:00Z"},"sessionDuration":{"type":"integer","nullable":true,"description":"Session duration in seconds (for leave actions)","example":1800}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - failed to track presence","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/functions/orderFromLive":{"post":{"summary":"Create Order from Live Session","description":"Create a real order from a live streaming session when a customer places an order during the stream","tags":["Orders","Live Streaming"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["channelName","userId","orderData","sessionId"],"properties":{"channelName":{"type":"string","description":"Live streaming channel name","example":"chef-mario-cooking"},"userId":{"type":"string","description":"Customer user ID placing the order","example":"user_123"},"sessionId":{"type":"string","description":"Live streaming session ID","example":"session_456"},"orderData":{"type":"object","description":"Order details","required":["items","deliveryAddress","paymentMethod"],"properties":{"items":{"type":"array","description":"Array of items being ordered","items":{"type":"object","properties":{"menuItemId":{"type":"string","example":"dish_789"},"name":{"type":"string","example":"Spicy Tacos"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":12.5},"specialRequests":{"type":"string","nullable":true,"example":"Extra spicy"}}}},"specialInstructions":{"type":"string","nullable":true,"description":"Special instructions for the order","example":"Please deliver to the back door"},"deliveryAddress":{"type":"object","description":"Delivery address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"New York"},"state":{"type":"string","example":"NY"},"zipCode":{"type":"string","example":"10001"},"phoneNumber":{"type":"string","example":"+1-555-123-4567"}}},"paymentMethod":{"type":"string","enum":["credit_card","debit_card","paypal","apple_pay","google_pay"],"description":"Payment method","example":"credit_card"}}}}}}}},"responses":{"200":{"description":"Order created successfully from live session","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","description":"Created order ID","example":"order_123"},"sessionId":{"type":"string","description":"Live session ID","example":"session_456"},"userId":{"type":"string","description":"Customer user ID","example":"user_123"},"status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered"],"description":"Order status","example":"pending"},"totalAmount":{"type":"number","description":"Total order amount","example":25},"estimatedPrepTime":{"type":"number","description":"Estimated preparation time in minutes","example":30},"createdAt":{"type":"string","format":"date-time","description":"Order creation timestamp","example":"2024-01-15T10:30:00Z"},"items":{"type":"array","description":"Order items","items":{"type":"object","properties":{"menuItemId":{"type":"string","example":"dish_789"},"name":{"type":"string","example":"Spicy Tacos"},"quantity":{"type":"number","example":2},"price":{"type":"number","example":12.5}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/functions/moderation":{"get":{"summary":"Get moderation functions","description":"Get available moderation functions and current moderation status","tags":["Functions"],"responses":{"200":{"description":"Moderation functions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"availableFunctions":{"type":"array","items":{"type":"string"}},"activeModerators":{"type":"number"},"pendingReports":{"type":"number"},"moderationStats":{"type":"object"}}}}}}}},"500":{"description":"Internal server error"}}}},"/api/functions/moderation/muteUser":{"post":{"summary":"Mute user in live chat","description":"Temporarily mute a user in a live chat channel","tags":["Moderation"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["channelName","userId","duration","reason"],"properties":{"channelName":{"type":"string","description":"Name of the channel"},"userId":{"type":"string","description":"ID of the user to mute"},"duration":{"type":"number","description":"Mute duration in minutes"},"reason":{"type":"string","description":"Reason for muting"},"moderatorId":{"type":"string","description":"ID of the moderator"}}}}}},"responses":{"200":{"description":"User muted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"User user-id muted for 30 minutes in channel channel-name"},"reason":{"type":"string"},"moderatorId":{"type":"string"},"mutedAt":{"type":"string","format":"date-time"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing required fields"},"500":{"description":"Internal server error"}},"security":[]}},"/api/functions/moderation/reportUser":{"post":{"summary":"Report user","description":"Report a user for moderation in a live chat channel","tags":["Moderation"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["channelName","reason"],"properties":{"channelName":{"type":"string","description":"Name of the channel"},"reason":{"type":"string","description":"Reason for reporting"},"additionalDetails":{"type":"string","description":"Additional details about the report"},"reporterId":{"type":"string","description":"ID of the user making the report"}}}}}},"responses":{"200":{"description":"User reported successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"User reported in channel channel-name"},"reason":{"type":"string"},"additionalDetails":{"type":"string"},"reporterId":{"type":"string"},"reportedAt":{"type":"string","format":"date-time"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing required fields"},"500":{"description":"Internal server error"}},"security":[]}},"/functions/getLiveSession":{"get":{"summary":"Get Live Session by ID","description":"Retrieve a specific live session by its session ID","tags":["Live Streaming"],"parameters":[{"in":"query","name":"sessionId","required":true,"schema":{"type":"string"},"description":"The session ID to retrieve","example":"live-1640995200000"}],"responses":{"200":{"description":"Live session retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"session_id":{"type":"string","example":"live-1640995200000"},"chef_id":{"type":"string","example":"j1234567890abcdef"},"title":{"type":"string","example":"Cooking Authentic Italian Pasta"},"description":{"type":"string","example":"Join me as I prepare traditional Italian pasta"},"status":{"type":"string","enum":["scheduled","starting","live","ended","cancelled"],"example":"live"},"location":{"type":"object","nullable":true,"properties":{"city":{"type":"string","example":"London"},"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]},"address":{"type":"string","example":"123 Baker Street, London"},"radius":{"type":"number","example":10}}},"viewerCount":{"type":"number","example":15},"chatEnabled":{"type":"boolean","example":true},"tags":{"type":"array","items":{"type":"string"},"example":["italian","pasta","cooking"]},"_creationTime":{"type":"number","example":1640995200000}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/endLiveSession":{"post":{"summary":"End Live Streaming Session","description":"End an active live streaming session. This endpoint allows chefs or administrators to terminate a live cooking session, automatically handling cleanup, notifications, and session analytics.","tags":["Live Streaming","Functions"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["sessionId"],"properties":{"sessionId":{"type":"string","description":"ID of the live session to end","example":"j1234567890abcdef"},"reason":{"type":"string","nullable":true,"description":"Reason for ending the session","example":"Session completed successfully"},"notifyViewers":{"type":"boolean","default":true,"description":"Whether to notify viewers about session end","example":true},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional session end metadata","example":{"finalViewerCount":25,"sessionDuration":3600,"ordersPlaced":3}}}}}}},"responses":{"200":{"description":"Live session ended successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"sessionId":{"type":"string","description":"ID of the ended session","example":"j1234567890abcdef"},"status":{"type":"string","enum":["ended","completed","terminated"],"description":"Final session status","example":"ended"},"endedAt":{"type":"string","format":"date-time","description":"Timestamp when session was ended","example":"2024-01-15T15:30:00Z"},"sessionDuration":{"type":"integer","nullable":true,"description":"Total session duration in seconds","example":3600},"finalViewerCount":{"type":"integer","nullable":true,"description":"Number of viewers when session ended","example":25},"totalReactions":{"type":"integer","nullable":true,"description":"Total reactions received during session","example":150},"ordersPlaced":{"type":"integer","nullable":true,"description":"Number of orders placed during session","example":3},"revenue":{"type":"number","nullable":true,"description":"Revenue generated during session","example":125.5},"notificationsSent":{"type":"integer","nullable":true,"description":"Number of notifications sent to viewers","example":25},"cleanupCompleted":{"type":"boolean","description":"Whether session cleanup was completed","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing sessionId or invalid session","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - session already ended","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - failed to end session","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/functions/admin":{"get":{"summary":"Get admin functions","description":"Get available admin functions and system status","tags":["Functions"],"responses":{"200":{"description":"Admin functions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"availableFunctions":{"type":"array","items":{"type":"string"}},"systemStatus":{"type":"object"},"liveSessionStats":{"type":"object"},"adminStats":{"type":"object"}}}}}}}},"500":{"description":"Internal server error"}}}},"/functions/admin/getLiveSessionStats":{"post":{"summary":"Get Live Session Statistics (Admin)","description":"Retrieve detailed statistics for live streaming sessions within a specified time range. This endpoint provides comprehensive analytics about session performance, viewer engagement, and streaming metrics for administrative oversight.","tags":["Admin","Live Streaming","Analytics"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"channelName":{"type":"string","description":"Specific channel name to get stats for (optional)","example":"chef_mario_cooking"},"timeRange":{"type":"string","enum":["1h","24h","7d","30d"],"description":"Time range for statistics aggregation","example":"24h"}}}}}},"responses":{"200":{"description":"Live session statistics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"totalSessions":{"type":"number","description":"Total number of sessions in the time range","example":25},"activeSessions":{"type":"number","description":"Number of currently active sessions","example":3},"totalViewers":{"type":"number","description":"Total unique viewers across all sessions","example":1250},"averageViewersPerSession":{"type":"number","description":"Average number of viewers per session","example":50},"totalDuration":{"type":"number","description":"Total streaming duration in minutes","example":1200},"averageSessionDuration":{"type":"number","description":"Average session duration in minutes","example":48},"peakViewers":{"type":"number","description":"Peak concurrent viewers across all sessions","example":150},"engagementMetrics":{"type":"object","properties":{"totalComments":{"type":"number","description":"Total comments across all sessions","example":500},"totalReactions":{"type":"number","description":"Total reactions across all sessions","example":1200},"totalOrders":{"type":"number","description":"Total orders placed during live sessions","example":45},"conversionRate":{"type":"number","description":"Order conversion rate (orders per viewer)","example":0.036}}},"topPerformingSessions":{"type":"array","description":"Top performing sessions by viewer count","items":{"type":"object","properties":{"sessionId":{"type":"string","description":"Session ID","example":"session_123"},"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"peakViewers":{"type":"number","description":"Peak viewers for this session","example":75},"duration":{"type":"number","description":"Session duration in minutes","example":60},"ordersPlaced":{"type":"number","description":"Orders placed during this session","example":8}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid time range or missing parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/admin/getLiveReports":{"post":{"summary":"Get Live Session Reports (Admin)","description":"Retrieve detailed reports for live streaming sessions with optional filtering by status and channel. This endpoint provides comprehensive reporting data for administrative oversight and compliance monitoring.","tags":["Admin","Live Streaming","Reports"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["active","ended","paused","reported","flagged"],"description":"Filter reports by session status","example":"ended"},"channelName":{"type":"string","description":"Filter reports by specific channel name","example":"chef_mario_cooking"},"dateRange":{"type":"object","properties":{"start":{"type":"string","format":"date-time","description":"Start date for report filtering","example":"2024-01-01T00:00:00Z"},"end":{"type":"string","format":"date-time","description":"End date for report filtering","example":"2024-01-31T23:59:59Z"}}}}}}}},"responses":{"200":{"description":"Live session reports retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of live session reports","items":{"type":"object","properties":{"reportId":{"type":"string","description":"Unique report identifier","example":"report_123"},"sessionId":{"type":"string","description":"Associated live session ID","example":"session_456"},"chefId":{"type":"string","description":"Chef ID who hosted the session","example":"j1234567890abcdef"},"channelName":{"type":"string","description":"Channel name for the session","example":"chef_mario_cooking"},"status":{"type":"string","enum":["active","ended","paused","reported","flagged"],"description":"Current session status","example":"ended"},"reportType":{"type":"string","enum":["automated","manual","user_report","system_flag"],"description":"Type of report generated","example":"automated"},"reportReason":{"type":"string","description":"Reason for the report","example":"Content policy violation"},"severity":{"type":"string","enum":["low","medium","high","critical"],"description":"Severity level of the report","example":"medium"},"reportedBy":{"type":"string","nullable":true,"description":"User ID who reported (if manual report)","example":"j0987654321fedcba"},"createdAt":{"type":"string","format":"date-time","description":"Report creation timestamp","example":"2024-01-15T14:30:00Z"},"sessionDetails":{"type":"object","properties":{"startTime":{"type":"string","format":"date-time","description":"Session start time","example":"2024-01-15T10:00:00Z"},"endTime":{"type":"string","format":"date-time","nullable":true,"description":"Session end time","example":"2024-01-15T12:00:00Z"},"peakViewers":{"type":"number","description":"Peak concurrent viewers","example":75},"totalViewers":{"type":"number","description":"Total unique viewers","example":150},"duration":{"type":"number","description":"Session duration in minutes","example":120}}},"flaggedContent":{"type":"array","description":"Specific content that was flagged","items":{"type":"object","properties":{"type":{"type":"string","enum":["comment","reaction","video_content","audio_content"],"description":"Type of flagged content","example":"comment"},"content":{"type":"string","description":"The flagged content","example":"Inappropriate language detected"},"timestamp":{"type":"number","description":"When the content was flagged (seconds into stream)","example":1800}}}},"actions":{"type":"array","description":"Actions taken based on the report","items":{"type":"object","properties":{"action":{"type":"string","enum":["warning_sent","session_ended","user_muted","content_removed","no_action"],"description":"Action taken","example":"warning_sent"},"takenBy":{"type":"string","description":"Admin user ID who took the action","example":"j1122334455fedcba"},"timestamp":{"type":"string","format":"date-time","description":"When the action was taken","example":"2024-01-15T14:35:00Z"}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid status or date range","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/admin/muteLiveChatUser":{"post":{"summary":"Mute Live Chat User (Admin)","description":"Moderate a user in live chat by muting, deleting messages, or taking other moderation actions","tags":["Admin","Live Streaming","Moderation"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["sessionId","messageIndex","action","reason","adminId"],"properties":{"sessionId":{"type":"string","description":"Live streaming session ID","example":"session_123"},"messageIndex":{"type":"number","description":"Index of the message to moderate","example":5},"action":{"type":"string","enum":["mute","delete","warn","ban"],"description":"Moderation action to take","example":"mute"},"reason":{"type":"string","description":"Reason for moderation action","example":"Inappropriate language"},"adminId":{"type":"string","description":"Admin user ID performing the action","example":"admin_456"}}}}}},"responses":{"200":{"description":"User moderated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","description":"Success message","example":"User muted successfully"},"result":{"type":"object","description":"Result of the moderation action","properties":{"moderated":{"type":"boolean","example":true},"action":{"type":"string","example":"delete"},"reason":{"type":"string","example":"Inappropriate language"},"moderatedBy":{"type":"string","example":"admin_456"},"timestamp":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can moderate chat","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/functions/admin/forceEndLiveSession":{"post":{"summary":"Force End Live Session (Admin)","description":"Immediately terminate a live streaming session for administrative purposes. This endpoint allows administrators to end sessions due to policy violations, technical issues, or other administrative reasons. The action is logged for audit purposes.","tags":["Admin","Live Streaming","Moderation"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["channelName","reason"],"properties":{"channelName":{"type":"string","description":"Channel name or session ID to terminate","example":"chef_mario_cooking"},"reason":{"type":"string","description":"Administrative reason for ending the session","example":"Content policy violation - inappropriate language"},"adminId":{"type":"string","description":"Admin user ID performing the action (auto-populated from auth)","example":"j1234567890abcdef"},"notifyChef":{"type":"boolean","default":true,"description":"Whether to notify the chef about the session termination","example":true},"notifyViewers":{"type":"boolean","default":true,"description":"Whether to notify viewers about the session termination","example":true},"metadata":{"type":"object","additionalProperties":true,"description":"Additional metadata for audit purposes","example":{"violationType":"language","severity":"high","previousWarnings":2}}}}}}},"responses":{"200":{"description":"Live session terminated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"sessionId":{"type":"string","description":"ID of the terminated session","example":"session_123"},"channelName":{"type":"string","description":"Channel name that was terminated","example":"chef_mario_cooking"},"chefId":{"type":"string","description":"Chef ID whose session was terminated","example":"j0987654321fedcba"},"terminatedAt":{"type":"string","format":"date-time","description":"Timestamp when session was terminated","example":"2024-01-15T14:30:00Z"},"reason":{"type":"string","description":"Reason provided for termination","example":"Content policy violation - inappropriate language"},"adminId":{"type":"string","description":"Admin ID who performed the termination","example":"j1234567890abcdef"},"sessionDuration":{"type":"number","description":"Duration of session before termination (minutes)","example":45},"finalViewerCount":{"type":"number","description":"Number of viewers when session was terminated","example":25},"notificationsSent":{"type":"object","properties":{"chefNotified":{"type":"boolean","description":"Whether chef was notified","example":true},"viewersNotified":{"type":"boolean","description":"Whether viewers were notified","example":true},"notificationCount":{"type":"number","description":"Number of notifications sent","example":26}}}}},"message":{"type":"string","example":"Live session terminated successfully"}}}}}},"400":{"description":"Bad request - missing required fields or invalid channel name","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Live session not found or already ended","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/functions/admin/getAllLiveSessions":{"get":{"summary":"Get All Live Sessions (Admin)","description":"Retrieve all live streaming sessions with optional filtering by status and chef. This endpoint provides comprehensive access to live session data for administrative monitoring and management.","tags":["Admin","Live Streaming"],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["active","ended","paused","scheduled"]},"description":"Filter sessions by status","example":"active"},{"in":"query","name":"chefId","schema":{"type":"string"},"description":"Filter sessions by specific chef ID","example":"j1234567890abcdef"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Maximum number of sessions to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of sessions to skip for pagination","example":0}],"responses":{"200":{"description":"Live sessions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of live session objects","items":{"type":"object","properties":{"sessionId":{"type":"string","description":"Unique session identifier","example":"session_123"},"chefId":{"type":"string","description":"Chef ID who is hosting the session","example":"j1234567890abcdef"},"chefName":{"type":"string","description":"Chef's display name","example":"Chef Mario"},"channelName":{"type":"string","description":"Channel name for the live stream","example":"chef_mario_cooking"},"title":{"type":"string","description":"Session title","example":"Authentic Italian Pasta Making"},"description":{"type":"string","description":"Session description","example":"Learn to make traditional Italian pasta from scratch"},"status":{"type":"string","enum":["active","ended","paused","scheduled"],"description":"Current session status","example":"active"},"startTime":{"type":"string","format":"date-time","description":"Session start time","example":"2024-01-15T10:00:00Z"},"endTime":{"type":"string","format":"date-time","nullable":true,"description":"Session end time (if ended)","example":"2024-01-15T12:00:00Z"},"scheduledTime":{"type":"string","format":"date-time","nullable":true,"description":"Scheduled start time (if scheduled)","example":"2024-01-15T15:00:00Z"},"currentViewers":{"type":"number","description":"Current number of viewers","example":25},"peakViewers":{"type":"number","description":"Peak concurrent viewers","example":75},"totalViewers":{"type":"number","description":"Total unique viewers","example":150},"duration":{"type":"number","description":"Session duration in minutes","example":120},"thumbnailUrl":{"type":"string","nullable":true,"description":"Session thumbnail image URL","example":"https://example.com/thumbnails/session_123.jpg"},"streamUrl":{"type":"string","nullable":true,"description":"Live stream URL","example":"https://stream.example.com/live/session_123"},"tags":{"type":"array","items":{"type":"string"},"description":"Session tags/categories","example":["italian","pasta","cooking"]},"cuisine":{"type":"string","description":"Primary cuisine type","example":"Italian"},"difficulty":{"type":"string","enum":["beginner","intermediate","advanced"],"description":"Cooking difficulty level","example":"intermediate"},"estimatedDuration":{"type":"number","description":"Estimated session duration in minutes","example":90},"ingredients":{"type":"array","items":{"type":"string"},"description":"Required ingredients","example":["flour","eggs","tomatoes","basil"]},"equipment":{"type":"array","items":{"type":"string"},"description":"Required cooking equipment","example":["pasta machine","large pot","wooden spoon"]},"ordersPlaced":{"type":"number","description":"Number of orders placed during this session","example":8},"revenue":{"type":"number","description":"Revenue generated from this session","example":120.5},"chatEnabled":{"type":"boolean","description":"Whether chat is enabled for this session","example":true},"reactionsEnabled":{"type":"boolean","description":"Whether reactions are enabled","example":true},"recordingEnabled":{"type":"boolean","description":"Whether the session is being recorded","example":false},"createdAt":{"type":"string","format":"date-time","description":"Session creation timestamp","example":"2024-01-15T09:30:00Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T11:45:00Z"}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/api/functions/reportLiveSession":{"post":{"summary":"Report live session","description":"Report a live streaming session for moderation review","tags":["Live Streaming Functions"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["channelName","reason"],"properties":{"channelName":{"type":"string","description":"Name of the channel/session to report"},"reason":{"type":"string","description":"Reason for reporting"},"additionalDetails":{"type":"string","description":"Additional details about the report"},"reporterId":{"type":"string","description":"ID of the user making the report"}}}}}},"responses":{"200":{"description":"Session reported successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Live session reported: channel-name"},"reason":{"type":"string"},"additionalDetails":{"type":"string"},"reporterId":{"type":"string"},"reportedAt":{"type":"string","format":"date-time"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing required fields"},"500":{"description":"Internal server error"}},"security":[]}},"/functions/getNearbyLiveSessions":{"post":{"summary":"Get Nearby Live Sessions","description":"Retrieve live sessions within a specified radius of the user's location","tags":["Live Streaming"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["latitude","longitude"],"properties":{"latitude":{"type":"number","minimum":-90,"maximum":90,"description":"User's latitude coordinate","example":51.5074},"longitude":{"type":"number","minimum":-180,"maximum":180,"description":"User's longitude coordinate","example":-0.1276},"maxDistanceKm":{"type":"number","minimum":1,"maximum":500,"default":50,"description":"Maximum distance in kilometers to search for sessions","example":25}}}}}},"responses":{"200":{"description":"Nearby live sessions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","items":{"type":"object","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"channelName":{"type":"string","example":"live-1640995200000"},"chefId":{"type":"string","example":"j1234567890abcdef"},"title":{"type":"string","example":"Cooking Authentic Italian Pasta"},"description":{"type":"string","example":"Join me as I prepare traditional Italian pasta"},"distance":{"type":"number","description":"Distance from user in kilometers","example":2.5},"location":{"type":"object","properties":{"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]}}},"isActive":{"type":"boolean","example":true},"viewerCount":{"type":"number","example":15},"tags":{"type":"array","items":{"type":"string"},"example":["italian","pasta","cooking"]}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/startLiveSession":{"post":{"summary":"Start Live Session","description":"Start a new live cooking session for a specific meal","tags":["Live Streaming"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","description","mealId"],"properties":{"title":{"type":"string","description":"Title of the live session","example":"Cooking Authentic Italian Pasta"},"description":{"type":"string","description":"Description of what will be cooked","example":"Join me as I prepare traditional Italian pasta from scratch"},"mealId":{"type":"string","description":"ID of the meal being prepared","example":"j1234567890abcdef"},"location":{"type":"object","nullable":true,"description":"Location information for the session","properties":{"coordinates":{"type":"array","items":{"type":"number"},"minItems":2,"maxItems":2,"description":"[longitude, latitude] coordinates","example":[-0.1276,51.5074]},"address":{"type":"string","nullable":true,"description":"Human-readable address","example":"123 Baker Street, London"}}},"tags":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Tags for categorizing the session","example":["italian","pasta","cooking","live"]}}}}}},"responses":{"200":{"description":"Live session started successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"sessionId":{"type":"string","description":"Unique session ID","example":"j1234567890abcdef"},"title":{"type":"string","example":"Cooking Authentic Italian Pasta"},"description":{"type":"string","example":"Join me as I prepare traditional Italian pasta from scratch"},"mealId":{"type":"string","example":"j1234567890abcdef"},"channelName":{"type":"string","description":"Streaming channel name","example":"live-1640995200000"},"chefId":{"type":"string","description":"Chef ID who started the session","example":"j1234567890abcdef"},"status":{"type":"string","enum":["starting","live","ended"],"description":"Current session status","example":"starting"},"tags":{"type":"array","items":{"type":"string"},"example":["italian","pasta","cooking","live"]},"createdAt":{"type":"number","description":"Session creation timestamp","example":1640995200000}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/functions/getLiveOrdersForChef":{"get":{"summary":"Get Live Orders for Chef","description":"Retrieve all live orders associated with the authenticated chef. This endpoint provides chefs with real-time access to orders placed during their live streaming sessions, including order details, customer information, and status updates.","tags":["Live Streaming","Functions","Orders"],"responses":{"200":{"description":"Live orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orders":{"type":"array","description":"Array of live orders for the chef","items":{"type":"object","properties":{"orderId":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"customerId":{"type":"string","description":"Customer ID who placed the order","example":"j1234567890abcdef"},"customerName":{"type":"string","description":"Customer's display name","example":"John Doe"},"sessionId":{"type":"string","description":"Live session ID where order was placed","example":"session_1234567890abcdef"},"orderStatus":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","cancelled"],"description":"Current status of the order","example":"preparing"},"totalAmount":{"type":"number","description":"Total order amount","example":25.5},"items":{"type":"array","description":"Order items","items":{"type":"object","properties":{"itemId":{"type":"string","example":"item_1234567890abcdef"},"itemName":{"type":"string","example":"Spaghetti Carbonara"},"quantity":{"type":"integer","example":2},"price":{"type":"number","example":12.75},"specialInstructions":{"type":"string","nullable":true,"example":"Extra cheese please"}}}},"placedAt":{"type":"string","format":"date-time","description":"When the order was placed","example":"2024-01-15T14:30:00Z"},"estimatedPrepTime":{"type":"integer","nullable":true,"description":"Estimated preparation time in minutes","example":30},"deliveryAddress":{"type":"object","nullable":true,"description":"Delivery address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"New York"},"state":{"type":"string","example":"NY"},"zipCode":{"type":"string","example":"10001"}}},"paymentStatus":{"type":"string","enum":["pending","paid","failed","refunded"],"description":"Payment status","example":"paid"},"notes":{"type":"string","nullable":true,"description":"Additional order notes","example":"Customer prefers contactless delivery"}}}},"summary":{"type":"object","description":"Order summary statistics","properties":{"totalOrders":{"type":"integer","example":15},"pendingOrders":{"type":"integer","example":3},"preparingOrders":{"type":"integer","example":5},"readyOrders":{"type":"integer","example":2},"totalRevenue":{"type":"number","example":382.5},"averageOrderValue":{"type":"number","example":25.5}}},"sessionInfo":{"type":"object","nullable":true,"description":"Current live session information","properties":{"sessionId":{"type":"string","example":"session_1234567890abcdef"},"sessionTitle":{"type":"string","example":"Italian Cooking Masterclass"},"viewerCount":{"type":"integer","example":25},"sessionDuration":{"type":"integer","example":1800}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - authentication required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - chef role required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/ready":{"post":{"summary":"Mark Order as Ready","description":"Mark an order as ready for pickup/delivery (admin, staff, chef only)","tags":["Orders","Order Management","Preparation"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"Order ID to mark as ready","example":"ORD-12345"},"readyNotes":{"type":"string","description":"Notes about order readiness","example":"Order is ready for pickup, all items prepared"},"packagingNotes":{"type":"string","description":"Packaging instructions or notes","example":"Fragile items marked, hot items in insulated bag"},"metadata":{"type":"object","description":"Additional readiness metadata","example":{"packagingType":"eco_friendly","temperature":"hot"}}}}}}},"responses":{"200":{"description":"Order marked as ready successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"ORD-12345"},"status":{"type":"string","description":"Updated order status","example":"ready"},"readyAt":{"type":"string","format":"date-time","description":"When the order was marked as ready","example":"2024-01-15T10:00:00.000Z"},"readyNotes":{"type":"string","example":"Order is ready for pickup, all items prepared"},"packagingNotes":{"type":"string","example":"Fragile items marked, hot items in insulated bag"},"preparedBy":{"type":"string","description":"ID of the person who prepared the order","example":"j1234567890abcdef"},"preparedByRole":{"type":"string","description":"Role of the person who prepared","example":"chef"},"prepDuration":{"type":"number","description":"Total preparation time in minutes","example":25},"estimatedDeliveryTime":{"type":"number","description":"Estimated delivery time in minutes","example":15},"metadata":{"type":"object","example":{"packagingType":"eco_friendly"}}}},"message":{"type":"string","example":"Order marked as ready successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to mark orders as ready","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - order cannot be marked as ready in current status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/confirm":{"post":{"summary":"Confirm Order","description":"Confirm a pending order and set preparation details (admin, staff, or chef)","tags":["Orders"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"ID of the order to confirm","example":"j1234567890abcdef"},"estimatedPrepTime":{"type":"number","nullable":true,"description":"Estimated preparation time in minutes","example":30},"chefNotes":{"type":"string","nullable":true,"description":"Notes from the chef about the order","example":"Order will be ready in 25 minutes"},"metadata":{"type":"object","nullable":true,"description":"Additional metadata for the confirmation","example":{"kitchen":"main","priority":"high"}}}}}}},"responses":{"200":{"description":"Order confirmed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","description":"Confirmed order ID","example":"j1234567890abcdef"},"status":{"type":"string","description":"Updated order status","enum":["confirmed","preparing","ready","delivered","cancelled"],"example":"confirmed"},"estimatedReadyTime":{"type":"number","description":"Estimated preparation time in minutes","example":30}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing orderId or order cannot be confirmed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions or cannot confirm this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/cancel":{"post":{"summary":"Cancel Order","description":"Cancel an order with optional automatic refund processing","tags":["Orders"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId","reason"],"properties":{"orderId":{"type":"string","description":"ID of the order to cancel","example":"j1234567890abcdef"},"reason":{"type":"string","description":"Reason for cancellation","enum":["customer_request","out_of_stock","chef_unavailable","delivery_issue","fraudulent","duplicate","other"],"example":"customer_request"},"description":{"type":"string","nullable":true,"description":"Additional description for the cancellation","example":"Customer requested cancellation due to change of plans"},"autoRefund":{"type":"boolean","default":true,"description":"Whether to automatically process refund if payment was made","example":true},"refundAmount":{"type":"number","nullable":true,"description":"Partial refund amount in smallest currency unit (optional for full refund)","example":1599},"metadata":{"type":"object","nullable":true,"description":"Additional metadata for the cancellation","example":{"source":"mobile_app","priority":"urgent"}}}}}}},"responses":{"200":{"description":"Order cancelled successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Empty object on success","example":{}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields or order cannot be cancelled","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions or cannot cancel this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/complete":{"post":{"summary":"Complete Order","description":"Mark an order as completed (admin/staff/chef only)","tags":["Orders","Order Management"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"Order ID to mark as completed","example":"j1234567890abcdef"},"completionNotes":{"type":"string","nullable":true,"description":"Notes about order completion","example":"Order delivered successfully, customer satisfied"},"metadata":{"type":"object","nullable":true,"description":"Additional completion metadata","example":{"deliveryTime":"18:30","customerRating":5}}}}}}},"responses":{"200":{"description":"Order completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"j1234567890abcdef"},"status":{"type":"string","example":"completed"},"completedAt":{"type":"string","format":"date-time","description":"Order completion timestamp","example":"2024-01-15T18:30:00.000Z"},"completedBy":{"type":"string","description":"User who completed the order","example":"j1234567890abcdef"},"completionNotes":{"type":"string","nullable":true,"example":"Order delivered successfully, customer satisfied"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields or invalid order status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{order_id}":{"patch":{"summary":"Update Order Details","description":"Update order details including delivery address, special instructions, and timing","tags":["Orders","Order Management"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"ORD-12345"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"deliveryAddress":{"type":"object","description":"Updated delivery address","properties":{"street":{"type":"string","example":"123 Main Street"},"city":{"type":"string","example":"London"},"postcode":{"type":"string","example":"SW1A 1AA"},"country":{"type":"string","example":"United Kingdom"}}},"specialInstructions":{"type":"string","description":"Special delivery instructions","example":"Leave at front door, ring doorbell"},"deliveryTime":{"type":"string","format":"date-time","description":"Preferred delivery time","example":"2024-01-15T18:00:00.000Z"},"estimatedPrepTime":{"type":"number","description":"Estimated preparation time in minutes","example":30},"chefNotes":{"type":"string","description":"Chef notes about the order","example":"Customer prefers extra spicy"},"metadata":{"type":"object","description":"Additional order metadata","example":{"priority":"high","source":"mobile_app"}}}}}}},"responses":{"200":{"description":"Order updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"ORD-12345"},"updatedFields":{"type":"array","items":{"type":"string"},"example":["deliveryAddress","specialInstructions"]},"updatedAt":{"type":"string","format":"date-time","example":"2024-01-15T10:00:00.000Z"}}},"message":{"type":"string","example":"Order updated successfully"}}}}}},"400":{"description":"Validation error - invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{order_id}/history":{"get":{"summary":"Get Order History","description":"Retrieve the complete history and timeline of an order","tags":["Orders","Order Management","History"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"ORD-12345"}],"responses":{"200":{"description":"Order history retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"ORD-12345"},"history":{"type":"array","description":"Order history timeline","items":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time","description":"When the event occurred","example":"2024-01-15T10:00:00.000Z"},"status":{"type":"string","description":"Order status at this point","example":"confirmed"},"event":{"type":"string","description":"Event description","example":"Order confirmed by chef"},"actor":{"type":"string","description":"Who performed the action","example":"chef"},"actorId":{"type":"string","description":"ID of the actor","example":"j1234567890abcdef"},"metadata":{"type":"object","description":"Additional event metadata","example":{"prepTime":30,"notes":"Customer prefers extra spicy"}},"location":{"type":"object","description":"Location information if applicable","properties":{"latitude":{"type":"number","example":51.5074},"longitude":{"type":"number","example":-0.1276},"address":{"type":"string","example":"123 Main Street, London"}}}}}},"currentStatus":{"type":"string","description":"Current order status","example":"preparing"},"totalDuration":{"type":"number","description":"Total time elapsed in minutes","example":45}}},"message":{"type":"string","example":"Order history retrieved successfully"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to view this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{order_id}/messages":{"post":{"summary":"Send Order Message","description":"Send a message related to a specific order (customer, chef, staff communication)","tags":["Orders","Order Management","Messaging"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"ORD-12345"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["message","messageType"],"properties":{"message":{"type":"string","description":"Message content","example":"The order will be ready in 15 minutes"},"messageType":{"type":"string","enum":["text","image","file","status_update"],"description":"Type of message","example":"text"},"metadata":{"type":"object","description":"Additional message metadata","example":{"priority":"normal","attachments":[]}}}}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"messageId":{"type":"string","description":"Generated message ID","example":"MSG-12345"},"orderId":{"type":"string","example":"ORD-12345"},"senderId":{"type":"string","description":"ID of the message sender","example":"j1234567890abcdef"},"senderRole":{"type":"string","description":"Role of the message sender","example":"chef"},"message":{"type":"string","example":"The order will be ready in 15 minutes"},"messageType":{"type":"string","example":"text"},"timestamp":{"type":"string","format":"date-time","description":"When the message was sent","example":"2024-01-15T10:00:00.000Z"},"metadata":{"type":"object","example":{"priority":"normal"}}}},"message":{"type":"string","example":"Message sent successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to send messages for this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{order_id}/notify":{"post":{"summary":"Send Order Notification","description":"Send a notification to order participants (admin, staff, chef only)","tags":["Orders","Order Management","Notifications"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"ORD-12345"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["notificationType","priority","channels"],"properties":{"notificationType":{"type":"string","enum":["order_confirmed","order_preparing","order_ready","order_delivered","order_completed","order_cancelled","order_updated","custom"],"description":"Type of notification to send","example":"order_ready"},"message":{"type":"string","description":"Custom message (optional, uses default template if not provided)","example":"Your order is ready for pickup!"},"priority":{"type":"string","enum":["low","medium","high","urgent"],"description":"Notification priority level","example":"high"},"channels":{"type":"array","items":{"type":"string","enum":["email","sms","push","in_app"]},"description":"Notification channels to use","example":["email","push","in_app"]},"metadata":{"type":"object","description":"Additional notification metadata","example":{"template":"order_ready","urgency":"normal"}}}}}}},"responses":{"200":{"description":"Notification sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"notificationId":{"type":"string","description":"Generated notification ID","example":"NOTIF-12345"},"orderId":{"type":"string","example":"ORD-12345"},"notificationType":{"type":"string","example":"order_ready"},"message":{"type":"string","example":"Your order is ready for pickup!"},"priority":{"type":"string","example":"high"},"channels":{"type":"array","items":{"type":"string"},"example":["email","push","in_app"]},"recipients":{"type":"array","description":"List of notification recipients","items":{"type":"object","properties":{"recipientId":{"type":"string","example":"j1234567890abcdef"},"recipientRole":{"type":"string","example":"customer"},"channel":{"type":"string","example":"email"},"status":{"type":"string","example":"sent"}}}},"sentAt":{"type":"string","format":"date-time","description":"When the notification was sent","example":"2024-01-15T10:00:00.000Z"},"metadata":{"type":"object","example":{"template":"order_ready"}}}},"message":{"type":"string","example":"Notification sent successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to send notifications","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{order_id}/notifications":{"get":{"summary":"Get Order Notifications","description":"Retrieve all notifications related to a specific order","tags":["Orders","Order Management","Notifications"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"ORD-12345"}],"responses":{"200":{"description":"Order notifications retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"ORD-12345"},"notifications":{"type":"array","description":"Array of order notifications","items":{"type":"object","properties":{"notificationId":{"type":"string","description":"Notification ID","example":"NOTIF-12345"},"type":{"type":"string","description":"Notification type","example":"order_confirmed"},"title":{"type":"string","description":"Notification title","example":"Order Confirmed"},"message":{"type":"string","description":"Notification message","example":"Your order has been confirmed by Chef Mario"},"recipientId":{"type":"string","description":"ID of the notification recipient","example":"j1234567890abcdef"},"recipientRole":{"type":"string","description":"Role of the recipient","example":"customer"},"status":{"type":"string","enum":["sent","delivered","read","failed"],"description":"Notification status","example":"delivered"},"channel":{"type":"string","enum":["email","sms","push","in_app"],"description":"Notification channel","example":"email"},"timestamp":{"type":"string","format":"date-time","description":"When the notification was sent","example":"2024-01-15T10:00:00.000Z"},"readAt":{"type":"string","format":"date-time","nullable":true,"description":"When the notification was read","example":"2024-01-15T10:05:00.000Z"},"metadata":{"type":"object","description":"Additional notification metadata","example":{"priority":"high","template":"order_confirmation"}}}}},"totalCount":{"type":"number","description":"Total number of notifications","example":5},"unreadCount":{"type":"number","description":"Number of unread notifications","example":2}}},"message":{"type":"string","example":"Order notifications retrieved successfully"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to view notifications for this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{order_id}/notes":{"post":{"summary":"Add Order Note","description":"Add a note to an order (chef notes, customer notes, or internal notes)","tags":["Orders","Order Management","Notes"],"parameters":[{"in":"path","name":"order_id","required":true,"schema":{"type":"string"},"description":"Order ID","example":"ORD-12345"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["note","noteType"],"properties":{"note":{"type":"string","description":"Note content","example":"Customer requested extra spicy sauce"},"noteType":{"type":"string","enum":["chef_note","customer_note","internal_note"],"description":"Type of note","example":"chef_note"},"metadata":{"type":"object","description":"Additional note metadata","example":{"priority":"normal","visibility":"chef_only"}}}}}}},"responses":{"200":{"description":"Note added successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"noteId":{"type":"string","description":"Generated note ID","example":"NOTE-12345"},"orderId":{"type":"string","example":"ORD-12345"},"note":{"type":"string","example":"Customer requested extra spicy sauce"},"noteType":{"type":"string","example":"chef_note"},"authorId":{"type":"string","description":"ID of the note author","example":"j1234567890abcdef"},"authorRole":{"type":"string","description":"Role of the note author","example":"chef"},"timestamp":{"type":"string","format":"date-time","description":"When the note was added","example":"2024-01-15T10:00:00.000Z"},"metadata":{"type":"object","example":{"priority":"normal"}}}},"message":{"type":"string","example":"Note added successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to add notes for this order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/deliver":{"post":{"summary":"Mark Order as Delivered","description":"Mark an order as delivered (admin, staff, chef only)","tags":["Orders","Order Management","Delivery"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"Order ID to mark as delivered","example":"ORD-12345"},"deliveryNotes":{"type":"string","description":"Delivery notes or comments","example":"Delivered to front door, customer confirmed receipt"},"metadata":{"type":"object","description":"Additional delivery metadata","example":{"deliveryMethod":"contactless","signature":"received"}}}}}}},"responses":{"200":{"description":"Order marked as delivered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"ORD-12345"},"status":{"type":"string","description":"Updated order status","example":"delivered"},"deliveredAt":{"type":"string","format":"date-time","description":"When the order was delivered","example":"2024-01-15T10:00:00.000Z"},"deliveryNotes":{"type":"string","example":"Delivered to front door, customer confirmed receipt"},"deliveredBy":{"type":"string","description":"ID of the person who delivered the order","example":"j1234567890abcdef"},"deliveredByRole":{"type":"string","description":"Role of the person who delivered","example":"chef"},"deliveryDuration":{"type":"number","description":"Total delivery time in minutes","example":15},"metadata":{"type":"object","example":{"deliveryMethod":"contactless"}}}},"message":{"type":"string","example":"Order marked as delivered successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to mark orders as delivered","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - order cannot be delivered in current status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/review":{"post":{"summary":"Mark Order as Reviewed","description":"Mark an order as reviewed by customers, chefs, staff, or admins. This endpoint allows different user roles to review completed orders and add review notes for tracking and quality assurance purposes.","tags":["Orders","Reviews"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"ID of the order to mark as reviewed","example":"j1234567890abcdef"},"reviewNotes":{"type":"string","nullable":true,"description":"Optional notes about the order review","example":"Order completed successfully, customer satisfied"},"metadata":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata for the review","example":{"reviewType":"quality_check","reviewerComments":"Excellent food quality"}}}}}}},"responses":{"200":{"description":"Order marked as reviewed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"order":{"type":"object","properties":{"id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"reviewedAt":{"type":"number","description":"Timestamp when order was reviewed","example":1705324800000}}},"message":{"type":"string","example":"Order reviewed successfully."}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing orderId or invalid order status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions or order ownership","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - order cannot be reviewed in current status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/prepare":{"post":{"summary":"Start Order Preparation","description":"Mark an order as being prepared by chef/staff (admin, staff, chef only)","tags":["Orders","Order Management","Preparation"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"Order ID to prepare","example":"ORD-12345"},"prepNotes":{"type":"string","description":"Preparation notes from chef","example":"Starting preparation, estimated 25 minutes"},"updatedPrepTime":{"type":"number","description":"Updated preparation time in minutes","example":25},"metadata":{"type":"object","description":"Additional preparation metadata","example":{"kitchen":"main","priority":"normal"}}}}}}},"responses":{"200":{"description":"Order preparation started successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orderId":{"type":"string","example":"ORD-12345"},"status":{"type":"string","description":"Updated order status","example":"preparing"},"prepStartedAt":{"type":"string","format":"date-time","description":"When preparation started","example":"2024-01-15T10:00:00.000Z"},"estimatedPrepTime":{"type":"number","description":"Estimated preparation time in minutes","example":25},"prepNotes":{"type":"string","example":"Starting preparation, estimated 25 minutes"},"preparedBy":{"type":"string","description":"ID of the person preparing the order","example":"j1234567890abcdef"},"preparedByRole":{"type":"string","description":"Role of the person preparing","example":"chef"},"metadata":{"type":"object","example":{"kitchen":"main","priority":"normal"}}}},"message":{"type":"string","example":"Order preparation started successfully"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions to prepare orders","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"409":{"description":"Conflict - order cannot be prepared in current status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/get-ip":{"get":{"summary":"Get Client IP Address","description":"Retrieve the real IP address of the client making the request","tags":["System"],"responses":{"200":{"description":"IP address retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"ip":{"type":"string","description":"Client IP address","example":"192.168.1.100"}}},"message":{"type":"string","example":"Success"}}}}}}},"security":[]}},"/contact":{"post":{"summary":"Submit contact form","description":"Submit a contact form with user details and message","tags":["Contact"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["firstName","lastName","email","subject","message"],"properties":{"firstName":{"type":"string","description":"User's first name","example":"John"},"lastName":{"type":"string","description":"User's last name","example":"Doe"},"email":{"type":"string","format":"email","description":"User's email address","example":"john.doe@example.com"},"subject":{"type":"string","description":"Subject of the contact message","example":"Question about CribNosh"},"message":{"type":"string","description":"The contact message","example":"I have a question about your meal platform..."}}}}}},"responses":{"202":{"description":"Contact form submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Contact form submitted successfully"},"messageId":{"type":"string","description":"Email message ID"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"503":{"description":"Service unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/analytics/orders":{"get":{"summary":"Get Order Analytics","description":"Get comprehensive order analytics with filtering and grouping options (admin/staff only)","tags":["Analytics"],"parameters":[{"in":"query","name":"startDate","schema":{"type":"string"},"description":"Start date filter (timestamp)","example":"1640995200000"},{"in":"query","name":"endDate","schema":{"type":"string"},"description":"End date filter (timestamp)","example":"1641081600000"},{"in":"query","name":"chefId","schema":{"type":"string"},"description":"Filter by specific chef ID","example":"j1234567890abcdef"},{"in":"query","name":"customerId","schema":{"type":"string"},"description":"Filter by specific customer ID","example":"j1234567890abcdef"},{"in":"query","name":"status","schema":{"type":"string"},"description":"Filter by order status","example":"completed"},{"in":"query","name":"groupBy","schema":{"type":"string","enum":["day","week","month","chef","status"],"default":"day"},"description":"Group analytics by time period or category","example":"day"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":1000,"default":100},"description":"Maximum number of results to return","example":100}],"responses":{"200":{"description":"Order analytics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"analytics":{"type":"object","description":"Analytics data grouped by specified criteria","properties":{"totalOrders":{"type":"number","description":"Total number of orders","example":1250},"totalRevenue":{"type":"number","description":"Total revenue","example":45678.5},"averageOrderValue":{"type":"number","description":"Average order value","example":36.54},"dataPoints":{"type":"array","description":"Data points based on grouping","items":{"type":"object","properties":{"period":{"type":"string","description":"Time period or category","example":"2024-01-15"},"orders":{"type":"number","description":"Number of orders","example":45},"revenue":{"type":"number","description":"Revenue for period","example":1643.25},"chefId":{"type":"string","nullable":true,"description":"Chef ID (if grouped by chef)","example":"j1234567890abcdef"},"status":{"type":"string","nullable":true,"description":"Order status (if grouped by status)","example":"completed"}}}}}},"filters":{"type":"object","description":"Applied filters","properties":{"startDate":{"type":"string","nullable":true,"example":"1640995200000"},"endDate":{"type":"string","nullable":true,"example":"1641081600000"},"chefId":{"type":"string","nullable":true,"example":"j1234567890abcdef"},"customerId":{"type":"string","nullable":true,"example":"j1234567890abcdef"},"status":{"type":"string","nullable":true,"example":"completed"},"groupBy":{"type":"string","example":"day"},"limit":{"type":"number","example":100}}},"generatedAt":{"type":"string","format":"date-time","description":"Analytics generation timestamp","example":"2024-01-15T10:30:00.000Z"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions (admin/staff only)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/analytics/event":{"post":{"summary":"Track Analytics Events","description":"Track user interaction events for analytics and heatmap data","tags":["Analytics"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["events"],"properties":{"events":{"type":"array","description":"Array of analytics events to track","items":{"type":"object","required":["type"],"properties":{"type":{"type":"string","description":"Event type identifier","example":"page_view"},"timestamp":{"type":"number","nullable":true,"description":"Event timestamp (defaults to current time)","example":1640995200000},"page":{"type":"string","nullable":true,"description":"Page URL or identifier","example":"/customer/menu"},"x":{"type":"number","nullable":true,"description":"X coordinate for click events","example":150},"y":{"type":"number","nullable":true,"description":"Y coordinate for click events","example":300},"extra":{"type":"object","nullable":true,"description":"Additional event data","example":{"user_agent":"Mozilla/5.0","session_id":"abc123"}}}}}}}}}},"responses":{"200":{"description":"Events tracked successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error or analytics processing failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/analytics/heatmap":{"get":{"summary":"Get Analytics Heatmap Data","description":"Retrieve heatmap analytics data for a specific page or section. This endpoint provides user interaction data, click patterns, and engagement metrics visualized as heatmap data for UX analysis and optimization.","tags":["Analytics","Heatmap"],"parameters":[{"in":"query","name":"page","required":true,"schema":{"type":"string"},"description":"Page identifier for heatmap data","example":"chef-dashboard"},{"in":"query","name":"timeRange","schema":{"type":"string","enum":["1h","6h","24h","7d","30d"],"default":"24h"},"description":"Time range for heatmap data","example":"7d"},{"in":"query","name":"deviceType","schema":{"type":"string","enum":["desktop","mobile","tablet","all"],"default":"all"},"description":"Device type filter","example":"mobile"},{"in":"query","name":"userSegment","schema":{"type":"string","enum":["all","customers","chefs","staff","admins"],"default":"all"},"description":"User segment filter","example":"customers"}],"responses":{"200":{"description":"Heatmap data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"heatmapData":{"type":"array","description":"Array of heatmap data points","items":{"type":"object","properties":{"x":{"type":"number","description":"X coordinate (percentage)","example":45.5},"y":{"type":"number","description":"Y coordinate (percentage)","example":23.8},"intensity":{"type":"number","minimum":0,"maximum":100,"description":"Click intensity (0-100)","example":75.5},"clicks":{"type":"integer","description":"Number of clicks at this position","example":125},"element":{"type":"string","nullable":true,"description":"HTML element identifier","example":"button-order-now"},"elementType":{"type":"string","nullable":true,"description":"Type of element","example":"button"}}}},"metadata":{"type":"object","properties":{"page":{"type":"string","description":"Page identifier","example":"chef-dashboard"},"timeRange":{"type":"string","description":"Time range used","example":"7d"},"deviceType":{"type":"string","description":"Device type filter","example":"mobile"},"userSegment":{"type":"string","description":"User segment filter","example":"customers"},"totalSessions":{"type":"integer","description":"Total sessions analyzed","example":1250},"totalClicks":{"type":"integer","description":"Total clicks recorded","example":8750},"averageSessionDuration":{"type":"number","description":"Average session duration in seconds","example":180.5},"generatedAt":{"type":"string","format":"date-time","description":"Data generation timestamp","example":"2024-01-15T14:30:00Z"}}},"insights":{"type":"object","nullable":true,"description":"Heatmap insights and recommendations","properties":{"hotSpots":{"type":"array","items":{"type":"object","properties":{"x":{"type":"number","example":45.5},"y":{"type":"number","example":23.8},"intensity":{"type":"number","example":95.2},"recommendation":{"type":"string","example":"Consider moving this element to a more prominent position"}}}},"coldSpots":{"type":"array","items":{"type":"object","properties":{"x":{"type":"number","example":80.2},"y":{"type":"number","example":15.3},"intensity":{"type":"number","example":5.1},"recommendation":{"type":"string","example":"This area receives low engagement, consider redesigning"}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing page parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/async-tasks":{"get":{"summary":"GET /api/async-tasks","description":"Handle GET requests to /api/async-tasks","responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Success"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}},"post":{"summary":"POST /api/async-tasks","description":"Handle POST requests to /api/async-tasks","responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Success"}}}},"400":{"description":"Bad request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","description":"Request payload"}}}}}},"/mattermost":{"post":{"summary":"Send Mattermost Notification","description":"Send notifications to Mattermost channels for team communication and alerts","tags":["Integrations","Notifications"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["test","custom","system-health"],"description":"Type of notification to send","example":"custom"},"channel":{"type":"string","nullable":true,"description":"Target channel ID (uses default if not provided)","example":"channel1234567890abcdef"},"message":{"type":"string","nullable":true,"description":"Custom message content (required for 'custom' type)","example":"New order received: #12345 for £25.99"},"data":{"type":"object","nullable":true,"description":"Additional data for system-health notifications","properties":{"status":{"type":"string","enum":["healthy","degraded","unhealthy"],"example":"healthy"},"message":{"type":"string","example":"System health check completed"},"details":{"type":"object","nullable":true,"description":"Additional health check details","example":{"uptime":86400,"memory":"512MB"}}}}}}}}},"responses":{"200":{"description":"Notification sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Mattermost notification sent successfully"},"type":{"type":"string","example":"custom"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid type or missing message","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or external service error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"503":{"description":"Service unavailable - Mattermost not configured","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[],"x-integration":{"description":"This endpoint integrates with Mattermost for team notifications:\n\n**Notification Types:**\n- `test`: Send a test message to verify configuration\n- `custom`: Send a custom message with specified content\n- `system-health`: Send system health status notifications\n\n**Configuration:**\n- Requires either MATTERMOST_WEBHOOK_URL or MATTERMOST_BOT_TOKEN + MATTERMOST_SERVER_URL\n- Uses MATTERMOST_CHANNEL_ID as default channel if not specified\n- Supports both webhook and API-based messaging\n\n**Use Cases:**\n- Order notifications for kitchen staff\n- System alerts for admin team\n- Customer service notifications\n- Development team updates\n"}}},"/upload-avatar":{"post":{"summary":"Upload User Avatar","description":"Upload and store a user avatar image file","tags":["Profile"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"type":"string","format":"binary","description":"Image file to upload as avatar","maxLength":5242880}}}}}},"responses":{"200":{"description":"Avatar uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string","description":"URL to access the uploaded avatar","example":"/api/files/j1234567890abcdef"},"storageId":{"type":"string","description":"Convex storage ID for the uploaded file","example":"j1234567890abcdef"}}}}}},"400":{"description":"Bad request - invalid file or missing file","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"No file uploaded"}}}}}},"405":{"description":"Method not allowed","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Method not allowed"}}}}}},"500":{"description":"Internal server error during upload","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Failed to upload image"},"details":{"type":"string","example":"Convex upload error"}}}}}}},"security":[{"bearerAuth":[]}]}},"/api/messaging":{"get":{"summary":"Get messaging overview","description":"Get messaging system overview with statistics and recent activity","tags":["Messaging"],"responses":{"200":{"description":"Messaging overview retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"totalChats":{"type":"number"},"activeUsers":{"type":"number"},"recentMessages":{"type":"array","items":{"type":"object"}},"messagingStats":{"type":"object"},"topChatters":{"type":"array","items":{"type":"object"}}}}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/online":{"get":{"summary":"Get online users","description":"Get list of online users","tags":["Messaging"],"responses":{"200":{"description":"Online users retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array"}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/messages":{"get":{"summary":"Get messages","description":"Get messages with filtering and pagination","tags":["Messaging"],"parameters":[{"in":"query","name":"chatId","schema":{"type":"string"},"description":"Filter messages by chat ID"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Number of messages to return"},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of messages to skip"}],"responses":{"200":{"description":"Messages retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"array","items":{"type":"object"}},"pagination":{"type":"object"}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/chats":{"get":{"summary":"Get user chats","description":"Retrieve all chat conversations for the authenticated user","tags":["Messaging"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","default":20,"maximum":100},"description":"Number of chats to retrieve"},{"in":"query","name":"offset","schema":{"type":"integer","default":0},"description":"Number of chats to skip"}],"responses":{"200":{"description":"Chats retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"chats":{"type":"array","items":{"type":"object"}},"total":{"type":"number"},"limit":{"type":"number"},"offset":{"type":"number"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - Missing or invalid token"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Create chat conversation","description":"Create a new chat conversation with specified participants","tags":["Messaging"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["participants"],"properties":{"participants":{"type":"array","items":{"type":"string"},"minItems":2,"description":"Array of user IDs to include in the conversation"},"metadata":{"type":"object","description":"Optional metadata for the conversation"}}}}}},"responses":{"200":{"description":"Chat created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Created chat conversation"},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - At least two participants required"},"401":{"description":"Unauthorized - Missing or invalid token"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/api/messaging/notifications":{"get":{"summary":"Get messaging notifications","description":"Get messaging notifications","tags":["Messaging"],"responses":{"200":{"description":"Notifications retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array"}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/offline":{"post":{"summary":"Set user offline","description":"Set user status to offline","tags":["Messaging"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"userId":{"type":"string"}}}}}},"responses":{"200":{"description":"User set offline successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/send":{"post":{"summary":"Send message","description":"Send a message to a chat","tags":["Messaging"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["content","chatId"],"properties":{"content":{"type":"string","description":"Message content"},"chatId":{"type":"string","description":"Chat ID"},"replyTo":{"type":"string","description":"Message ID to reply to"},"attachments":{"type":"array","items":{"type":"object"},"description":"Message attachments"}}}}}},"responses":{"200":{"description":"Message sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object"}}}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}}}},"/api/messaging/read":{"post":{"summary":"Mark message as read","description":"Mark a message as read","tags":["Messaging"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"messageId":{"type":"string"}}}}}},"responses":{"200":{"description":"Message marked as read successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/typing":{"post":{"summary":"Update typing status","description":"Update user typing status","tags":["Messaging"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"chatId":{"type":"string"},"isTyping":{"type":"boolean"}}}}}},"responses":{"200":{"description":"Typing status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal server error"}}}},"/api/messaging/conversations":{"get":{"summary":"Get conversations","description":"Get all conversations","tags":["Messaging"],"responses":{"200":{"description":"Conversations retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"array"}}}}}},"500":{"description":"Internal server error"}}}},"/payments/history":{"get":{"summary":"Get Payment History","description":"Retrieve payment history for the authenticated user","tags":["Payments","History"],"responses":{"200":{"description":"Payment history retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"payments":{"type":"array","description":"Array of payment intents","items":{"type":"object","properties":{"id":{"type":"string","description":"Payment intent ID","example":"pi_1234567890abcdef"},"amount":{"type":"number","description":"Amount in cents","example":2500},"currency":{"type":"string","description":"Currency code","example":"usd"},"status":{"type":"string","enum":["requires_payment_method","requires_confirmation","requires_action","processing","requires_capture","canceled","succeeded"],"description":"Payment status","example":"succeeded"},"client_secret":{"type":"string","description":"Client secret for frontend","example":"pi_1234567890abcdef_secret_abcdef"},"description":{"type":"string","nullable":true,"description":"Payment description","example":"Order #ORD-12345"},"metadata":{"type":"object","nullable":true,"description":"Payment metadata","example":{"order_id":"ORD-12345","user_id":"j1234567890abcdef"}},"created":{"type":"number","description":"Creation timestamp","example":1640995200},"amount_received":{"type":"number","nullable":true,"description":"Amount actually received","example":2500},"receipt_email":{"type":"string","nullable":true,"description":"Receipt email","example":"user@example.com"},"shipping":{"type":"object","nullable":true,"description":"Shipping information","properties":{"name":{"type":"string","example":"John Doe"},"address":{"type":"object","properties":{"line1":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"London"},"postal_code":{"type":"string","example":"SW1A 1AA"},"country":{"type":"string","example":"GB"}}}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - user email required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"503":{"description":"Service unavailable - Stripe not configured","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/create-payment-intent":{"post":{"summary":"Create Payment Intent","description":"Create a Stripe payment intent for processing payments","tags":["Payments"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["amount"],"properties":{"amount":{"type":"number","minimum":50,"description":"Amount in smallest currency unit (e.g., pence for GBP)","example":3198},"currency":{"type":"string","default":"gbp","description":"Currency code","example":"gbp"},"payment_method_id":{"type":"string","nullable":true,"description":"Payment method ID for immediate confirmation","example":"pm_1234567890abcdef"},"metadata":{"type":"object","nullable":true,"description":"Additional metadata for the payment","example":{"source":"mobile_app"}},"orderId":{"type":"string","nullable":true,"description":"Associated order ID","example":"j1234567890abcdef"},"chefId":{"type":"string","nullable":true,"description":"Associated chef ID","example":"j1234567890abcdef"},"bookingId":{"type":"string","nullable":true,"description":"Associated booking ID","example":"j1234567890abcdef"}}}}}},"responses":{"200":{"description":"Payment intent created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"clientSecret":{"type":"string","description":"Stripe client secret for payment confirmation","example":"pi_1234567890abcdef_secret_abcdef1234567890"},"paymentIntentId":{"type":"string","description":"Stripe payment intent ID","example":"pi_1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid amount or missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Stripe configuration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/manage":{"post":{"summary":"Manage Payment Operations","description":"Admin/staff endpoint for managing payment operations (capture, void, update payment method)","tags":["Payments","Admin"],"parameters":[{"in":"query","name":"action","required":true,"schema":{"type":"string","enum":["capture","void","update-payment-method"]},"description":"Payment management action to perform","example":"capture"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"oneOf":[{"type":"object","description":"Capture payment request","required":["paymentIntentId"],"properties":{"paymentIntentId":{"type":"string","description":"Stripe payment intent ID","example":"pi_1234567890abcdef"},"amount":{"type":"number","description":"Amount to capture (optional, defaults to full amount)","example":2500},"description":{"type":"string","description":"Description for the capture","example":"Order fulfillment capture"},"metadata":{"type":"object","description":"Additional metadata","example":{"reason":"order_completed"}}}},{"type":"object","description":"Void payment request","required":["paymentIntentId"],"properties":{"paymentIntentId":{"type":"string","description":"Stripe payment intent ID","example":"pi_1234567890abcdef"},"reason":{"type":"string","description":"Reason for voiding","example":"Customer cancellation"},"metadata":{"type":"object","description":"Additional metadata","example":{"reason":"customer_request"}}}},{"type":"object","description":"Update payment method request","required":["paymentIntentId","paymentMethodId"],"properties":{"paymentIntentId":{"type":"string","description":"Stripe payment intent ID","example":"pi_1234567890abcdef"},"paymentMethodId":{"type":"string","description":"New payment method ID","example":"pm_1234567890abcdef"},"metadata":{"type":"object","description":"Additional metadata","example":{"updated_reason":"card_expired"}}}}]}}}},"responses":{"200":{"description":"Payment operation completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object"},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing parameters or invalid action","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions (admin/staff only)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/refund":{"post":{"summary":"Process Payment Refund","description":"Process a refund for a payment intent (admin only)","tags":["Payments"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["payment_intent_id"],"properties":{"payment_intent_id":{"type":"string","description":"Stripe payment intent ID to refund","example":"pi_1234567890abcdef"},"amount":{"type":"number","nullable":true,"description":"Partial refund amount in smallest currency unit (optional for full refund)","example":1599}}}}}},"responses":{"200":{"description":"Refund processed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"refund":{"type":"object","description":"Stripe refund object","properties":{"id":{"type":"string","example":"re_1234567890abcdef"},"amount":{"type":"number","example":3198},"currency":{"type":"string","example":"gbp"},"status":{"type":"string","enum":["pending","succeeded","failed","canceled"],"example":"succeeded"},"reason":{"type":"string","example":"requested_by_customer"},"created":{"type":"number","example":1640995200}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing payment_intent_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can process refunds","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"503":{"description":"Service unavailable - Stripe not configured","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/create-customer":{"post":{"summary":"Create Stripe Customer","description":"Create or retrieve a Stripe customer for the authenticated user","tags":["Payments"],"responses":{"200":{"description":"Customer created or retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"stripeCustomerId":{"type":"string","description":"Stripe customer ID","example":"cus_1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing user email","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/add-card":{"post":{"summary":"Add Payment Method","description":"Create a Stripe setup intent for adding a new payment method","tags":["Payments"],"responses":{"200":{"description":"Setup intent created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"clientSecret":{"type":"string","description":"Stripe client secret for payment method setup","example":"seti_1234567890abcdef_secret_abcdef1234567890"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing user email","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Stripe configuration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/cards":{"get":{"summary":"Get Payment Cards","description":"Retrieve saved payment cards for the authenticated user","tags":["Payments","Cards"],"responses":{"200":{"description":"Payment cards retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cards":{"type":"array","description":"Array of saved payment cards","items":{"type":"object","properties":{"id":{"type":"string","description":"Payment method ID","example":"pm_1234567890abcdef"},"type":{"type":"string","description":"Payment method type","example":"card"},"card":{"type":"object","description":"Card details","properties":{"brand":{"type":"string","description":"Card brand","example":"visa"},"last4":{"type":"string","description":"Last 4 digits of card","example":"4242"},"exp_month":{"type":"number","description":"Expiration month","example":12},"exp_year":{"type":"number","description":"Expiration year","example":2025},"funding":{"type":"string","description":"Card funding type","example":"credit"},"country":{"type":"string","description":"Country code","example":"US"},"fingerprint":{"type":"string","description":"Card fingerprint","example":"abcd1234"}}},"billing_details":{"type":"object","description":"Billing information","properties":{"name":{"type":"string","nullable":true,"example":"John Doe"},"email":{"type":"string","nullable":true,"example":"john@example.com"},"phone":{"type":"string","nullable":true,"example":"+1234567890"},"address":{"type":"object","nullable":true,"properties":{"line1":{"type":"string","example":"123 Main St"},"line2":{"type":"string","nullable":true,"example":"Apt 4B"},"city":{"type":"string","example":"London"},"state":{"type":"string","example":"England"},"postal_code":{"type":"string","example":"SW1A 1AA"},"country":{"type":"string","example":"GB"}}}}},"created":{"type":"number","description":"Creation timestamp","example":1640995200}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - user email required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/cards/{card_id}":{"delete":{"summary":"Delete Payment Card","description":"Remove a saved payment card from the user's account","tags":["Payments","Cards"],"parameters":[{"in":"path","name":"card_id","required":true,"schema":{"type":"string"},"description":"Payment method ID to delete","example":"pm_1234567890abcdef"}],"responses":{"200":{"description":"Payment card deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing card_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Stripe configuration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/confirm-payment":{"post":{"summary":"Confirm Payment Intent","description":"Confirm a Stripe payment intent to complete the payment","tags":["Payments"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["payment_intent_id"],"properties":{"payment_intent_id":{"type":"string","description":"Stripe payment intent ID to confirm","example":"pi_1234567890abcdef"},"payment_method_id":{"type":"string","nullable":true,"description":"Payment method ID to use for confirmation","example":"pm_1234567890abcdef"}}}}}},"responses":{"200":{"description":"Payment confirmed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"status":{"type":"string","description":"Payment intent status","enum":["requires_payment_method","requires_confirmation","requires_action","processing","requires_capture","canceled","succeeded"],"example":"succeeded"},"paymentIntent":{"type":"object","description":"Complete payment intent object from Stripe","properties":{"id":{"type":"string","example":"pi_1234567890abcdef"},"status":{"type":"string","example":"succeeded"},"amount":{"type":"number","example":3198},"currency":{"type":"string","example":"gbp"},"client_secret":{"type":"string","example":"pi_1234567890abcdef_secret_abcdef1234567890"}}}}},"message":{"type":"string","example":"Payment confirmed successfully"}}}}}},"400":{"description":"Validation error - missing payment_intent_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or Stripe configuration error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/payments/status":{"get":{"summary":"Get Payment Status","description":"Retrieve payment status for an order or payment intent","tags":["Payments","Status"],"parameters":[{"in":"query","name":"orderId","schema":{"type":"string"},"description":"Order ID to check payment status for","example":"ORD-12345"},{"in":"query","name":"paymentIntentId","schema":{"type":"string"},"description":"Payment intent ID to check status for","example":"pi_1234567890abcdef"}],"responses":{"200":{"description":"Payment status retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"order":{"type":"object","nullable":true,"description":"Order details (if orderId provided)","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"order_id":{"type":"string","example":"ORD-12345"},"customer_id":{"type":"string","example":"j1234567890abcdef"},"total_amount":{"type":"number","example":25.99},"order_status":{"type":"string","example":"confirmed"},"payment_status":{"type":"string","example":"completed"}}},"paymentIntent":{"type":"object","nullable":true,"description":"Payment intent details","properties":{"id":{"type":"string","example":"pi_1234567890abcdef"},"amount":{"type":"number","example":2599},"currency":{"type":"string","example":"usd"},"status":{"type":"string","enum":["requires_payment_method","requires_confirmation","requires_action","processing","requires_capture","canceled","succeeded"],"example":"succeeded"},"client_secret":{"type":"string","example":"pi_1234567890abcdef_secret_abcdef"},"description":{"type":"string","nullable":true,"example":"Order #ORD-12345"},"metadata":{"type":"object","nullable":true,"example":{"order_id":"ORD-12345"}},"created":{"type":"number","example":1640995200},"amount_received":{"type":"number","nullable":true,"example":2599},"receipt_email":{"type":"string","nullable":true,"example":"user@example.com"}}},"paymentStatus":{"type":"string","description":"Overall payment status","example":"completed"},"canRefund":{"type":"boolean","description":"Whether payment can be refunded","example":true},"refundAmount":{"type":"number","nullable":true,"description":"Maximum refundable amount","example":25.99}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order or payment intent not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/dishes":{"get":{"summary":"Get All Dishes","description":"Retrieve all dishes/meals from all chefs (admin only)","tags":["Admin","Dishes","Meals"],"responses":{"200":{"description":"All dishes retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"meals":{"type":"array","description":"Array of all dishes/meals","items":{"type":"object","properties":{"_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID who created the dish","example":"j1234567890abcdef"},"name":{"type":"string","description":"Dish name","example":"Spaghetti Carbonara"},"description":{"type":"string","description":"Dish description","example":"Classic Italian pasta with eggs, cheese, and pancetta"},"price":{"type":"number","description":"Dish price","example":18.99},"cuisine":{"type":"string","description":"Cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"List of ingredients","example":["pasta","eggs","parmesan","pancetta"]},"dietaryInfo":{"type":"object","description":"Dietary information","properties":{"vegetarian":{"type":"boolean","example":false},"vegan":{"type":"boolean","example":false},"glutenFree":{"type":"boolean","example":false},"allergens":{"type":"array","items":{"type":"string"},"example":["eggs","dairy"]}}},"prepTime":{"type":"number","description":"Preparation time in minutes","example":25},"servings":{"type":"number","description":"Number of servings","example":2},"image":{"type":"string","nullable":true,"description":"Dish image URL","example":"https://example.com/dish-image.jpg"},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Dish status","example":"active"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.7},"reviewCount":{"type":"number","description":"Number of reviews","example":15},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Create New Dish (Admin)","description":"Create a new dish/meal item (admin only)","tags":["Admin","Dishes","Meals"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","chefId","price"],"properties":{"name":{"type":"string","description":"Dish name","example":"Spaghetti Carbonara"},"description":{"type":"string","description":"Dish description","example":"Classic Italian pasta with eggs, cheese, and pancetta"},"chefId":{"type":"string","description":"Chef ID who created the dish","example":"j1234567890abcdef"},"price":{"type":"number","description":"Dish price","example":18.99},"images":{"type":"array","items":{"type":"string"},"description":"Array of image URLs","example":["https://example.com/dish1.jpg","https://example.com/dish2.jpg"]},"cuisine":{"type":"array","items":{"type":"string"},"description":"Array of cuisine types","example":["italian","pasta"]},"dietary":{"type":"array","items":{"type":"string"},"description":"Array of dietary information","example":["vegetarian","gluten-free"]}}}}}},"responses":{"200":{"description":"Dish created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"mealId":{"type":"string","description":"ID of the created dish","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can create dishes","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/dishes/{dish_id}":{"get":{"summary":"Get Specific Dish (Admin)","description":"Retrieve detailed information about a specific dish by ID for administrative review and management.","tags":["Admin","Dishes","Meals"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the dish","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Dish details retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"dish":{"type":"object","properties":{"_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID who created the dish","example":"j1234567890abcdef"},"name":{"type":"string","description":"Dish name","example":"Spaghetti Carbonara"},"description":{"type":"string","description":"Dish description","example":"Classic Italian pasta with eggs, cheese, and pancetta"},"price":{"type":"number","description":"Dish price","example":18.99},"cuisine":{"type":"string","description":"Cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"List of ingredients","example":["pasta","eggs","parmesan","pancetta"]},"dietaryInfo":{"type":"object","properties":{"vegetarian":{"type":"boolean","example":false},"vegan":{"type":"boolean","example":false},"glutenFree":{"type":"boolean","example":false},"allergens":{"type":"array","items":{"type":"string"},"example":["eggs","dairy"]}}},"prepTime":{"type":"number","description":"Preparation time in minutes","example":25},"servings":{"type":"number","description":"Number of servings","example":2},"image":{"type":"string","nullable":true,"description":"Dish image URL","example":"https://example.com/dish-image.jpg"},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Dish status","example":"active"},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.7},"reviewCount":{"type":"number","description":"Number of reviews","example":15},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","nullable":true,"description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing dish_id parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Dish not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"summary":"Update Dish (Admin)","description":"Partially update a dish's information. Only provided fields will be updated.","tags":["Admin","Dishes","Meals"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the dish","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Updated dish name","example":"Spaghetti Carbonara Deluxe"},"description":{"type":"string","description":"Updated dish description","example":"Premium Italian pasta with organic eggs, aged parmesan, and artisanal pancetta"},"price":{"type":"number","description":"Updated dish price","example":22.99},"cuisine":{"type":"string","description":"Updated cuisine type","example":"italian"},"ingredients":{"type":"array","items":{"type":"string"},"description":"Updated list of ingredients","example":["organic pasta","free-range eggs","aged parmesan","artisanal pancetta"]},"dietaryInfo":{"type":"object","properties":{"vegetarian":{"type":"boolean","example":false},"vegan":{"type":"boolean","example":false},"glutenFree":{"type":"boolean","example":false},"allergens":{"type":"array","items":{"type":"string"},"example":["eggs","dairy"]}}},"prepTime":{"type":"number","description":"Updated preparation time in minutes","example":30},"servings":{"type":"number","description":"Updated number of servings","example":2},"image":{"type":"string","nullable":true,"description":"Updated dish image URL","example":"https://example.com/updated-dish-image.jpg"},"status":{"type":"string","enum":["draft","active","inactive","archived"],"description":"Updated dish status","example":"active"}}}}}},"responses":{"200":{"description":"Dish updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing dish_id or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"put":{"summary":"Replace Dish (Admin)","description":"Completely replace a dish's information with new data.","tags":["Admin","Dishes","Meals"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the dish","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","chefId","price"],"properties":{"name":{"type":"string","description":"Dish name","example":"Spaghetti Carbonara"},"description":{"type":"string","description":"Dish description","example":"Classic Italian pasta with eggs, cheese, and pancetta"},"chefId":{"type":"string","description":"Chef ID who created the dish","example":"j1234567890abcdef"},"price":{"type":"number","description":"Dish price","example":18.99},"images":{"type":"array","items":{"type":"string"},"description":"Array of image URLs","example":["https://example.com/dish1.jpg","https://example.com/dish2.jpg"]},"cuisine":{"type":"array","items":{"type":"string"},"description":"Array of cuisine types","example":["italian","pasta"]},"dietary":{"type":"array","items":{"type":"string"},"description":"Array of dietary information","example":["vegetarian","gluten-free"]}}}}}},"responses":{"200":{"description":"Dish replaced successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete Dish (Admin)","description":"Permanently delete a dish from the system. This action cannot be undone.","tags":["Admin","Dishes","Meals"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the dish","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Dish deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing dish_id parameter","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/dishes/{dish_id}/review":{"post":{"summary":"Review Dish (Admin)","description":"Submit an administrative review for a specific dish, including approval/rejection status and optional notes. This endpoint is used for quality control and content moderation of chef-created dishes.","tags":["Admin","Dishes","Meals","Review"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the dish to review","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected","pending","needs_revision"],"description":"Review status decision","example":"approved"},"notes":{"type":"string","nullable":true,"description":"Optional administrative notes about the review","example":"Dish meets all quality standards. Approved for public listing."},"qualityScore":{"type":"number","minimum":1,"maximum":10,"nullable":true,"description":"Quality score from 1-10 (optional)","example":8},"issues":{"type":"array","items":{"type":"string"},"nullable":true,"description":"List of issues found during review (if any)","example":["Image quality could be improved","Description needs more detail"]},"recommendations":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Recommendations for improvement","example":["Add more detailed ingredient list","Include prep time"]},"reviewerComments":{"type":"string","nullable":true,"description":"Internal reviewer comments (not visible to chef)","example":"Chef has good technique, just needs better presentation"}}}}}},"responses":{"200":{"description":"Dish review submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"reviewId":{"type":"string","description":"ID of the created review record","example":"review_1234567890abcdef"},"dishId":{"type":"string","description":"ID of the reviewed dish","example":"j1234567890abcdef"},"status":{"type":"string","description":"Review status that was set","example":"approved"},"reviewedAt":{"type":"string","format":"date-time","description":"Timestamp when review was submitted","example":"2024-01-15T14:30:00Z"},"reviewerId":{"type":"string","description":"Admin user ID who performed the review","example":"j0987654321fedcba"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Dish not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"put":{"summary":"Update Dish Review (Admin)","description":"Update an existing administrative review for a dish. This endpoint allows modifying review status, notes, or other review details.","tags":["Admin","Dishes","Meals","Review"],"parameters":[{"in":"path","name":"dish_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the dish whose review to update","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string","enum":["approved","rejected","pending","needs_revision"],"description":"Updated review status decision","example":"needs_revision"},"notes":{"type":"string","nullable":true,"description":"Updated administrative notes","example":"Updated: Please improve image quality and add more detailed description."},"qualityScore":{"type":"number","minimum":1,"maximum":10,"nullable":true,"description":"Updated quality score from 1-10","example":6},"issues":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Updated list of issues found","example":["Image resolution too low","Missing allergen information"]},"recommendations":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Updated recommendations for improvement","example":["Upload higher resolution images","Add complete allergen list"]},"reviewerComments":{"type":"string","nullable":true,"description":"Updated internal reviewer comments","example":"Chef needs to improve presentation skills"}}}}}},"responses":{"200":{"description":"Dish review updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"reviewId":{"type":"string","description":"ID of the updated review record","example":"review_1234567890abcdef"},"dishId":{"type":"string","description":"ID of the reviewed dish","example":"j1234567890abcdef"},"status":{"type":"string","description":"Updated review status","example":"needs_revision"},"updatedAt":{"type":"string","format":"date-time","description":"Timestamp when review was updated","example":"2024-01-15T16:45:00Z"},"reviewerId":{"type":"string","description":"Admin user ID who updated the review","example":"j0987654321fedcba"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing dish_id or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Dish or review not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/chef/{chef_id}":{"get":{"summary":"Get Chef Documents (Admin)","description":"Retrieve all documents uploaded by a specific chef for administrative review. Only accessible by administrators.","tags":["Admin","Chef Management"],"parameters":[{"in":"path","name":"chef_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chef","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Chef documents retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"documents":{"type":"array","description":"Array of documents uploaded by the chef","items":{"type":"object","properties":{"_id":{"type":"string","description":"Document ID","example":"j0987654321fedcba"},"title":{"type":"string","description":"Document title","example":"Chef License"},"type":{"type":"string","description":"Document type","example":"license"},"status":{"type":"string","enum":["pending","approved","rejected","expired"],"description":"Document review status","example":"pending"},"uploadedBy":{"type":"string","description":"Chef ID who uploaded the document","example":"j1234567890abcdef"},"fileUrl":{"type":"string","description":"URL to access the document file","example":"https://storage.example.com/documents/license.pdf"},"fileSize":{"type":"number","description":"File size in bytes","example":1024000},"mimeType":{"type":"string","description":"MIME type of the document","example":"application/pdf"},"_creationTime":{"type":"number","description":"Document upload timestamp","example":1640995200000},"lastModified":{"type":"number","description":"Last modification timestamp","example":1640995200000}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing chef_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/chef/cuisines":{"get":{"summary":"Get All Chef Cuisines","description":"Retrieve all cuisine types available from chefs (admin only)","tags":["Admin","Chef","Cuisines"],"responses":{"200":{"description":"Chef cuisines retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cuisines":{"type":"array","description":"Array of cuisine types","items":{"type":"object","properties":{"cuisine":{"type":"string","description":"Cuisine type name","example":"italian"},"count":{"type":"number","description":"Number of chefs offering this cuisine","example":25},"chefs":{"type":"array","description":"List of chefs offering this cuisine","items":{"type":"object","properties":{"chefId":{"type":"string","example":"j1234567890abcdef"},"name":{"type":"string","example":"Chef Mario"},"rating":{"type":"number","example":4.8},"location":{"type":"object","properties":{"city":{"type":"string","example":"London"},"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]}}}}}},"total_dishes":{"type":"number","description":"Total dishes in this cuisine","example":150},"average_price":{"type":"number","description":"Average price for dishes in this cuisine","example":18.5}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/chef/cuisines/{cuisine_id}":{"get":{"summary":"Get Cuisine by ID (Admin)","description":"Retrieve detailed information about a specific cuisine type. Only accessible by administrators.","tags":["Admin","Chef Management","Cuisines"],"parameters":[{"in":"path","name":"cuisine_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the cuisine","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Cuisine retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"name":{"type":"string","description":"Cuisine name","example":"Italian"},"description":{"type":"string","nullable":true,"description":"Cuisine description","example":"Traditional Italian cuisine with authentic flavors"},"cuisine_image":{"type":"string","nullable":true,"description":"Cuisine image URL","example":"https://example.com/images/italian.jpg"},"cuisine_id":{"type":"string","description":"Cuisine ID","example":"j1234567890abcdef"},"created_at":{"type":"string","format":"date-time","description":"Creation timestamp","example":"2024-01-15T10:30:00Z"},"updated_at":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T10:30:00Z"},"cuisine_image_url":{"type":"string","nullable":true,"description":"Cuisine image URL","example":"https://example.com/images/italian.jpg"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing cuisine_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Cuisine not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"put":{"summary":"Update Cuisine (Admin)","description":"Update cuisine information including name, description, and image. Only accessible by administrators.","tags":["Admin","Chef Management","Cuisines"],"parameters":[{"in":"path","name":"cuisine_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the cuisine to update","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Updated cuisine name","example":"Italian Cuisine"},"description":{"type":"string","description":"Updated cuisine description","example":"Authentic Italian dishes with traditional recipes"},"image":{"type":"string","description":"Updated cuisine image URL","example":"https://example.com/images/italian-updated.jpg"}}}}}},"responses":{"200":{"description":"Cuisine updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing cuisine_id or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can update cuisines","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete Cuisine (Admin)","description":"Permanently delete a cuisine type. Only accessible by administrators. This action cannot be undone.","tags":["Admin","Chef Management","Cuisines"],"parameters":[{"in":"path","name":"cuisine_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the cuisine to delete","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Cuisine deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing cuisine_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can delete cuisines","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/chef/cuisines/pending":{"get":{"summary":"Get Pending Chef Cuisines (Admin)","description":"Retrieve all chef cuisine specializations that are pending approval. Only accessible by administrators for review purposes.","tags":["Admin","Chef Management","Cuisines"],"responses":{"200":{"description":"Pending chef cuisines retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"cuisines":{"type":"array","description":"Array of pending chef cuisines","items":{"type":"object","properties":{"_id":{"type":"string","description":"Chef cuisine ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID","example":"j0987654321fedcba"},"cuisineId":{"type":"string","description":"Cuisine type ID","example":"j1122334455fedcba"},"status":{"type":"string","enum":["pending","approved","rejected"],"description":"Approval status","example":"pending"},"chefName":{"type":"string","description":"Chef's name","example":"Chef Mario"},"cuisineName":{"type":"string","description":"Cuisine type name","example":"Italian"},"submittedAt":{"type":"string","format":"date-time","description":"When the cuisine was submitted for approval","example":"2024-01-15T10:30:00Z"},"experience":{"type":"number","description":"Years of experience in this cuisine","example":5},"specialties":{"type":"array","items":{"type":"string"},"description":"Specific specialties within the cuisine","example":["pasta","risotto","pizza"]}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/chef/cuisines/{cuisine_id}/approve":{"post":{"summary":"Approve Chef Cuisine (Admin)","description":"Approve a chef's cuisine specialization. This endpoint changes the cuisine status to 'approved' and allows the chef to offer dishes in this cuisine category.","tags":["Admin","Chef Management","Cuisines"],"parameters":[{"in":"path","name":"cuisine_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chef cuisine to approve","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Chef cuisine approved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Empty object indicating successful approval","example":{}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing cuisine_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"put":{"summary":"Update Chef Cuisine Status (Admin)","description":"Update the approval status of a chef's cuisine specialization. Can be set to 'approved' or 'rejected'.","tags":["Admin","Chef Management","Cuisines"],"parameters":[{"in":"path","name":"cuisine_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chef cuisine to update","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected"],"description":"New status for the chef cuisine","example":"approved"}}}}}},"responses":{"200":{"description":"Chef cuisine status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Empty object indicating successful update","example":{}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing cuisine_id or invalid status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/admin/webhooks-trigger":{"post":{"summary":"Trigger Webhooks (Admin)","description":"Manually trigger webhook events to multiple URLs for testing, debugging, or administrative purposes. This endpoint allows administrators to send custom webhook payloads to specified endpoints and receive delivery status reports.","tags":["Admin","Webhooks","Integration"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["event","urls"],"properties":{"event":{"type":"string","description":"Webhook event type identifier","example":"order.created"},"data":{"type":"object","additionalProperties":true,"description":"Payload data to send with the webhook","example":{"orderId":"order_123","customerId":"customer_456","amount":25.99,"status":"confirmed"}},"urls":{"type":"array","items":{"type":"string","format":"uri"},"minItems":1,"description":"Array of webhook URLs to trigger","example":["https://example.com/webhook","https://partner.com/api/webhook"]},"timeout":{"type":"number","default":5000,"description":"Request timeout in milliseconds","example":5000},"retryCount":{"type":"number","default":0,"description":"Number of retry attempts for failed deliveries","example":2}}}}}},"responses":{"200":{"description":"Webhooks triggered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"results":{"type":"array","description":"Delivery results for each URL","items":{"type":"object","properties":{"url":{"type":"string","description":"Webhook URL that was triggered","example":"https://example.com/webhook"},"status":{"type":"number","description":"HTTP status code received","example":200},"ok":{"type":"boolean","description":"Whether the request was successful","example":true},"error":{"type":"string","nullable":true,"description":"Error message if delivery failed","example":null},"responseTime":{"type":"number","description":"Response time in milliseconds","example":150}}}},"totalUrls":{"type":"number","description":"Total number of URLs triggered","example":2},"successfulDeliveries":{"type":"number","description":"Number of successful deliveries","example":2},"failedDeliveries":{"type":"number","description":"Number of failed deliveries","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - invalid webhook configuration","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/login":{"post":{"summary":"Admin Login","description":"Authenticate admin users and create session tokens","tags":["Admin","Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","description":"Admin email address","example":"admin@cribnosh.com"},"password":{"type":"string","description":"Admin password","example":"securePassword123"}}}}}},"responses":{"200":{"description":"Admin login successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"user":{"type":"object","properties":{"user_id":{"type":"string","description":"Admin user ID","example":"j1234567890abcdef"},"email":{"type":"string","example":"admin@cribnosh.com"},"name":{"type":"string","example":"Admin User"},"roles":{"type":"array","items":{"type":"string"},"example":["admin"]}}}}},"message":{"type":"string","example":"Success"}}}}},"headers":{"Set-Cookie":{"description":"Convex session token cookie","schema":{"type":"string","example":"convex-auth-token=session_token_here; HttpOnly; Secure; SameSite=Strict"}}}},"400":{"description":"Validation error - missing required fields or invalid JSON","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid credentials or not an admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"503":{"description":"Service unavailable - authentication service down","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/admin/logs-export":{"get":{"summary":"Export System Logs (Admin)","description":"Export system logs in JSON or CSV format with optional filtering. This endpoint allows administrators to download logs for analysis, compliance, or debugging purposes. The export action is logged for audit purposes.","tags":["Admin","System Operations"],"parameters":[{"in":"query","name":"format","schema":{"type":"string","enum":["json","csv"],"default":"json"},"description":"Export format for the logs","example":"csv"},{"in":"query","name":"action","schema":{"type":"string"},"description":"Filter logs by specific action","example":"user_login"},{"in":"query","name":"user","schema":{"type":"string"},"description":"Filter logs by admin user ID","example":"j1234567890abcdef"},{"in":"query","name":"start","schema":{"type":"string","format":"timestamp"},"description":"Start timestamp for log filtering (Unix timestamp)","example":"1640995200000"},{"in":"query","name":"end","schema":{"type":"string","format":"timestamp"},"description":"End timestamp for log filtering (Unix timestamp)","example":"1641081600000"}],"responses":{"200":{"description":"Logs exported successfully","content":{"application/json":{"schema":{"type":"array","description":"Array of log entries (when format=json)","items":{"type":"object","properties":{"_id":{"type":"string","description":"Log entry ID","example":"j1234567890abcdef"},"action":{"type":"string","description":"Action performed","example":"user_login"},"adminId":{"type":"string","description":"Admin user ID who performed the action","example":"j0987654321fedcba"},"timestamp":{"type":"number","description":"Log timestamp (Unix timestamp)","example":1640995200000},"details":{"type":"object","additionalProperties":true,"description":"Additional action details","example":{"ip":"192.168.1.1","userAgent":"Mozilla/5.0..."}}}}}},"text/csv":{"schema":{"type":"string","description":"CSV formatted log data (when format=csv)","example":"_id,action,adminId,timestamp,details\nj1234567890abcdef,user_login,j0987654321fedcba,1640995200000,\"{ip:192.168.1.1}\""}}},"headers":{"Content-Disposition":{"description":"File download header","schema":{"type":"string","example":"attachment; filename=logs-export.json"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/reviews":{"get":{"summary":"Get All Reviews (Admin)","description":"Retrieve all customer reviews in the system for administrative oversight and moderation. Only accessible by administrators.","tags":["Admin","Review Management"],"responses":{"200":{"description":"Reviews retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"reviews":{"type":"array","description":"Array of all reviews in the system","items":{"type":"object","properties":{"_id":{"type":"string","description":"Review ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID being reviewed","example":"j0987654321fedcba"},"mealId":{"type":"string","description":"Meal ID being reviewed","example":"j1122334455fedcba"},"userId":{"type":"string","description":"User ID who wrote the review","example":"j5566778899fedcba"},"rating":{"type":"number","minimum":1,"maximum":5,"description":"Rating from 1 to 5 stars","example":4},"comment":{"type":"string","description":"Review text content","example":"Great food, excellent service!"},"status":{"type":"string","enum":["pending","approved","rejected","flagged"],"description":"Review moderation status","example":"approved"},"createdAt":{"type":"number","description":"Review creation timestamp","example":1640995200000},"_creationTime":{"type":"number","description":"System creation timestamp","example":1640995200000},"sentiment":{"type":"object","description":"AI-analyzed sentiment data","properties":{"score":{"type":"number","example":0.85},"label":{"type":"string","example":"positive"},"confidence":{"type":"number","example":0.92}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/reviews/sentiment-batch":{"post":{"summary":"Batch Sentiment Analysis (Admin)","description":"Perform sentiment analysis on multiple reviews within a date range using AI models. This endpoint processes reviews and updates them with sentiment data for better insights and moderation.","tags":["Admin","Review Management","AI Analysis"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["model","start_date","end_date"],"properties":{"model":{"type":"string","description":"AI model to use for sentiment analysis","example":"gpt-4"},"start_date":{"type":"string","format":"date","description":"Start date for review filtering (YYYY-MM-DD)","example":"2024-01-01"},"end_date":{"type":"string","format":"date","description":"End date for review filtering (YYYY-MM-DD)","example":"2024-01-31"}}}}}},"responses":{"200":{"description":"Sentiment analysis completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"results":{"type":"array","description":"Array of sentiment analysis results","items":{"type":"object","properties":{"score":{"type":"number","minimum":-1,"maximum":1,"description":"Sentiment score (-1 to 1)","example":0.85},"label":{"type":"string","enum":["positive","negative","neutral"],"description":"Sentiment label","example":"positive"},"confidence":{"type":"number","minimum":0,"maximum":1,"description":"Confidence score (0 to 1)","example":0.92},"emotions":{"type":"array","items":{"type":"string"},"description":"Detected emotions","example":["joy","satisfaction"]}}}},"processedCount":{"type":"number","description":"Number of reviews processed","example":150}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid date format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can perform batch sentiment analysis","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error or emotions engine failure","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/reviews/{review_id}/approval":{"post":{"summary":"Approve/Reject Review (Admin)","description":"Approve or reject a customer review for publication. This endpoint allows administrators to moderate reviews and add approval notes. Changes are logged for audit purposes.","tags":["Admin","Review Management"],"parameters":[{"in":"path","name":"review_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the review to approve/reject","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected","flagged","pending"],"description":"New moderation status for the review","example":"approved"},"approvalNotes":{"type":"string","description":"Optional notes from the admin about the approval decision","example":"Review meets community guidelines"}}}}}},"responses":{"200":{"description":"Review status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing review_id or status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can approve/reject reviews","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"put":{"summary":"Update Review Approval Status (Admin)","description":"Update the approval status of a review. This is an alias for the POST endpoint with identical functionality.","tags":["Admin","Review Management"],"parameters":[{"in":"path","name":"review_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the review to update","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected","flagged","pending"],"description":"New moderation status for the review","example":"approved"},"approvalNotes":{"type":"string","description":"Optional notes from the admin about the approval decision","example":"Review meets community guidelines"}}}}}},"responses":{"200":{"description":"Review status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing review_id or status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can update review status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/{document_id}":{"get":{"summary":"Get Document by ID (Admin)","description":"Retrieve detailed information about a specific document for administrative review. Only accessible by administrators.","tags":["Admin","Document Management"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the document","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Document retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"document":{"type":"object","properties":{"_id":{"type":"string","description":"Document ID","example":"j1234567890abcdef"},"title":{"type":"string","description":"Document title","example":"Chef License Document"},"type":{"type":"string","description":"Document type","example":"license"},"status":{"type":"string","enum":["pending","approved","rejected","expired"],"description":"Document review status","example":"pending"},"uploadedBy":{"type":"string","description":"User ID who uploaded the document","example":"j0987654321fedcba"},"fileUrl":{"type":"string","description":"URL to access the document file","example":"https://storage.example.com/documents/doc123.pdf"},"fileSize":{"type":"number","description":"File size in bytes","example":1024000},"mimeType":{"type":"string","description":"MIME type of the document","example":"application/pdf"},"_creationTime":{"type":"number","description":"Document upload timestamp","example":1640995200000},"lastModified":{"type":"number","description":"Last modification timestamp","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing document_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Document not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/{document_id}/download":{"get":{"summary":"Get Document Download URL (Admin)","description":"Generate a presigned URL for downloading a document file. Only accessible by administrators for security purposes.","tags":["Admin","Document Management"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the document to download","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Download URL generated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"url":{"type":"string","format":"uri","description":"Presigned download URL with expiration","example":"https://storage.example.com/documents/doc123.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=..."},"expiresAt":{"type":"string","format":"date-time","description":"URL expiration timestamp","example":"2024-01-15T11:30:00Z"},"fileName":{"type":"string","description":"Original file name","example":"chef_license.pdf"},"fileSize":{"type":"number","description":"File size in bytes","example":1024000}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing document_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Document not found or presigned URL not available","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/{document_id}/review-new":{"post":{"summary":"Review New Document (Admin)","description":"Submit a review decision for a newly uploaded document using the updated review system. Only accessible by administrators.","tags":["Admin","Document Management"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the document to review","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected","expired"],"description":"Review decision for the document","example":"approved"},"notes":{"type":"string","description":"Optional review notes or comments","example":"Document meets all requirements"},"reviewerComments":{"type":"string","description":"Additional reviewer comments","example":"All documentation is complete and valid"}}}}}},"responses":{"200":{"description":"Document review submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"reviewId":{"type":"string","description":"ID of the review record","example":"j0987654321fedcba"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing document_id or invalid status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can review documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/{document_id}/review":{"post":{"summary":"Review Document (Admin)","description":"Submit a review decision for a document (approve, reject, or mark as expired). Only accessible by administrators.","tags":["Admin","Document Management"],"parameters":[{"in":"path","name":"document_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the document to review","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["status"],"properties":{"status":{"type":"string","enum":["approved","rejected","expired"],"description":"Review decision for the document","example":"approved"},"notes":{"type":"string","description":"Optional review notes or comments","example":"Document meets all requirements"}}}}}},"responses":{"200":{"description":"Document review submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing document_id or invalid status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can review documents","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/pending":{"get":{"summary":"Get Pending Items (Admin)","description":"Retrieve all pending items requiring admin approval including users, chefs, and dishes","tags":["Admin","Pending Items"],"responses":{"200":{"description":"Pending items retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"pendingUsers":{"type":"array","description":"Array of users with pending status","items":{"type":"object","properties":{"_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"user@example.com"},"name":{"type":"string","example":"John Doe"},"status":{"type":"string","example":"pending"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"}}}},"pendingChefs":{"type":"array","description":"Array of chefs with pending approval","items":{"type":"object","properties":{"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"name":{"type":"string","example":"Chef Mario"},"status":{"type":"string","example":"pending"},"specialties":{"type":"array","items":{"type":"string"},"example":["italian","pasta"]},"location":{"type":"object","properties":{"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]},"address":{"type":"string","example":"123 Baker Street, London"}}},"rating":{"type":"number","example":0},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"}}}},"pendingDishes":{"type":"array","description":"Array of dishes pending approval","items":{"type":"object","properties":{"_id":{"type":"string","description":"Dish ID","example":"j1234567890abcdef"},"name":{"type":"string","example":"Spaghetti Carbonara"},"description":{"type":"string","example":"Classic Italian pasta dish"},"price":{"type":"number","example":15.99},"chefId":{"type":"string","description":"Chef ID who created the dish","example":"j1234567890abcdef"},"cuisine":{"type":"string","example":"italian"},"status":{"type":"string","example":"pending"},"imageUrl":{"type":"string","nullable":true,"example":"https://example.com/dish-image.jpg"},"createdAt":{"type":"string","format":"date-time","example":"2024-01-15T10:30:00Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/me":{"get":{"summary":"Get Admin Profile","description":"Retrieve the current authenticated admin user's profile information","tags":["Admin","Authentication"],"responses":{"200":{"description":"Admin profile retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"user":{"type":"object","properties":{"_id":{"type":"string","description":"Admin user ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","example":"admin@cribnosh.com"},"name":{"type":"string","example":"Admin User"},"role":{"type":"string","description":"Primary role","example":"admin"},"roles":{"type":"array","items":{"type":"string"},"description":"All user roles","example":["admin"]},"status":{"type":"string","description":"User account status","example":"active"}}}}},"message":{"type":"string","example":"Admin user data retrieved successfully"}}}}}},"401":{"description":"Unauthorized - no session token or invalid token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - user is not an admin","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"cookieAuth":[]}]}},"/admin/orders/refund-eligibility-status":{"get":{"summary":"Get Order Refund Eligibility Status (Admin)","description":"Retrieve detailed refund eligibility information for orders. This endpoint provides comprehensive data about which orders are eligible for refunds, including time windows, reasons for ineligibility, and admin override capabilities.","tags":["Admin","Order Management"],"parameters":[{"in":"query","name":"orderId","schema":{"type":"string"},"description":"Specific order ID to check (optional)","example":"j1234567890abcdef"},{"in":"query","name":"customerId","schema":{"type":"string"},"description":"Filter by customer ID (optional)","example":"j0987654321fedcba"},{"in":"query","name":"status","schema":{"type":"string","enum":["refundable","non-refundable","expired"]},"description":"Filter by refund eligibility status (optional)","example":"refundable"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Maximum number of orders to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of orders to skip for pagination","example":0}],"responses":{"200":{"description":"Refund eligibility status retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"orders":{"type":"array","description":"Array of orders with refund eligibility information","items":{"type":"object","properties":{"orderId":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"isRefundable":{"type":"boolean","description":"Whether the order is currently refundable","example":true},"eligibility":{"type":"object","description":"Detailed eligibility information","properties":{"isEligible":{"type":"boolean","description":"Whether order is eligible for refund","example":true},"reason":{"type":"string","description":"Reason for eligibility status","example":"Within 24-hour refund window"},"timeRemaining":{"type":"number","nullable":true,"description":"Time remaining in refund window (milliseconds)","example":3600000},"timeExpired":{"type":"number","nullable":true,"description":"Time since refund window expired (milliseconds)","example":null},"canBeOverridden":{"type":"boolean","description":"Whether admin can override eligibility","example":true},"overrideReason":{"type":"string","description":"Reason why override is possible/not possible","example":"Admin can extend refund window"}}}}}}}},"message":{"type":"string","example":"Refund eligibility status retrieved successfully"}}}}}},"400":{"description":"Bad request - invalid parameters or limit exceeded","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/orders/bulk-refund-eligibility":{"post":{"summary":"Bulk Refund Eligibility Management","description":"Manage refund eligibility for multiple orders in bulk (admin only)","tags":["Admin","Orders","Refunds"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orders"],"properties":{"orders":{"type":"array","description":"Array of order refund eligibility operations","items":{"type":"object","required":["orderId","action","reason","description"],"properties":{"orderId":{"type":"string","description":"Order ID to modify","example":"j1234567890abcdef"},"action":{"type":"string","enum":["mark_non_refundable","mark_refundable","extend_window"],"description":"Action to perform on the order","example":"mark_non_refundable"},"reason":{"type":"string","description":"Reason for the action","example":"Customer request"},"description":{"type":"string","description":"Detailed description of the action","example":"Customer requested immediate refund ineligibility"},"newWindowHours":{"type":"number","nullable":true,"description":"New refund window in hours (for extend_window action)","example":48},"effectiveImmediately":{"type":"boolean","nullable":true,"description":"Whether to apply immediately (for mark_non_refundable action)","example":true},"metadata":{"type":"object","nullable":true,"description":"Additional metadata for the operation","example":{"adminNote":"Special case handling"}}}}},"globalReason":{"type":"string","nullable":true,"description":"Global reason applied to all orders if not specified individually","example":"Bulk admin operation"},"globalDescription":{"type":"string","nullable":true,"description":"Global description applied to all orders if not specified individually","example":"Bulk refund eligibility update"}}}}}},"responses":{"200":{"description":"Bulk refund eligibility operation completed","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"results":{"type":"object","properties":{"successful":{"type":"array","description":"Successfully processed orders","items":{"type":"object","properties":{"orderId":{"type":"string","example":"j1234567890abcdef"},"action":{"type":"string","example":"mark_non_refundable"},"orderStatus":{"type":"string","example":"completed"},"isRefundable":{"type":"boolean","example":false},"processedAt":{"type":"number","example":1640995200000}}}},"failed":{"type":"array","description":"Failed operations","items":{"type":"object","properties":{"orderId":{"type":"string","example":"j1234567890abcdef"},"error":{"type":"string","example":"Order not found"},"action":{"type":"string","example":"mark_refundable"}}}},"summary":{"type":"object","properties":{"total":{"type":"number","example":10},"successful":{"type":"number","example":8},"failed":{"type":"number","example":2}}}}},"message":{"type":"string","example":"Bulk operation completed: 8 successful, 2 failed"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid request body","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/orders/mark-non-refundable":{"post":{"summary":"Mark Order as Non-Refundable (Admin)","description":"Mark an order as non-refundable, revoking its refund eligibility. This endpoint allows administrators to prevent refunds for orders that violate terms of service, involve fraud, or for other business policy reasons. Can override the standard 24-hour refund window.","tags":["Admin","Order Management"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId","reason","description"],"properties":{"orderId":{"type":"string","description":"Unique identifier of the order to mark as non-refundable","example":"j1234567890abcdef"},"reason":{"type":"string","enum":["admin_override","fraud_detected","terms_violation","customer_agreement","business_policy","other"],"description":"Reason for marking the order as non-refundable","example":"fraud_detected"},"description":{"type":"string","description":"Detailed description of why the order is being marked as non-refundable","example":"Payment method flagged as fraudulent by payment processor"},"effectiveImmediately":{"type":"boolean","default":false,"description":"Whether to revoke refund eligibility immediately, overriding the 24-hour window","example":true},"metadata":{"type":"object","additionalProperties":{"type":"string"},"description":"Additional metadata for audit purposes","example":{"fraudScore":"high","paymentProcessorAlert":"true"}}}}}}},"responses":{"200":{"description":"Order marked as non-refundable successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Order marked as non-refundable successfully"},"orderId":{"type":"string","description":"ID of the updated order","example":"j1234567890abcdef"},"refundEligible":{"type":"boolean","description":"New refund eligibility status","example":false},"reason":{"type":"string","description":"Reason provided for the change","example":"fraud_detected"},"description":{"type":"string","description":"Description provided for the change","example":"Payment method flagged as fraudulent by payment processor"}}},"message":{"type":"string","example":"Order marked as non-refundable successfully"}}}}}},"400":{"description":"Bad request - missing required fields, order already non-refundable, or still within refund window","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/orders/mark-refundable":{"post":{"summary":"Mark Order as Refundable (Admin)","description":"Mark an order as refundable and optionally extend the refund window. This endpoint allows administrators to override refund eligibility for orders that may have been incorrectly marked as non-refundable or to extend refund windows for customer service purposes.","tags":["Admin","Order Management"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId","reason","description"],"properties":{"orderId":{"type":"string","description":"Unique identifier of the order to mark as refundable","example":"j1234567890abcdef"},"reason":{"type":"string","enum":["admin_override","customer_appeal","error_correction","business_discretion","other"],"description":"Reason for marking the order as refundable","example":"customer_appeal"},"description":{"type":"string","description":"Detailed description of why the order is being marked as refundable","example":"Customer provided valid documentation for refund request"},"extendWindow":{"type":"boolean","default":false,"description":"Whether to extend the refund window beyond the standard 24 hours","example":true},"newWindowHours":{"type":"number","default":24,"minimum":1,"maximum":168,"description":"New refund window duration in hours (1-168 hours)","example":48},"metadata":{"type":"object","additionalProperties":{"type":"string"},"description":"Additional metadata for audit purposes","example":{"customerServiceTicket":"CS-12345","managerApproval":"true"}}}}}}},"responses":{"200":{"description":"Order marked as refundable successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Order marked as refundable successfully"},"orderId":{"type":"string","description":"ID of the updated order","example":"j1234567890abcdef"},"refundEligible":{"type":"boolean","description":"New refund eligibility status","example":true},"reason":{"type":"string","description":"Reason provided for the change","example":"customer_appeal"},"description":{"type":"string","description":"Description provided for the change","example":"Customer provided valid documentation for refund request"}}},"message":{"type":"string","example":"Order marked as refundable successfully"}}}}}},"400":{"description":"Bad request - missing required fields or order already refundable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/logout":{"post":{"summary":"Admin Logout","description":"Log out admin users by clearing their session cookies. This endpoint invalidates the admin session and removes authentication cookies.","tags":["Admin","Authentication"],"responses":{"200":{"description":"Admin logged out successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}},"headers":{"Set-Cookie":{"description":"Cleared Convex session token cookie","schema":{"type":"string","example":"convex-auth-token=; HttpOnly; Secure; SameSite=Lax; Expires=Thu, 01 Jan 1970 00:00:00 GMT"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/admin/reports/user-growth":{"get":{"summary":"Get User Growth Report (Admin)","description":"Retrieve user growth analytics showing daily signup trends over the last 7 days. This endpoint provides insights into user acquisition patterns and growth metrics for administrative reporting.","tags":["Admin","Analytics","Reports"],"responses":{"200":{"description":"User growth report retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"labels":{"type":"array","items":{"type":"string","format":"date"},"description":"Array of date labels for the last 7 days (YYYY-MM-DD format)","example":["2024-01-09","2024-01-10","2024-01-11","2024-01-12","2024-01-13","2024-01-14","2024-01-15"]},"signups":{"type":"array","items":{"type":"number"},"description":"Array of daily signup counts corresponding to the labels","example":[5,8,12,7,15,9,11]},"total":{"type":"number","description":"Total number of users in the system","example":1250},"generatedAt":{"type":"string","format":"date-time","description":"Timestamp when the report was generated","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/chefs":{"get":{"summary":"Get Chef Analytics","description":"Retrieve comprehensive analytics data for chefs (admin only)","tags":["Admin","Analytics","Chef"],"parameters":[{"in":"query","name":"start","schema":{"type":"number"},"description":"Start timestamp for date range filter","example":1640995200000},{"in":"query","name":"end","schema":{"type":"number"},"description":"End timestamp for date range filter","example":1641081600000}],"responses":{"200":{"description":"Chef analytics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"total_chefs":{"type":"number","description":"Total number of chefs","example":150},"approved_chefs":{"type":"number","description":"Number of approved chefs","example":120},"pending_chefs":{"type":"number","description":"Number of pending chef applications","example":25},"active_chefs":{"type":"number","description":"Number of currently active chefs","example":95},"chef_distribution_by_cuisine":{"type":"object","description":"Distribution of chefs by cuisine type","example":{"italian":35,"chinese":28,"indian":22,"mexican":18,"japanese":15}},"period":{"type":"string","description":"Analysis period","example":"2024-01-01T00:00:00.000Z - 2024-01-31T23:59:59.999Z"},"chef_locations":{"type":"array","description":"Geographic distribution of chefs","items":{"type":"object","properties":{"chefId":{"type":"string","example":"j1234567890abcdef"},"name":{"type":"string","example":"Chef Mario"},"location":{"type":"object","properties":{"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]},"address":{"type":"string","example":"123 Baker Street, London"}}},"specialties":{"type":"array","items":{"type":"string"},"example":["italian","pasta"]},"status":{"type":"string","example":"active"},"rating":{"type":"number","example":4.8}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/top-chefs":{"get":{"summary":"Get Top Chefs Analytics","description":"Retrieve the top 5 chefs by order count for admin analytics dashboard","tags":["Admin","Analytics","Chefs"],"responses":{"200":{"description":"Top chefs data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"topChefs":{"type":"array","description":"Array of top 5 chefs by order count","items":{"type":"object","properties":{"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"name":{"type":"string","nullable":true,"description":"Chef name","example":"Chef Mario"},"orders":{"type":"number","description":"Total number of orders","example":45},"revenue":{"type":"string","description":"Total revenue formatted as currency","example":"$2,450.75"},"rating":{"type":"number","description":"Average rating","example":4.8},"email":{"type":"string","nullable":true,"description":"Chef email","example":"chef.mario@example.com"},"avatar":{"type":"string","nullable":true,"description":"Chef avatar URL","example":"https://example.com/avatar.jpg"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access analytics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/revenue-chart":{"get":{"summary":"Get Revenue Chart Data","description":"Retrieve revenue data grouped by date for admin analytics dashboard","tags":["Admin","Analytics","Revenue"],"parameters":[{"in":"query","name":"range","required":false,"schema":{"type":"string","enum":["day","week","month"],"default":"day"},"description":"Time range for grouping revenue data","example":"day"}],"responses":{"200":{"description":"Revenue chart data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"revenueChart":{"type":"array","description":"Array of revenue data points","items":{"type":"object","properties":{"date":{"type":"string","description":"Date in ISO format (YYYY-MM-DD for day, YYYY-MM-DD for week, YYYY-MM for month)","example":"2024-01-15"},"revenue":{"type":"number","description":"Total revenue for the date period","example":1250.75}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access analytics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/sales":{"get":{"summary":"Get Sales Analytics","description":"Retrieve comprehensive sales analytics data (admin only)","tags":["Admin","Analytics","Sales"],"parameters":[{"in":"query","name":"start","schema":{"type":"number"},"description":"Start timestamp for date range filter","example":1640995200000},{"in":"query","name":"end","schema":{"type":"number"},"description":"End timestamp for date range filter","example":1641081600000}],"responses":{"200":{"description":"Sales analytics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"sales_by_status":{"type":"object","description":"Sales breakdown by order status","example":{"confirmed":{"count":150,"revenue":3750},"pending":{"count":25,"revenue":625},"cancelled":{"count":10,"revenue":0}}},"sales_by_cuisine":{"type":"object","description":"Sales breakdown by cuisine type","example":{"italian":{"count":45,"revenue":1125},"chinese":{"count":38,"revenue":950},"indian":{"count":32,"revenue":800}}},"total_revenue":{"type":"number","description":"Total revenue in the period","example":4375},"total_orders":{"type":"number","description":"Total number of orders","example":185},"average_order_value":{"type":"number","description":"Average order value","example":23.65},"period":{"type":"string","description":"Analysis period","example":"2024-01-01T00:00:00.000Z - 2024-01-31T23:59:59.999Z"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/recent-orders":{"get":{"summary":"Get Recent Orders Analytics","description":"Retrieve the 20 most recent orders for admin analytics dashboard","tags":["Admin","Analytics","Orders"],"responses":{"200":{"description":"Recent orders retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"recentOrders":{"type":"array","description":"Array of recent orders (max 20)","items":{"type":"object","properties":{"_id":{"type":"string","description":"Order ID","example":"j1234567890abcdef"},"order_id":{"type":"string","description":"Public order ID","example":"ORD-12345"},"customer_id":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"chef_id":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","completed","cancelled"],"description":"Order status","example":"preparing"},"total_amount":{"type":"number","description":"Total order amount","example":25.99},"payment_status":{"type":"string","enum":["pending","processing","completed","failed","refunded"],"description":"Payment status","example":"completed"},"createdAt":{"type":"string","format":"date-time","description":"Order creation timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access analytics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/users":{"get":{"summary":"Get User Analytics","description":"Retrieve comprehensive user analytics data (admin only)","tags":["Admin","Analytics","User Management"],"parameters":[{"in":"query","name":"start","schema":{"type":"number"},"description":"Start timestamp for date range filter","example":1640995200000},{"in":"query","name":"end","schema":{"type":"number"},"description":"End timestamp for date range filter","example":1641081600000}],"responses":{"200":{"description":"User analytics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"total_users":{"type":"number","description":"Total number of users","example":1250},"customers":{"type":"number","description":"Number of customer users","example":1100},"chefs":{"type":"number","description":"Number of chef users","example":120},"admins":{"type":"number","description":"Number of admin users","example":5},"staff":{"type":"number","description":"Number of staff users","example":25},"active_users":{"type":"number","description":"Number of active users","example":1180},"user_growth":{"type":"array","description":"Daily user growth data","items":{"type":"object","properties":{"date":{"type":"string","format":"date","example":"2024-01-15"},"total_users":{"type":"number","example":1250},"new_users":{"type":"number","example":15}}}},"user_distribution":{"type":"object","description":"User distribution by role","example":{"customer":88,"chef":9.6,"staff":2,"admin":0.4}},"period":{"type":"string","description":"Analysis period","example":"2024-01-01T00:00:00.000Z - 2024-01-31T23:59:59.999Z"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics/top-menus":{"get":{"summary":"Get Top Menus Analytics","description":"Retrieve the top 5 menu items by order count for admin analytics dashboard","tags":["Admin","Analytics","Menus"],"responses":{"200":{"description":"Top menus data retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"topMenus":{"type":"array","description":"Array of top 5 menu items by order count","items":{"type":"object","properties":{"menu_id":{"type":"string","description":"Menu item ID","example":"j1234567890abcdef"},"name":{"type":"string","nullable":true,"description":"Menu item name","example":"Spaghetti Carbonara"},"orders":{"type":"number","description":"Total number of orders for this menu item","example":32},"revenue":{"type":"string","description":"Total revenue formatted as currency","example":"$1,280.00"},"chef":{"type":"string","nullable":true,"description":"Chef name who created the menu item","example":"Chef Mario"},"chef_id":{"type":"string","nullable":true,"description":"Chef ID","example":"j1234567890abcdef"},"dish_image":{"type":"string","nullable":true,"description":"Menu item image URL","example":"https://example.com/dish-image.jpg"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access analytics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/analytics-overview":{"get":{"summary":"Get Analytics Overview","description":"Get comprehensive analytics overview for admin dashboard with revenue, orders, users, and trends","tags":["Admin","Analytics"],"parameters":[{"in":"query","name":"start","schema":{"type":"number"},"description":"Start timestamp for date range filter","example":1640995200000},{"in":"query","name":"end","schema":{"type":"number"},"description":"End timestamp for date range filter","example":1641081600000}],"responses":{"200":{"description":"Analytics overview retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"total_revenue":{"type":"number","description":"Total revenue in the specified period","example":45678.5},"total_orders":{"type":"number","description":"Total number of orders in the period","example":1250},"average_order_value":{"type":"number","description":"Average order value","example":36.54},"total_users":{"type":"number","description":"Total number of users in the period","example":850},"revenue_trend":{"type":"number","description":"Revenue trend percentage change from previous period","example":15.5},"orders_trend":{"type":"number","description":"Orders trend percentage change from previous period","example":8.2},"aov_trend":{"type":"number","description":"Average order value trend percentage change","example":6.7},"users_trend":{"type":"number","description":"Users trend percentage change from previous period","example":12.3}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access analytics","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/admin/emotions-engine/logs":{"get":{"summary":"Get emotions engine logs","description":"Retrieve logs from the AI emotions engine with optional filtering","tags":["Admin - Emotions Engine"],"parameters":[{"in":"query","name":"userId","schema":{"type":"string"},"description":"Filter by user ID"},{"in":"query","name":"provider","schema":{"type":"string"},"description":"Filter by AI provider"},{"in":"query","name":"intent","schema":{"type":"string"},"description":"Filter by intent type"},{"in":"query","name":"from","schema":{"type":"number"},"description":"Start timestamp for filtering"},{"in":"query","name":"to","schema":{"type":"number"},"description":"End timestamp for filtering"},{"in":"query","name":"limit","schema":{"type":"integer","default":50},"description":"Number of logs to retrieve"},{"in":"query","name":"offset","schema":{"type":"integer","default":0},"description":"Number of logs to skip"}],"responses":{"200":{"description":"Logs retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"total":{"type":"number","description":"Total number of logs"},"results":{"type":"array","items":{"type":"object"}}}},"message":{"type":"string","example":"Success"}}}}}},"403":{"description":"Forbidden - Admin access required"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/admin/all":{"get":{"summary":"Get Complete Admin Summary (Admin)","description":"Retrieve comprehensive system overview including all users, chefs, and orders for administrative dashboard. This endpoint provides a complete snapshot of platform data for system monitoring and management.","tags":["Admin","Dashboard","Summary"],"responses":{"200":{"description":"Complete admin summary retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"usersCount":{"type":"number","description":"Total number of users in the system","example":1250},"chefsCount":{"type":"number","description":"Total number of chefs in the system","example":85},"ordersCount":{"type":"number","description":"Total number of orders in the system","example":3420},"users":{"type":"array","description":"Complete list of all users","items":{"type":"object","properties":{"_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"User's full name","example":"John Doe"},"email":{"type":"string","description":"User's email address","example":"john.doe@example.com"},"role":{"type":"string","enum":["customer","chef","admin","staff"],"description":"User role","example":"customer"},"createdAt":{"type":"string","format":"date-time","description":"Account creation timestamp","example":"2024-01-15T10:00:00Z"},"lastActive":{"type":"string","format":"date-time","nullable":true,"description":"Last activity timestamp","example":"2024-01-15T14:30:00Z"},"status":{"type":"string","enum":["active","inactive","suspended","pending"],"description":"Account status","example":"active"},"avatar":{"type":"string","nullable":true,"description":"User avatar URL","example":"https://example.com/avatar.jpg"}}}},"chefs":{"type":"array","description":"Complete list of all chefs","items":{"type":"object","properties":{"chefId":{"type":"string","description":"Chef ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"Associated user ID","example":"j0987654321fedcba"},"bio":{"type":"string","description":"Chef biography","example":"Professional chef with 10 years of experience"},"specialties":{"type":"array","items":{"type":"string"},"description":"Chef specialties","example":["Italian","Mediterranean","Seafood"]},"location":{"type":"string","description":"Chef location","example":"New York, NY"},"rating":{"type":"number","nullable":true,"description":"Average chef rating","example":4.8},"totalOrders":{"type":"number","description":"Total orders completed","example":150},"status":{"type":"string","enum":["active","inactive","pending_approval","suspended"],"description":"Chef status","example":"active"},"verified":{"type":"boolean","description":"Whether chef is verified","example":true},"joinedAt":{"type":"string","format":"date-time","description":"Chef registration timestamp","example":"2024-01-01T00:00:00Z"}}}},"orders":{"type":"array","description":"Complete list of all orders","items":{"type":"object","properties":{"_id":{"type":"string","description":"Order ID","example":"order_1234567890abcdef"},"customerId":{"type":"string","description":"Customer ID","example":"j1234567890abcdef"},"chefId":{"type":"string","description":"Chef ID","example":"j0987654321fedcba"},"total_amount":{"type":"number","description":"Order total amount","example":25.99},"order_status":{"type":"string","enum":["pending","confirmed","preparing","ready","delivered","cancelled"],"description":"Current order status","example":"confirmed"},"order_date":{"type":"string","format":"date-time","description":"Order creation timestamp","example":"2024-01-15T12:00:00Z"},"delivery_date":{"type":"string","format":"date-time","nullable":true,"description":"Scheduled delivery timestamp","example":"2024-01-15T18:00:00Z"},"cuisine_id":{"type":"string","nullable":true,"description":"Cuisine type ID","example":"cuisine_italian"},"payment_status":{"type":"string","enum":["pending","paid","failed","refunded"],"description":"Payment status","example":"paid"},"delivery_address":{"type":"object","nullable":true,"description":"Delivery address","properties":{"street":{"type":"string","example":"123 Main St"},"city":{"type":"string","example":"New York"},"state":{"type":"string","example":"NY"},"zipCode":{"type":"string","example":"10001"}}}}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/users":{"get":{"summary":"Get All Users (Admin)","description":"Retrieve a paginated list of all users in the system (admin only)","tags":["Admin","User Management"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of users to return per page","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of users to skip","example":0}],"responses":{"200":{"description":"Users retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"users":{"type":"array","description":"Array of user objects","items":{"type":"object","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"email":{"type":"string","example":"user@example.com"},"name":{"type":"string","example":"John Doe"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]},"status":{"type":"string","example":"active"},"_creationTime":{"type":"number","example":1640995200000}}}},"total":{"type":"number","description":"Total number of users","example":1250},"limit":{"type":"number","example":20},"offset":{"type":"number","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Bulk Delete Users (Admin)","description":"Delete multiple users by their IDs (admin only)","tags":["Admin","User Management"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["user_ids"],"properties":{"user_ids":{"type":"array","items":{"type":"string"},"description":"Array of user IDs to delete","example":["j1234567890abcdef","j0987654321fedcba"]}}}}}},"responses":{"200":{"description":"Users deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"deleted":{"type":"number","description":"Number of users deleted","example":2}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing or invalid user_ids","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can bulk delete users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Validation error - user_ids array is required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/users/approve-chef/{chef_id}":{"post":{"summary":"Approve Chef Application (Admin)","description":"Approve a chef application and activate their account. This endpoint changes the chef's status to 'active' and allows them to start accepting orders.","tags":["Admin","Chef Management"],"parameters":[{"in":"path","name":"chef_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chef to approve","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Chef approved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"chefId":{"type":"string","description":"ID of the approved chef","example":"j1234567890abcdef"},"status":{"type":"string","description":"New chef status","example":"active"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing chef_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can approve chefs","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/users/reject-chef/{chef_id}":{"post":{"summary":"Reject Chef Application (Admin)","description":"Reject a chef application and deactivate their account. This endpoint changes the chef's status to 'inactive' and prevents them from accepting orders.","tags":["Admin","Chef Management"],"parameters":[{"in":"path","name":"chef_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the chef to reject","example":"j1234567890abcdef"}],"responses":{"200":{"description":"Chef rejected successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"first_name":{"type":"string","description":"Chef's first name","example":"John"},"last_name":{"type":"string","description":"Chef's last name","example":"Doe"},"profile_id":{"type":"string","description":"Chef profile ID","example":"j1234567890abcdef"},"user_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"is_approved":{"type":"boolean","description":"Approval status","example":false},"status":{"type":"string","description":"Chef status","example":"rejected"},"avg_rating":{"type":"number","description":"Average rating","example":0},"total_reviews":{"type":"number","description":"Total number of reviews","example":0},"total_orders":{"type":"number","description":"Total number of orders","example":0},"is_available":{"type":"boolean","description":"Availability status","example":false},"created_at":{"type":"string","format":"date-time","description":"Account creation date","example":"2024-01-15T10:30:00Z"},"updated_at":{"type":"string","format":"date-time","description":"Last update date","example":"2024-01-15T10:30:00Z"},"profile_image_url":{"type":"string","nullable":true,"description":"Profile image URL","example":"https://example.com/avatar.jpg"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing chef_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can reject chefs","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Chef not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/users/startup":{"get":{"summary":"Get Recent Users for Startup Dashboard (Admin)","description":"Retrieve a list of recently registered users for the admin startup dashboard. Provides quick access to new user activity and onboarding metrics.","tags":["Admin","User Management"],"responses":{"200":{"description":"Recent users retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","description":"Array of recent user objects","items":{"type":"object","properties":{"_id":{"type":"string","description":"User ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"User's full name","example":"John Doe"},"email":{"type":"string","format":"email","description":"User's email address","example":"john@example.com"},"roles":{"type":"array","items":{"type":"string"},"description":"User roles","example":["customer"]},"status":{"type":"string","description":"Account status","example":"active"},"_creationTime":{"type":"number","description":"Account creation timestamp","example":1640995200000}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/users/{user_id}":{"get":{"summary":"Get User by ID (Admin)","description":"Retrieve detailed information about a specific user by their ID. Only accessible by administrators.","tags":["Admin","User Management"],"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the user","example":"j1234567890abcdef"}],"responses":{"200":{"description":"User retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"user":{"type":"object","properties":{"_id":{"type":"string","example":"j1234567890abcdef"},"name":{"type":"string","example":"John Doe"},"email":{"type":"string","example":"john@example.com"},"roles":{"type":"array","items":{"type":"string"},"example":["customer"]},"status":{"type":"string","example":"active"},"_creationTime":{"type":"number","example":1640995200000}}}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"patch":{"summary":"Update User (Admin)","description":"Partially update user information. Only accessible by administrators. Changes are logged for audit purposes.","tags":["Admin","User Management"],"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the user","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"User's full name","example":"John Smith"},"email":{"type":"string","format":"email","description":"User's email address","example":"john.smith@example.com"},"roles":{"type":"array","items":{"type":"string","enum":["customer","chef","admin","staff"]},"description":"User roles","example":["customer"]},"status":{"type":"string","enum":["active","inactive","suspended"],"description":"User account status","example":"active"}}}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid user data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can update users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"put":{"summary":"Replace User Data (Admin)","description":"Completely replace user information. Only accessible by administrators. Protected fields are automatically excluded.","tags":["Admin","User Management"],"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the user","example":"j1234567890abcdef"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"User's full name","example":"John Smith"},"email":{"type":"string","format":"email","description":"User's email address","example":"john.smith@example.com"},"roles":{"type":"array","items":{"type":"string","enum":["customer","chef","admin","staff"]},"description":"User roles","example":["customer"]},"status":{"type":"string","enum":["active","inactive","suspended"],"description":"User account status","example":"active"}}}}}},"responses":{"200":{"description":"User replaced successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid user data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can replace users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"delete":{"summary":"Delete User (Admin)","description":"Permanently delete a user account. Only accessible by administrators. This action is logged for audit purposes.","tags":["Admin","User Management"],"parameters":[{"in":"path","name":"user_id","required":true,"schema":{"type":"string"},"description":"Unique identifier of the user to delete","example":"j1234567890abcdef"}],"responses":{"200":{"description":"User deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can delete users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/logs":{"get":{"summary":"Get System Logs (Admin)","description":"Retrieve system logs for administrative monitoring and debugging. This endpoint provides access to application logs, error logs, and system events with pagination support. Only accessible by administrators.","tags":["Admin","System Operations"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Maximum number of log entries to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of log entries to skip for pagination","example":0}],"responses":{"200":{"description":"System logs retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"logs":{"type":"array","description":"Array of system log entries","items":{"type":"object","properties":{"_id":{"type":"string","description":"Log entry ID","example":"j1234567890abcdef"},"level":{"type":"string","enum":["debug","info","warn","error","fatal"],"description":"Log level","example":"error"},"message":{"type":"string","description":"Log message","example":"Database connection failed"},"timestamp":{"type":"number","description":"Log timestamp (Unix timestamp)","example":1640995200000},"source":{"type":"string","description":"Source component or service","example":"database"},"userId":{"type":"string","nullable":true,"description":"User ID if applicable","example":"j0987654321fedcba"},"metadata":{"type":"object","additionalProperties":true,"description":"Additional log metadata","example":{"requestId":"req-123","ip":"192.168.1.1"}}}}},"total":{"type":"number","description":"Total number of log entries available","example":1500},"limit":{"type":"number","description":"Applied limit parameter","example":20},"offset":{"type":"number","description":"Applied offset parameter","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/admin/email-config":{"get":{"summary":"Get Email Configuration (Admin)","description":"Retrieve email configuration settings for templates, automations, branding, delivery, analytics, and compliance. Supports filtering by category and specific configuration ID.","tags":["Admin","System Operations","Email"],"parameters":[{"in":"query","name":"category","schema":{"type":"string","enum":["templates","automations","branding","delivery","analytics","compliance"]},"description":"Email configuration category to retrieve","example":"templates"},{"in":"query","name":"id","schema":{"type":"string"},"description":"Specific configuration ID (requires category parameter)","example":"welcome-email-template"}],"responses":{"200":{"description":"Email configuration retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"config":{"type":"object","description":"Single configuration object (when id parameter provided)","properties":{"id":{"type":"string","description":"Configuration ID","example":"welcome-email-template"},"name":{"type":"string","description":"Configuration name","example":"Welcome Email Template"},"content":{"type":"object","description":"Configuration content and settings","example":{"subject":"Welcome to CribNosh!","body":"Thank you for joining..."}},"category":{"type":"string","description":"Configuration category","example":"templates"},"isActive":{"type":"boolean","description":"Whether configuration is active","example":true},"lastModified":{"type":"string","format":"date-time","description":"Last modification timestamp","example":"2024-01-15T10:30:00Z"}}},"configs":{"type":"array","description":"Array of configuration objects (when category parameter provided or all configs)","items":{"type":"object","properties":{"id":{"type":"string","description":"Configuration ID","example":"welcome-email-template"},"name":{"type":"string","description":"Configuration name","example":"Welcome Email Template"},"content":{"type":"object","description":"Configuration content and settings"},"category":{"type":"string","description":"Configuration category","example":"templates"},"isActive":{"type":"boolean","description":"Whether configuration is active","example":true},"lastModified":{"type":"string","format":"date-time","description":"Last modification timestamp","example":"2024-01-15T10:30:00Z"}}}}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - invalid category or missing required parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Configuration not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"post":{"summary":"Create Email Configuration (Admin)","description":"Create or update email configuration settings. This endpoint allows administrators to manage email templates, automations, branding, delivery settings, analytics, and compliance configurations.","tags":["Admin","System Operations","Email"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["category","configId","config"],"properties":{"category":{"type":"string","enum":["templates","automations","branding","delivery","analytics","compliance"],"description":"Email configuration category","example":"templates"},"configId":{"type":"string","description":"Unique identifier for the configuration","example":"welcome-email-template"},"config":{"type":"object","description":"Configuration content and settings","properties":{"name":{"type":"string","description":"Configuration display name","example":"Welcome Email Template"},"content":{"type":"object","description":"Configuration-specific content","example":{"subject":"Welcome to CribNosh!","body":"Thank you for joining..."}},"isActive":{"type":"boolean","description":"Whether configuration is active","example":true},"metadata":{"type":"object","additionalProperties":true,"description":"Additional configuration metadata","example":{"version":"1.0","author":"admin"}}}}}}}}},"responses":{"200":{"description":"Email configuration created/updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Configuration updated successfully"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields or invalid category","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"put":{"summary":"Update Email Configuration (Admin)","description":"Update email configuration with validation. This endpoint performs validation checks before updating configurations and returns warnings for potential issues.","tags":["Admin","System Operations","Email"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["category","configId","config"],"properties":{"category":{"type":"string","enum":["templates","automations","branding","delivery","analytics","compliance"],"description":"Email configuration category","example":"templates"},"configId":{"type":"string","description":"Unique identifier for the configuration","example":"welcome-email-template"},"config":{"type":"object","description":"Updated configuration content and settings","properties":{"name":{"type":"string","description":"Configuration display name","example":"Welcome Email Template"},"content":{"type":"object","description":"Configuration-specific content","example":{"subject":"Welcome to CribNosh!","body":"Thank you for joining..."}},"isActive":{"type":"boolean","description":"Whether configuration is active","example":true},"metadata":{"type":"object","additionalProperties":true,"description":"Additional configuration metadata","example":{"version":"1.1","author":"admin"}}}}}}}}},"responses":{"200":{"description":"Email configuration updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Configuration updated successfully"},"warnings":{"type":"array","items":{"type":"string"},"description":"Validation warnings (if any)","example":["Template contains placeholder that may not be replaced"]}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields, invalid category, or validation failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"delete":{"summary":"Delete Email Configuration (Admin)","description":"Delete email configuration. Note that branding, delivery, analytics, and compliance configurations cannot be deleted and can only be updated.","tags":["Admin","System Operations","Email"],"parameters":[{"in":"query","name":"category","required":true,"schema":{"type":"string","enum":["templates","automations","branding","delivery","analytics","compliance"]},"description":"Email configuration category","example":"templates"},{"in":"query","name":"id","required":true,"schema":{"type":"string"},"description":"Configuration ID to delete","example":"welcome-email-template"}],"responses":{"200":{"description":"Email configuration deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Configuration deleted successfully"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required parameters or configuration type cannot be deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/api/admin/email-config/import":{"post":{"summary":"Import email configurations","description":"Import email templates or automation configurations from a JSON file","tags":["Admin - Email Configuration"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file","category"],"properties":{"file":{"type":"string","format":"binary","description":"JSON configuration file to import"},"category":{"type":"string","enum":["templates","automations"],"description":"Configuration category"},"overwrite":{"type":"boolean","default":false,"description":"Whether to overwrite existing configurations"}}}}}},"responses":{"200":{"description":"Configurations imported successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Successfully imported 5 configurations"},"imported":{"type":"number","description":"Number of configurations imported"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing file/category or invalid JSON"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/api/admin/email-config/validate":{"post":{"summary":"Validate email configuration","description":"Validate email templates or automation configurations before saving","tags":["Admin - Email Configuration"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["category","config"],"properties":{"category":{"type":"string","enum":["templates","automations"],"description":"Configuration category to validate"},"config":{"type":"object","description":"Configuration object to validate"}}}}}},"responses":{"200":{"description":"Validation completed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"valid":{"type":"boolean","description":"Whether the configuration is valid"},"errors":{"type":"array","items":{"type":"string"},"description":"Validation errors"},"warnings":{"type":"array","items":{"type":"string"},"description":"Validation warnings"},"score":{"type":"number","description":"Validation score (0-100)"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - Missing required fields"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/api/admin/email-config/export":{"get":{"summary":"Export email configurations","description":"Export email templates and automation configurations in JSON or YAML format","tags":["Admin - Email Configuration"],"parameters":[{"in":"query","name":"category","required":true,"schema":{"type":"string"},"description":"Configuration category to export (e.g., templates, automations)"},{"in":"query","name":"format","schema":{"type":"string","enum":["json","yaml"],"default":"json"},"description":"Export format"}],"responses":{"200":{"description":"Configuration exported successfully","content":{"application/json":{"schema":{"type":"object"}},"text/yaml":{"schema":{"type":"string"}}}},"400":{"description":"Validation error - Missing category or invalid format"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/admin/realtime-broadcast":{"post":{"summary":"Broadcast Real-time Event (Admin)","description":"Broadcast real-time events to all connected clients through Convex subscriptions. This endpoint allows administrators to send system-wide notifications, updates, or announcements to all active users in real-time.","tags":["Admin","Real-time","Broadcasting"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["event"],"properties":{"event":{"type":"string","description":"Event type identifier for real-time broadcasting","example":"system.announcement"},"data":{"type":"object","additionalProperties":true,"description":"Event payload data to broadcast","example":{"title":"System Maintenance","message":"Scheduled maintenance will begin in 30 minutes","type":"warning","duration":1800}},"targetAudience":{"type":"string","enum":["all","customers","chefs","admins","staff"],"default":"all","description":"Target audience for the broadcast","example":"all"},"priority":{"type":"string","enum":["low","normal","high","urgent"],"default":"normal","description":"Priority level of the broadcast","example":"high"},"expiresAt":{"type":"string","format":"date-time","nullable":true,"description":"Optional expiration time for the broadcast","example":"2024-01-15T18:00:00Z"},"metadata":{"type":"object","additionalProperties":true,"description":"Additional metadata for the broadcast","example":{"source":"admin_dashboard","category":"maintenance","version":"1.0"}}}}}}},"responses":{"200":{"description":"Real-time event broadcasted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","description":"Success message","example":"Event broadcasted via Convex"},"event":{"type":"string","description":"Event type that was broadcasted","example":"system.announcement"},"changeId":{"type":"string","description":"Unique identifier for the broadcast event","example":"change_1234567890abcdef"},"timestamp":{"type":"number","description":"Unix timestamp when event was broadcasted","example":1705334400000},"targetAudience":{"type":"string","description":"Target audience for the broadcast","example":"all"},"estimatedReach":{"type":"number","description":"Estimated number of connected clients","example":150}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Bad request - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - admin access required","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Unprocessable entity - invalid event data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/timelogs":{"post":{"summary":"Create timelog","description":"Create a new timelog entry with activity watch logs","tags":["Timelogs"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["user","bucket","logs"],"properties":{"user":{"type":"string","description":"Username or email of the staff member","example":"john.doe@example.com"},"bucket":{"type":"string","description":"Bucket name for the timelog","example":"work"},"logs":{"type":"array","description":"Array of activity watch logs","items":{"type":"object","required":["timestamp","duration","data"],"properties":{"timestamp":{"type":"string","description":"ISO timestamp of the activity","example":"2024-01-15T10:30:00.000Z"},"duration":{"type":"number","description":"Duration of the activity in seconds","example":3600},"data":{"type":"object","description":"Additional activity data","example":{"app":"vscode","title":"coding"}}}}}}}}}},"responses":{"200":{"description":"Timelog created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Success"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Staff member not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]},{"cookieAuth":[]}]}},"/notion-sync":{"post":{"summary":"Notion Sync Queue","description":"Add data to Notion synchronization queue for external data management","tags":["Integrations","Sync"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["id","table"],"properties":{"id":{"type":"string","description":"ID of the record to sync","example":"j1234567890abcdef"},"table":{"type":"string","enum":["waitlist"],"description":"Table name to sync","example":"waitlist"}}}}}},"responses":{"200":{"description":"Record added to sync queue successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Added to sync queue"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid table","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[],"x-integration":{"description":"This endpoint manages data synchronization with Notion:\n\n**Supported Tables:**\n- `waitlist`: Sync waitlist entries to Notion database\n\n**Sync Process:**\n- Adds records to background sync queue\n- Processes synchronously to avoid blocking\n- Handles retries and error recovery\n- Maintains data consistency between systems\n\n**Use Cases:**\n- Customer waitlist management\n- Lead tracking and CRM integration\n- Data backup and external storage\n- Team collaboration and reporting\n"}}},"/emotions-engine":{"post":{"summary":"Emotions Engine Processing","description":"Process user emotions and context to provide personalized meal recommendations","tags":["AI","Recommendations"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"userId":{"type":"string","nullable":true,"description":"User ID for personalized recommendations","example":"j1234567890abcdef"},"location":{"type":"object","nullable":true,"description":"User's current location","properties":{"latitude":{"type":"number","example":51.5074},"longitude":{"type":"number","example":-0.1278},"address":{"type":"string","nullable":true,"example":"London, UK"}}},"emotions":{"type":"array","items":{"type":"string"},"nullable":true,"description":"Current emotional state","example":["happy","excited","hungry"]},"preferences":{"type":"object","nullable":true,"description":"User dietary preferences and restrictions","properties":{"dietaryRestrictions":{"type":"array","items":{"type":"string"},"example":["vegetarian","gluten-free"]},"allergies":{"type":"array","items":{"type":"string"},"example":["nuts","dairy"]},"cuisinePreferences":{"type":"array","items":{"type":"string"},"example":["italian","mexican","indian"]},"spiceLevel":{"type":"string","enum":["mild","medium","hot","extra-hot"],"example":"medium"}}},"context":{"type":"object","nullable":true,"description":"Additional context for recommendations","properties":{"timeOfDay":{"type":"string","example":"dinner"},"occasion":{"type":"string","example":"date_night"},"budget":{"type":"string","enum":["low","medium","high","premium"],"example":"medium"},"cookingTime":{"type":"number","description":"Available cooking time in minutes","example":30}}},"searchQuery":{"type":"string","nullable":true,"description":"Text search query","example":"spicy pasta"}}}}}},"responses":{"200":{"description":"Emotions processed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Empty object on success (processing is asynchronous)","example":{}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[],"x-ai-features":{"description":"This endpoint powers CribNosh's AI-driven recommendation system:\n\n**Context Aggregation:**\n- Merges frontend user input with backend user data\n- Fetches nearby chef specialties based on location\n- Considers user's historical preferences and behavior\n\n**Emotional Analysis:**\n- Processes user's current emotional state\n- Maps emotions to appropriate meal types and cuisines\n- Considers time of day and occasion context\n\n**Personalization:**\n- Takes into account dietary restrictions and allergies\n- Considers budget and cooking time constraints\n- Learns from user's past orders and ratings\n\n**Location Intelligence:**\n- Finds nearby chefs within 10km radius\n- Considers local cuisine availability\n- Factors in delivery time and logistics\n\n**AI Processing:**\n- Runs inference using aggregated context\n- Generates personalized meal recommendations\n- Updates user preference models\n"}}},"/metrics":{"get":{"summary":"Get System Metrics","description":"Retrieve system-wide metrics including user counts, reviews, orders, and uptime","tags":["Analytics","Monitoring"],"responses":{"200":{"description":"Metrics retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"totalUsers":{"type":"number","description":"Total number of registered users","example":15420},"totalReviews":{"type":"number","description":"Total number of reviews submitted","example":8920},"totalCustomOrders":{"type":"number","description":"Total number of custom orders placed","example":1250},"totalWaitlist":{"type":"number","description":"Total number of waitlist entries","example":3500},"totalDrivers":{"type":"number","description":"Total number of registered drivers","example":180},"uptime":{"type":"number","description":"Server uptime in seconds","example":86400},"timestamp":{"type":"string","format":"date-time","description":"Timestamp when metrics were generated","example":"2024-01-15T10:30:00.000Z"}}},"message":{"type":"string","example":"Success"}}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]}},"/contacts":{"get":{"summary":"Get Contact Form Submissions (Admin)","description":"Retrieve contact form submissions with pagination for administrative review","tags":["Admin","Contacts"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of contacts to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of contacts to skip","example":0}],"responses":{"200":{"description":"Contact submissions retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"contacts":{"type":"array","description":"Array of contact form submissions","items":{"type":"object","properties":{"_id":{"type":"string","description":"Contact ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Contact name","example":"John Doe"},"email":{"type":"string","format":"email","description":"Contact email","example":"john@example.com"},"subject":{"type":"string","description":"Contact subject","example":"Question about service"},"message":{"type":"string","description":"Contact message","example":"I have a question about your service..."},"createdAt":{"type":"number","description":"Creation timestamp","example":1640995200000},"status":{"type":"string","enum":["new","read","replied","closed"],"description":"Contact status","example":"new"}}}},"total":{"type":"number","description":"Total number of contacts","example":150},"limit":{"type":"number","description":"Number of contacts per page","example":20},"offset":{"type":"number","description":"Number of contacts skipped","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access contacts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]},"post":{"summary":"Submit Contact Form","description":"Submit a contact form with name, email, subject, and message","tags":["Contacts","Forms"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","email","message"],"properties":{"name":{"type":"string","description":"Contact name","example":"John Doe"},"email":{"type":"string","format":"email","description":"Contact email","example":"john@example.com"},"subject":{"type":"string","nullable":true,"description":"Contact subject","example":"Question about service"},"message":{"type":"string","description":"Contact message","example":"I have a question about your service..."}}}}}},"responses":{"200":{"description":"Contact form submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"contactId":{"type":"string","description":"Created contact ID","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"422":{"description":"Validation error - missing required fields or invalid email","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"delete":{"summary":"Delete Contact (Admin)","description":"Delete a specific contact form submission","tags":["Admin","Contacts"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["contact_id"],"properties":{"contact_id":{"type":"string","description":"Contact ID to delete","example":"j1234567890abcdef"}}}}}},"responses":{"200":{"description":"Contact deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can delete contacts","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"422":{"description":"Validation error - missing contact_id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/submit-form":{"post":{"summary":"Submit Form Data","description":"Submit various types of forms including chef applications and waitlist signups","tags":["Forms","Applications"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["formType"],"properties":{"formType":{"type":"string","enum":["Chef Application","Waitlist"],"description":"Type of form being submitted","example":"Chef Application"},"email":{"type":"string","format":"email","description":"Email address (required for all form types)","example":"chef@example.com"},"fullName":{"type":"string","description":"Full name (required for Chef Application)","example":"John Doe"},"name":{"type":"string","description":"Name (required for Waitlist)","example":"Jane Smith"},"phoneNumber":{"type":"string","nullable":true,"description":"Phone number (optional)","example":"+1-555-123-4567"},"experience":{"type":"string","nullable":true,"description":"Cooking experience (for Chef Application)","example":"5 years professional experience"},"specialties":{"type":"array","nullable":true,"description":"Cuisine specialties (for Chef Application)","items":{"type":"string"},"example":["italian","mexican"]},"location":{"type":"string","nullable":true,"description":"Location (for Chef Application)","example":"New York, NY"},"availability":{"type":"string","nullable":true,"description":"Availability (for Chef Application)","example":"Evenings and weekends"},"motivation":{"type":"string","nullable":true,"description":"Motivation for joining (for Chef Application)","example":"Passionate about sharing authentic recipes"},"referralSource":{"type":"string","nullable":true,"description":"How they heard about the platform","example":"Social media"},"additionalInfo":{"type":"string","nullable":true,"description":"Additional information","example":"Looking forward to joining the community"}}}}}},"responses":{"200":{"description":"Form submitted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Form submitted successfully"},"formType":{"type":"string","example":"Chef Application"},"email":{"type":"string","example":"chef@example.com"},"addedToBroadcast":{"type":"boolean","description":"Whether email was added to broadcast list","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields or invalid data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[]},"options":{"summary":"Handle CORS Preflight","description":"Handle CORS preflight requests for form submission","tags":["Forms","CORS"],"responses":{"200":{"description":"CORS preflight handled successfully","headers":{"Access-Control-Allow-Origin":{"description":"Allowed origin","schema":{"type":"string","example":"*"}},"Access-Control-Allow-Methods":{"description":"Allowed methods","schema":{"type":"string","example":"POST, OPTIONS"}},"Access-Control-Allow-Headers":{"description":"Allowed headers","schema":{"type":"string","example":"Content-Type, Authorization"}}}}},"security":[]}},"/waitlist":{"get":{"summary":"Get Waitlist Entries (Admin)","description":"Retrieve paginated list of waitlist entries (admin only)","tags":["Admin","Waitlist"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of waitlist entries to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of waitlist entries to skip","example":0}],"responses":{"200":{"description":"Waitlist entries retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"waitlist":{"type":"array","description":"Array of waitlist entries","items":{"type":"object","properties":{"_id":{"type":"string","description":"Waitlist entry ID","example":"j1234567890abcdef"},"email":{"type":"string","format":"email","description":"User email address","example":"user@example.com"},"source":{"type":"string","description":"How the user joined the waitlist","example":"website"},"location":{"type":"object","nullable":true,"description":"User's location information","properties":{"city":{"type":"string","example":"London"},"country":{"type":"string","example":"UK"},"coordinates":{"type":"array","items":{"type":"number"},"example":[-0.1276,51.5074]}}},"status":{"type":"string","enum":["pending","contacted","converted","removed"],"description":"Waitlist entry status","example":"pending"},"priority":{"type":"string","enum":["low","medium","high","vip"],"description":"Priority level","example":"medium"},"joinedAt":{"type":"number","description":"Timestamp when user joined waitlist","example":1640995200000},"contactedAt":{"type":"number","nullable":true,"description":"Timestamp when user was contacted","example":1641081600000},"convertedAt":{"type":"number","nullable":true,"description":"Timestamp when user converted to customer","example":1641168000000},"metadata":{"type":"object","nullable":true,"description":"Additional waitlist metadata","example":{"referralCode":"FRIEND123","interest":"italian_cuisine"}}}}},"total":{"type":"number","description":"Total number of waitlist entries","example":1250},"limit":{"type":"number","example":20},"offset":{"type":"number","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins can access this endpoint","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/waitlist/user-confirmation":{"post":{"summary":"Send Waitlist Confirmation","description":"Send confirmation email to user who joined the waitlist","tags":["Waitlist","Early Access","Email"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"email":{"type":"string","format":"email","description":"User email address to send confirmation to","example":"user@example.com"}}}}}},"responses":{"200":{"description":"Confirmation email sent successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"email":{"type":"string","example":"user@example.com"},"confirmationSent":{"type":"boolean","example":true},"broadcastListAdded":{"type":"boolean","example":true},"emailDetails":{"type":"object","properties":{"subject":{"type":"string","example":"You are on the waitlist!"},"from":{"type":"string","example":"earlyaccess@emails.cribnosh.com"},"to":{"type":"string","example":"user@example.com"},"timestamp":{"type":"string","format":"date-time","example":"2024-01-15T10:00:00.000Z"}}}}},"message":{"type":"string","example":"Confirmation email sent successfully"}}}}}},"400":{"description":"Validation error - missing email","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error - email sending failed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/notifications":{"get":{"summary":"Get User Notifications","description":"Get paginated list of notifications for the authenticated user","tags":["Notifications"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":20},"description":"Number of notifications to return","example":20},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of notifications to skip","example":0}],"responses":{"200":{"description":"Notifications retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"notifications":{"type":"array","description":"Array of notifications","items":{"type":"object","properties":{"_id":{"type":"string","description":"Notification ID","example":"j1234567890abcdef"},"userId":{"type":"string","nullable":true,"description":"User ID (null for global notifications)","example":"j1234567890abcdef"},"type":{"type":"string","description":"Notification type","enum":["info","success","warning","error","order","payment","system"],"example":"order"},"title":{"type":"string","description":"Notification title","example":"Order Confirmed"},"message":{"type":"string","description":"Notification message","example":"Your order #12345 has been confirmed and is being prepared"},"isRead":{"type":"boolean","description":"Whether the notification has been read","example":false},"global":{"type":"boolean","description":"Whether this is a global notification","example":false},"role":{"type":"string","nullable":true,"description":"Target role for role-specific notifications","example":"customer"},"metadata":{"type":"object","nullable":true,"description":"Additional notification data","example":{"orderId":"j1234567890abcdef","amount":25.99}},"createdAt":{"type":"number","description":"Notification creation timestamp","example":1640995200000}}}},"total":{"type":"number","description":"Total number of notifications","example":45},"limit":{"type":"number","description":"Number of notifications returned","example":20},"offset":{"type":"number","description":"Number of notifications skipped","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/notifications/unread-count":{"get":{"summary":"Get Unread Notification Count","description":"Retrieve the count of unread notifications for the authenticated user. This endpoint provides a quick way to check notification status without fetching all notification details, useful for badge counts and UI indicators.","tags":["Notifications","Count"],"responses":{"200":{"description":"Unread notification count retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"unread_count":{"type":"integer","description":"Number of unread notifications","example":5},"breakdown":{"type":"object","nullable":true,"description":"Breakdown of unread notifications by type","properties":{"order_updates":{"type":"integer","example":2},"system_alerts":{"type":"integer","example":1},"promotional":{"type":"integer","example":1},"chat_messages":{"type":"integer","example":1}}},"last_checked":{"type":"string","format":"date-time","nullable":true,"description":"Last time user checked notifications","example":"2024-01-15T10:30:00Z"},"has_urgent":{"type":"boolean","description":"Whether there are any urgent notifications","example":false}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/notifications/read-all":{"post":{"summary":"Mark All Notifications as Read","description":"Mark all notifications as read for the authenticated user. This endpoint allows users to clear their notification badge and mark all pending notifications as read in one operation.","tags":["Notifications","Read"],"responses":{"200":{"description":"All notifications marked as read successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true},"markedCount":{"type":"integer","nullable":true,"description":"Number of notifications marked as read","example":5},"timestamp":{"type":"string","format":"date-time","description":"Timestamp when all notifications were marked as read","example":"2024-01-15T14:30:00Z"}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - invalid or missing authentication token","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/notifications/{notification_id}/read":{"post":{"summary":"Mark notification as read","description":"Mark a specific notification as read for the authenticated user","tags":["Notifications"],"parameters":[{"in":"path","name":"notification_id","required":true,"schema":{"type":"string"},"description":"ID of the notification"}],"responses":{"200":{"description":"Notification marked as read successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"success":{"type":"boolean","example":true}}},"message":{"type":"string","example":"Success"}}}}}},"401":{"description":"Unauthorized - Missing or invalid token"},"403":{"description":"Forbidden - Not your notification"},"404":{"description":"Notification not found"},"500":{"description":"Internal server error"}},"security":[{"bearerAuth":[]}]}},"/delivery/drivers":{"get":{"summary":"Get Delivery Drivers","description":"Retrieve delivery drivers with filtering and pagination","tags":["Delivery","Drivers"],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["pending","approved","rejected","on_hold","active","inactive","suspended"]},"description":"Filter by driver status","example":"active"},{"in":"query","name":"availability","schema":{"type":"string","enum":["available","busy","offline","on_delivery"]},"description":"Filter by driver availability","example":"available"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"maximum":100,"default":50},"description":"Number of drivers to return","example":50},{"in":"query","name":"offset","schema":{"type":"integer","minimum":0,"default":0},"description":"Number of drivers to skip","example":0}],"responses":{"200":{"description":"Delivery drivers retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"drivers":{"type":"array","description":"Array of delivery drivers","items":{"type":"object","properties":{"_id":{"type":"string","description":"Driver ID","example":"j1234567890abcdef"},"userId":{"type":"string","description":"Associated user ID","example":"j1234567890abcdef"},"name":{"type":"string","description":"Driver name","example":"John Smith"},"email":{"type":"string","description":"Driver email","example":"driver@example.com"},"phone":{"type":"string","description":"Driver phone number","example":"+1234567890"},"status":{"type":"string","enum":["pending","approved","rejected","on_hold","active","inactive","suspended"],"description":"Driver status","example":"active"},"availability":{"type":"string","enum":["available","busy","offline","on_delivery"],"description":"Current availability","example":"available"},"location":{"type":"object","nullable":true,"description":"Current location","properties":{"latitude":{"type":"number","example":51.5074},"longitude":{"type":"number","example":-0.1276},"accuracy":{"type":"number","example":10},"lastUpdated":{"type":"string","format":"date-time","example":"2024-01-15T15:30:00.000Z"}}},"vehicle":{"type":"object","nullable":true,"description":"Vehicle information","properties":{"type":{"type":"string","example":"bicycle"},"make":{"type":"string","example":"Trek"},"model":{"type":"string","example":"FX 3"},"licensePlate":{"type":"string","nullable":true,"example":"ABC123"}}},"rating":{"type":"number","nullable":true,"description":"Average rating","example":4.8},"totalDeliveries":{"type":"number","description":"Total deliveries completed","example":150},"activeDeliveries":{"type":"number","description":"Currently active deliveries","example":2},"maxCapacity":{"type":"number","description":"Maximum delivery capacity","example":5},"serviceAreas":{"type":"array","items":{"type":"string"},"description":"Service area codes","example":["SW1","SW2","SW3"]},"certifications":{"type":"array","items":{"type":"string"},"description":"Driver certifications","example":["food_safety","first_aid"]},"createdAt":{"type":"string","format":"date-time","description":"Driver registration timestamp","example":"2024-01-15T10:00:00.000Z"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp","example":"2024-01-15T15:30:00.000Z"}}}},"total":{"type":"number","description":"Total number of drivers matching filters","example":25},"limit":{"type":"number","example":50},"offset":{"type":"number","example":0}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - invalid parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/delivery/assign":{"post":{"summary":"Assign Delivery Driver","description":"Assign a delivery driver to an order (admin/staff only)","tags":["Delivery","Orders"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["orderId"],"properties":{"orderId":{"type":"string","description":"Order ID to assign delivery for","example":"j1234567890abcdef"},"driverId":{"type":"string","nullable":true,"description":"Specific driver ID (auto-assign if not provided)","example":"j1234567890abcdef"},"estimatedPickupTime":{"type":"string","format":"date-time","nullable":true,"description":"Estimated pickup time","example":"2024-01-15T18:00:00.000Z"},"estimatedDeliveryTime":{"type":"string","format":"date-time","nullable":true,"description":"Estimated delivery time","example":"2024-01-15T18:30:00.000Z"},"pickupInstructions":{"type":"string","nullable":true,"description":"Special pickup instructions","example":"Ring doorbell twice, ask for John"},"deliveryInstructions":{"type":"string","nullable":true,"description":"Special delivery instructions","example":"Leave at front door if no answer"},"metadata":{"type":"object","nullable":true,"description":"Additional delivery metadata","example":{"priority":"high","fragile":true}}}}}}},"responses":{"200":{"description":"Delivery assigned successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"assignmentId":{"type":"string","description":"Delivery assignment ID","example":"j1234567890abcdef"},"orderId":{"type":"string","example":"j1234567890abcdef"},"driverId":{"type":"string","description":"Assigned driver ID","example":"j1234567890abcdef"},"status":{"type":"string","enum":["assigned","picked_up","in_transit","delivered","failed"],"description":"Delivery status","example":"assigned"},"estimatedPickupTime":{"type":"string","format":"date-time","nullable":true,"example":"2024-01-15T18:00:00.000Z"},"estimatedDeliveryTime":{"type":"string","format":"date-time","nullable":true,"example":"2024-01-15T18:30:00.000Z"},"assignedAt":{"type":"string","format":"date-time","description":"Assignment timestamp","example":"2024-01-15T17:45:00.000Z"},"assignedBy":{"type":"string","description":"User who made the assignment","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - only admins and staff can assign deliveries","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/delivery/track":{"post":{"summary":"Update Delivery Status","description":"Update the status and location of a delivery assignment","tags":["Delivery","Tracking"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["assignmentId","status"],"properties":{"assignmentId":{"type":"string","description":"Delivery assignment ID","example":"j1234567890abcdef"},"status":{"type":"string","enum":["accepted","picked_up","in_transit","delivered","failed"],"description":"New delivery status","example":"in_transit"},"location":{"type":"object","nullable":true,"description":"Current location coordinates","properties":{"latitude":{"type":"number","minimum":-90,"maximum":90,"description":"Latitude coordinate","example":51.5074},"longitude":{"type":"number","minimum":-180,"maximum":180,"description":"Longitude coordinate","example":-0.1276},"accuracy":{"type":"number","minimum":0,"description":"Location accuracy in meters","example":10}}},"notes":{"type":"string","nullable":true,"description":"Additional notes about the delivery status","example":"Delivered to front door as requested"},"metadata":{"type":"object","nullable":true,"description":"Additional delivery metadata","example":{"deliveryTime":"18:30","customerRating":5}}}}}}},"responses":{"200":{"description":"Delivery status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"assignmentId":{"type":"string","example":"j1234567890abcdef"},"status":{"type":"string","example":"in_transit"},"location":{"type":"object","nullable":true,"properties":{"latitude":{"type":"number","example":51.5074},"longitude":{"type":"number","example":-0.1276},"accuracy":{"type":"number","example":10}}},"notes":{"type":"string","nullable":true,"example":"Delivered to front door as requested"},"updatedAt":{"type":"string","format":"date-time","description":"Status update timestamp","example":"2024-01-15T18:30:00.000Z"},"updatedBy":{"type":"string","description":"User who updated the status","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Success"}}}}}},"400":{"description":"Validation error - missing required fields or invalid status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized - invalid or missing authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"404":{"description":"Delivery assignment not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}},"security":[{"bearerAuth":[]}]}},"/api/keep-alive":{},"/api/nosh-heaven/videos":{"post":{"summary":"Create a new video post","description":"Creates a new video post in Nosh Heaven","tags":["Nosh Heaven","Videos"],"security":[{"Bearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","videoUrl","duration","fileSize","resolution","tags"],"properties":{"title":{"type":"string","description":"Title of the video","example":"How to Make Perfect Pasta"},"description":{"type":"string","description":"Description of the video","example":"Learn the secret to making restaurant-quality pasta at home"},"videoUrl":{"type":"string","description":"S3 URL of the uploaded video","example":"https://cdn.noshheaven.com/videos/user123/1234567890_my-cooking-video.mp4"},"thumbnailUrl":{"type":"string","description":"S3 URL of the thumbnail image","example":"https://cdn.noshheaven.com/thumbnails/user123/video123_1234567890_thumbnail.jpg"},"duration":{"type":"number","description":"Duration in seconds","example":300},"fileSize":{"type":"number","description":"File size in bytes","example":52428800},"resolution":{"type":"object","properties":{"width":{"type":"number","example":1920},"height":{"type":"number","example":1080}}},"tags":{"type":"array","items":{"type":"string"},"example":["pasta","italian","cooking","tutorial"]},"cuisine":{"type":"string","description":"Type of cuisine","example":"Italian"},"difficulty":{"type":"string","enum":["beginner","intermediate","advanced"],"example":"intermediate"},"visibility":{"type":"string","enum":["public","followers","private"],"default":"public","example":"public"},"isLive":{"type":"boolean","description":"Whether this is a live cooking session","example":false},"liveSessionId":{"type":"string","description":"ID of associated live session","example":"j1234567890abcdef"}}}}}},"responses":{"201":{"description":"Video post created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"videoId":{"type":"string","description":"ID of the created video post","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Video post created successfully"}}}}}},"400":{"description":"Validation error"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}}},"/api/nosh-heaven/videos/thumbnail-upload-url":{"post":{"summary":"Generate presigned URL for thumbnail upload","description":"Creates a presigned URL for uploading video thumbnails to S3","tags":["Nosh Heaven","Videos"],"security":[{"Bearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["videoId","fileName","fileSize","contentType"],"properties":{"videoId":{"type":"string","description":"ID of the video post","example":"j1234567890abcdef"},"fileName":{"type":"string","description":"Name of the thumbnail file","example":"thumbnail.jpg"},"fileSize":{"type":"number","description":"Size of the file in bytes","example":1048576},"contentType":{"type":"string","description":"MIME type of the file","example":"image/jpeg"}}}}}},"responses":{"200":{"description":"Presigned URL generated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"uploadUrl":{"type":"string","description":"Presigned URL for uploading"},"key":{"type":"string","description":"S3 object key"},"publicUrl":{"type":"string","description":"Public URL for accessing the thumbnail"}}},"message":{"type":"string","example":"Thumbnail upload URL generated successfully"}}}}}},"400":{"description":"Validation error"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"}}}},"/api/nosh-heaven/videos/upload-url":{"post":{"summary":"Generate presigned URL for video upload","description":"Creates a presigned URL for uploading videos to S3 for Nosh Heaven","tags":["Nosh Heaven","Videos"],"security":[{"Bearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["fileName","fileSize","contentType"],"properties":{"fileName":{"type":"string","description":"Name of the video file","example":"my-cooking-video.mp4"},"fileSize":{"type":"number","description":"Size of the file in bytes","example":52428800},"contentType":{"type":"string","description":"MIME type of the file","example":"video/mp4"}}}}}},"responses":{"200":{"description":"Presigned URL generated successfully","content":{"application/json":null,"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"uploadUrl":{"type":"string","description":"Presigned URL for uploading","example":"https://s3.amazonaws.com/bucket/videos/user123/1234567890_my-cooking-video.mp4?X-Amz-Algorithm=..."},"key":{"type":"string","description":"S3 object key","example":"videos/user123/1234567890_my-cooking-video.mp4"},"publicUrl":{"type":"string","description":"Public URL for accessing the video","example":"https://cdn.noshheaven.com/videos/user123/1234567890_my-cooking-video.mp4"}}},"message":{"type":"string","example":"Upload URL generated successfully"}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Forbidden - User not authorized to upload videos","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/api/nosh-heaven/videos/{videoId}":{"get":{"summary":"Get video by ID","description":"Retrieves a specific video post by its ID","tags":["Nosh Heaven","Videos"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"}],"responses":{"200":{"description":"Video retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"$ref":"#/components/schemas/VideoPost"},"message":{"type":"string","example":"Video retrieved successfully"}}}}}},"404":{"description":"Video not found"},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/videos/{videoId}/edit":{"put":{"summary":"Edit video","description":"Edit video details","tags":["Nosh Heaven"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"Video ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"Video edited successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/videos/{videoId}/delete":{"delete":{"summary":"Delete video","description":"Delete a video","tags":["Nosh Heaven"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"Video ID"}],"responses":{"200":{"description":"Video deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/videos/{videoId}/like":{"post":{"summary":"Like a video","description":"Likes a video post","tags":["Nosh Heaven","Videos","Interactions"],"security":[{"Bearer":[]}],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"}],"responses":{"200":{"description":"Video liked successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Video liked successfully"}}}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"404":{"description":"Video not found"}}}},"/api/nosh-heaven/videos/{videoId}/download":{"get":{"summary":"Download video","description":"Download a video file","tags":["Nosh Heaven"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"Video ID"}],"responses":{"200":{"description":"Video download URL retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"object"}}}}}},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/videos/{videoId}/share":{"post":{"summary":"Share a video","description":"Records a video share event","tags":["Nosh Heaven","Videos","Interactions"],"security":[{"Bearer":[]}],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"}],"requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"platform":{"type":"string","enum":["internal","facebook","twitter","instagram","whatsapp","other"],"default":"internal","description":"Platform where the video was shared","example":"facebook"}}}}}},"responses":{"200":{"description":"Video shared successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Video shared successfully"}}}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"404":{"description":"Video not found"}}}},"/api/nosh-heaven/videos/{videoId}/upload":{"post":{"summary":"Upload video","description":"Upload a video file","tags":["Nosh Heaven"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"Video ID"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"video":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Video uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}}}}}},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/videos/{videoId}/view":{"post":{"summary":"Record video view","description":"Records a video view event for analytics","tags":["Nosh Heaven","Videos","Analytics"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["watchDuration","completionRate"],"properties":{"watchDuration":{"type":"number","description":"Duration watched in seconds","example":120},"completionRate":{"type":"number","description":"Percentage of video watched (0-100)","example":75.5},"deviceInfo":{"type":"object","properties":{"type":{"type":"string","example":"mobile"},"os":{"type":"string","example":"iOS"},"browser":{"type":"string","example":"Safari"}}},"location":{"type":"object","properties":{"country":{"type":"string","example":"US"},"city":{"type":"string","example":"New York"}}},"sessionId":{"type":"string","description":"Session ID for anonymous users","example":"sess_1234567890"}}}}}},"responses":{"200":{"description":"View recorded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"View recorded successfully"}}}}}},"400":{"description":"Bad request"},"404":{"description":"Video not found"}}}},"/api/nosh-heaven/videos/{videoId}/comments":{"get":{"summary":"Get video comments","description":"Retrieves comments for a specific video","tags":["Nosh Heaven","Videos","Comments"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of comments to return"},{"in":"query","name":"cursor","schema":{"type":"string"},"description":"Cursor for pagination"}],"responses":{"200":{"description":"Comments retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"comments":{"type":"array","items":{"$ref":"#/components/schemas/VideoComment"}},"nextCursor":{"type":"string","description":"Cursor for next page"}}},"message":{"type":"string","example":"Comments retrieved successfully"}}}}}},"404":{"description":"Video not found"}}}},"/api/nosh-heaven/videos/{videoId}/comments/{commentId}":{"get":{"summary":"Get comment by ID","description":"Retrieves a specific comment by its ID","tags":["Nosh Heaven","Videos","Comments"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"},{"in":"path","name":"commentId","required":true,"schema":{"type":"string"},"description":"ID of the comment"}],"responses":{"200":{"description":"Comment retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"$ref":"#/components/schemas/VideoComment"},"message":{"type":"string","example":"Comment retrieved successfully"}}}}}},"404":{"description":"Comment not found"}}}},"/api/nosh-heaven/videos/{videoId}/report":{"post":{"summary":"Report video","description":"Report a video for inappropriate content","tags":["Nosh Heaven"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"Video ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["reason"],"properties":{"reason":{"type":"string","enum":["inappropriate_content","spam","harassment","violence","copyright","other"],"description":"Reason for reporting"},"description":{"type":"string","description":"Additional details about the report"},"timestamp":{"type":"number","description":"Specific timestamp in video (optional)"}}}}}},"responses":{"200":{"description":"Video reported successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object"}}}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/videos/{videoId}/thumbnail":{"get":{"summary":"Get video thumbnail","description":"Get video thumbnail","tags":["Nosh Heaven"],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"Video ID"}],"responses":{"200":{"description":"Video thumbnail retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"data":{"type":"object"}}}}}},"500":{"description":"Internal server error"}}}},"/api/nosh-heaven/collections":{"post":{"summary":"Create video collection","description":"Creates a new video collection/playlist","tags":["Nosh Heaven","Collections"],"security":[{"Bearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","videoIds"],"properties":{"name":{"type":"string","description":"Name of the collection","example":"My Favorite Recipes"},"description":{"type":"string","description":"Description of the collection","example":"A collection of my favorite cooking videos"},"isPublic":{"type":"boolean","description":"Whether the collection is public","default":true,"example":true},"videoIds":{"type":"array","items":{"type":"string"},"description":"Array of video IDs to include","example":["j1234567890abcdef","j0987654321fedcba"]},"coverImageUrl":{"type":"string","description":"URL of the cover image","example":"https://cdn.noshheaven.com/collections/cover.jpg"}}}}}},"responses":{"201":{"description":"Collection created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"collectionId":{"type":"string","description":"ID of the created collection","example":"j1234567890abcdef"}}},"message":{"type":"string","example":"Collection created successfully"}}}}}},"400":{"description":"Validation error"},"401":{"description":"Unauthorized"}}}},"/api/nosh-heaven/admin/videos":{"get":{"summary":"Get all videos for admin","description":"Retrieves all videos with admin details for moderation","tags":["Nosh Heaven","Admin","Videos"],"security":[{"Bearer":[]}],"parameters":[{"in":"query","name":"status","schema":{"type":"string","enum":["draft","published","archived","flagged","removed"]},"description":"Filter by video status"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of videos to return"},{"in":"query","name":"cursor","schema":{"type":"string"},"description":"Cursor for pagination"}],"responses":{"200":{"description":"Videos retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"videos":{"type":"array","items":{"$ref":"#/components/schemas/VideoPost"}},"nextCursor":{"type":"string","description":"Cursor for next page"}}},"message":{"type":"string","example":"Videos retrieved successfully"}}}}}},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"}}}},"/api/nosh-heaven/admin/videos/{videoId}/moderate":{"post":{"summary":"Moderate video","description":"Admin action to moderate a video (approve, reject, flag)","tags":["Nosh Heaven","Admin","Videos"],"security":[{"Bearer":[]}],"parameters":[{"in":"path","name":"videoId","required":true,"schema":{"type":"string"},"description":"ID of the video post"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["action"],"properties":{"action":{"type":"string","enum":["approve","reject","flag","remove"],"description":"Moderation action to take","example":"approve"},"reason":{"type":"string","description":"Reason for the action","example":"Content violates community guidelines"},"notes":{"type":"string","description":"Additional notes for the moderation","example":"Contains inappropriate language"}}}}}},"responses":{"200":{"description":"Video moderated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Video moderated successfully"}}}}}},"400":{"description":"Validation error"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden - Admin access required"},"404":{"description":"Video not found"}}}},"/api/nosh-heaven/search/videos":{"get":{"summary":"Search videos","description":"Searches for videos based on query, cuisine, difficulty, and tags","tags":["Nosh Heaven","Search","Videos"],"parameters":[{"in":"query","name":"q","required":true,"schema":{"type":"string"},"description":"Search query","example":"pasta recipe"},{"in":"query","name":"cuisine","schema":{"type":"string"},"description":"Filter by cuisine type","example":"Italian"},{"in":"query","name":"difficulty","schema":{"type":"string","enum":["beginner","intermediate","advanced"]},"description":"Filter by difficulty level","example":"intermediate"},{"in":"query","name":"tags","schema":{"type":"array","items":{"type":"string"}},"description":"Filter by tags","example":["vegetarian","quick"]},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of results to return"},{"in":"query","name":"cursor","schema":{"type":"string"},"description":"Cursor for pagination"}],"responses":{"200":{"description":"Search results retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"videos":{"type":"array","items":{"$ref":"#/components/schemas/VideoPost"}},"nextCursor":{"type":"string","description":"Cursor for next page"}}},"message":{"type":"string","example":"Search results retrieved successfully"}}}}}},"400":{"description":"Validation error"}}}},"/api/nosh-heaven/search/users":{"get":{"summary":"Search users","description":"Searches for users by name or email","tags":["Nosh Heaven","Search","Users"],"parameters":[{"in":"query","name":"q","required":true,"schema":{"type":"string"},"description":"Search query","example":"chef john"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of results to return"},{"in":"query","name":"cursor","schema":{"type":"string"},"description":"Cursor for pagination"}],"responses":{"200":{"description":"Search results retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/User"}},"nextCursor":{"type":"string","description":"Cursor for next page"}}},"message":{"type":"string","example":"Search results retrieved successfully"}}}}}},"400":{"description":"Validation error"}}}},"/api/nosh-heaven/users/{userId}/videos":{"get":{"summary":"Get user's videos","description":"Retrieves videos created by a specific user","tags":["Nosh Heaven","Users","Videos"],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string"},"description":"ID of the user"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of videos to return"},{"in":"query","name":"cursor","schema":{"type":"string"},"description":"Cursor for pagination"}],"responses":{"200":{"description":"User videos retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"videos":{"type":"array","items":{"$ref":"#/components/schemas/VideoPost"}},"nextCursor":{"type":"string","description":"Cursor for next page"}}},"message":{"type":"string","example":"User videos retrieved successfully"}}}}}},"404":{"description":"User not found"}}}},"/api/nosh-heaven/users/{userId}/follow":{"post":{"summary":"Follow a user","description":"Follows a user to see their content in the feed","tags":["Nosh Heaven","Users","Social"],"security":[{"Bearer":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"string"},"description":"ID of the user to follow"}],"responses":{"200":{"description":"User followed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"User followed successfully"}}}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized"},"404":{"description":"User not found"}}}},"/api/nosh-heaven/trending":{"get":{"summary":"Get trending videos","description":"Retrieves trending videos based on engagement metrics","tags":["Nosh Heaven","Videos","Trending"],"parameters":[{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of videos to return"},{"in":"query","name":"timeRange","schema":{"type":"string","enum":["24h","7d","30d","all"],"default":"7d"},"description":"Time range for trending calculation"}],"responses":{"200":{"description":"Trending videos retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/VideoPost"},{"type":"object","properties":{"engagementScore":{"type":"number","description":"Calculated engagement score","example":0.75}}}]}},"message":{"type":"string","example":"Trending videos retrieved successfully"}}}}}}}}}},"components":{"schemas":{"Error":{"type":"object","properties":{"error":{"type":"string","description":"Error message"},"code":{"type":"string","description":"Error code"},"details":{"type":"object","description":"Additional error details"}}},"Success":{"type":"object","properties":{"success":{"type":"boolean","description":"Success status"},"message":{"type":"string","description":"Success message"},"data":{"type":"object","description":"Response data"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"},"apiKey":{"type":"apiKey","in":"header","name":"X-API-Key"}}},"security":[{"bearerAuth":[]}]}